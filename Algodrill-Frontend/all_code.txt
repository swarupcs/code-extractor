

==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\apis\auth\index.js
==============================

import axios from '@/config/axiosConfig';


export const signUpRequest = async ({ email, password, name }) => {
  try {
    const response = await axios.post('/auth/register', {
      email,
      name,
      password,
    });
    return response.data;
  } catch (error) {
    console.error(error);
    throw error.response.data;
  }
};




export const signInRequest = async ({ email, password }) => {
  try {
    const response = await axios.post('/auth/login', {
      email,
      password,
    });
    return response.data;
  } catch (error) {
    console.error(error);
    throw error.response.data;
  }
};

export const getUserDetails = async () => {
  try {
    const response = await axios.get('/auth/getUserDetails');
    return response.data;
  } catch (error) {
    console.error(error);
    throw error.response.data;
    
  }
}



==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\apis\CreateProblem\index.js
==============================

import axios from '@/config/axiosConfig';

/*
{
    "title": "Palindrome Number For Test-1",
    "description": "Given an integer n, check whether it is a palindrome number. A palindrome number is the same when read forward and backward.",
    "difficulty": "EASY",
    "tags": [
      "math",
      "string",
      "number-theory"
    ],
    "examples": {
      "PYTHON": {
        "input": "121",
        "output": "true",
        "explanation": "121 reads the same forwards and backwards."
      },
      "JAVASCRIPT": {
        "input": "123",
        "output": "false",
        "explanation": "123 is not the same backwards."
      }
    },
    "constraints": "-10^9 ≤ n ≤ 10^9",
    "testcases": [
      {
        "input": "121",
        "output": "true"
      },
      {
        "input": "123",
        "output": "false"
      },
      {
        "input": "-121",
        "output": "false"
      },
      {
        "input": "0",
        "output": "true"
      }
    ],
    "codeSnippets": {
      "PYTHON": "def is_palindrome(n):\n    # Write your code here\n    return False\n\nimport sys\nn = int(sys.stdin.read())\nprint(str(is_palindrome(n)).lower())",
      "JAVASCRIPT": "const fs = require('fs');\n\nfunction isPalindrome(n) {\n    // Write your code here\n    return false;\n}\n\nconst input = fs.readFileSync(0, 'utf-8').trim();\nconst n = Number(input);\nconsole.log(isPalindrome(n));",
      "JAVA": "import java.util.Scanner;\n\npublic class Main {\n    public static boolean isPalindrome(int n) {\n        // Write your code here\n        return false;\n    }\n\n    public static void main(String[] args) {\n        Scanner sc = new Scanner(System.in);\n        int n = sc.nextInt();\n        System.out.println(isPalindrome(n));\n    }\n}"
    },
    "referenceSolutions": {
      "PYTHON": "import sys\nn = int(sys.stdin.read())\n\ndef is_palindrome(n):\n    if n < 0:\n        print(\"false\")\n        return\n    original = str(n)\n    reversed_n = original[::-1]\n    print(\"true\" if original == reversed_n else \"false\")\n\nis_palindrome(n)",
      "JAVASCRIPT": "const fs = require('fs');\nconst input = fs.readFileSync(0, 'utf-8').trim();\nconst n = Number(input);\n\nfunction isPalindrome(n) {\n    if (n < 0) return false;\n    const s = n.toString();\n    return s === s.split('').reverse().join('');\n}\n\nconsole.log(isPalindrome(n));",
      "JAVA": "import java.util.Scanner;\n\npublic class Main {\n    public static void main(String[] args) {\n        Scanner sc = new Scanner(System.in);\n        int n = sc.nextInt();\n        if (n < 0) {\n            System.out.println(\"false\");\n            return;\n        }\n        String s = Integer.toString(n);\n        StringBuilder rev = new StringBuilder(s).reverse();\n        System.out.println(s.equals(rev.toString()));\n    }\n}"
    }
  }


*/

/*
  The payload is structured as:
  {
    problemNumber: number,
    problem: { title, description, difficulty, tags, examples, constraints, codeSnippets, referenceSolutions },
    testCases: [ { input, expected, isPublic } ]
  }
*/
export const createProblemRequest = async ({
  problemNumber,
  problem,
  testCases,
}) => {
  try {
    const response = await axios.post('/problems/create-problem', {
      problemNumber,
      problem,
      testCases,
    });
    return response.data;
  } catch (error) {
    console.error(error);
    throw error.response.data;
  }
};


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\apis\Delete Problem\index.js
==============================

import axios from "@/config/axiosConfig";


export const deleteProblem = async (problemId) => {
    try {
        const response = await axios.delete(`/problems/delete-problem/${problemId}`);
        return response.data;
    } catch (error) {
        console.error(error);
        throw error.response.data;
    }
}

==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\apis\Discussions\createComment.js
==============================

import axios from '@/config/axiosConfig';

export const createCommentRequest = async (post) => {
  try {
    const response = await axios.post('/discussions/createComment', post);
    return response.data;
  } catch (error) {
    console.error(error);
    throw error.response.data;
  }
};


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\apis\Discussions\CreateDiscussions.js
==============================

import axios from '@/config/axiosConfig';


export const createDiscussionRequest = async (post) => {
  try {
    const response = await axios.post('/discussions/createDiscussion', post);
    return response.data;
  } catch (error) {
    console.error(error);
    throw error.response.data;
  }
}

==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\apis\Discussions\deleteComment.js
==============================

import axios from '@/config/axiosConfig';

export const deleteCommentRequest = async (id) => {
  try {
    console.log('discussionId', id);
    const response = await axios.delete(`/discussions/deleteComment/${id}`);
    return response.data;
  } catch (error) {
    console.error(error);
    throw error.response.data;
  }
};


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\apis\Discussions\deleteDiscussion.js
==============================

import axios from '@/config/axiosConfig';


export const deleteDiscussionRequest = async (id) => {
  try {

    console.log('discussionId', id);
    const response = await axios.delete(`/discussions/deleteDiscussion/${id}`);
    return response.data;
  } catch (error) {
    console.error(error);
    throw error.response.data;
  }
}

==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\apis\Discussions\getAllComments.js
==============================

import axios from '@/config/axiosConfig';

export const getAllCommentsRequest = async (discussionId) => {
  try {
    const response = await axios.get(
      `/discussions/getAllComments${discussionId}`
    );
    return response.data;
  } catch (error) {
    console.error(error);
    throw error.response.data;
  }
};


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\apis\Discussions\GetAllDiscussions.js
==============================

import axios from '@/config/axiosConfig';


export const getAllDiscussionsRequest = async () => {
  try {
    const response = await axios.get('/discussions/getAllDiscussions');
    return response.data;
  } catch (error) {
    console.error(error);
    throw error.response.data;
  }
}

==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\apis\Discussions\updateComment.js
==============================

import axios from '@/config/axiosConfig';

export const updateCommentRequest = async (discussionId) => {
  try {
    const response = await axios.put(
      `/discussions/updateComment/${discussionId}`
    );
    return response.data;
  } catch (error) {
    console.error(error);
    throw error.response.data;
  }
};


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\apis\Discussions\updateDiscussion.js
==============================

import axios from '@/config/axiosConfig';


export const updateDiscussionRequest = async (discussionId) => {
  try {
    const response = await axios.put(`/discussions/updateDiscussion/${discussionId}`);
    return response.data;
  } catch (error) {
    console.error(error);
    throw error.response.data;
  }
}

==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\apis\getAllProblems\index.js
==============================

import axios from '@/config/axiosConfig';


export const getAllProblemsRequest = async (userId = null) => {
  try {
    const response = await axios.post('/problems/get-all-problems', {
      userId,
    });
    return response.data;
  } catch (error) {
    console.error(error);
    throw error.response.data;
  }
};


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\apis\getIndividualProblemDetails\index.js
==============================

import axios from '@/config/axiosConfig';


export const getIndividualProblemsRequest = async (problemId) => {
  try {
    const response = await axios.get(`/problems/get-problem/${problemId}`);
    return response.data;
  } catch (error) {
    console.error(error);
    throw error.response.data;
  }
};


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\apis\getUserSubmissions\index.js
==============================

import axios from '@/config/axiosConfig';

export const getUserAllSubmissions = async () => {
  try {
    const response = await axios.get('/submission/getUserSubmissions');
    return response.data;
  } catch (error) {
    console.error(error);
    throw error.response.data;
  }
};


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\apis\getUserSubmissionSpecificProblemDetails\index.js
==============================

import axios from '@/config/axiosConfig';

export const getUserSubmissionSpecificProblemDetails = async (problemId) => {
    if (!problemId) {
      throw new Error('Problem ID is required');
    }
    try {
    const response = await axios.get(
      `/submission/getUserSubmissionsForSpecificProblem/${problemId}`
    );
    return response.data;
  } catch (error) {
    console.error(error);
    throw error.response.data;
  }
};


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\apis\Leaderboard\getLeaderBoardData.js
==============================

import axios from '@/config/axiosConfig';



export const getLeaderBoardDataRequest = async () => {
    try {
        const response = await axios.get('/leaderboard/getLeaderboard');
        return response.data;
    } catch (error) {
        console.error('Error fetching leaderboard data:', error);
        throw error.response ? error.response.data : 'Network Error';
        
    }
}

==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\apis\ProblemSheet\addProblemToSheet.js
==============================

import axios from '@/config/axiosConfig';


export const addProblemToSheetRequest = async ({ sheetId, problemId }) => {
  try {
    const response = await axios.post(`/sheets/${sheetId}/addProblem`, {
      problemIds: problemId,
    });
    return response.data;
  } catch (error) {
    console.error(error);
    throw error.response.data;
  }
}

==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\apis\ProblemSheet\createSheet.js
==============================

import axios from '@/config/axiosConfig';

export const createSheetRequest = async ({name, description}) => {
  try {
    const response = await axios.post('/sheets/createSheet', {
      name,
      description,
    });
    return response.data;
  } catch (error) {
    console.error(error);
    throw error.response.data;
  }
}

==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\apis\ProblemSheet\deleteSheet.js
==============================

import axios from '@/config/axiosConfig';

export const deleteSheetRequest = async (sheetId) => {
  try {
    const response = await axios.delete(`/sheets/${sheetId}`);
    return response.data;
  } catch (error) {
    console.error(error);
    throw error.response.data;
  }
}

==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\apis\ProblemSheet\getAllSheetDetails.js
==============================

import axios from '@/config/axiosConfig';

export const getAllSheetDetailsRequest = async () => {
  try {
    const response = await axios.get('/sheets');
    return response.data;
  } catch (error) {
    console.error(error);
    throw error.response.data;
  }
};

==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\apis\ProblemSheet\getIndividualSheetDetails.js
==============================

import axios from '@/config/axiosConfig';

export const getIndividualSheetDetailsRequest = async (sheetId) => {
  try {
    const response = await axios.get(`/sheets/${sheetId}`);
    return response.data;
  } catch (error) {
    console.error(error);
    throw error.response.data;
  }
}


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\apis\ProblemSheet\removeProblemFromSheet.js
==============================

import axios from '@/config/axiosConfig';


export const removeProblemFromSheetRequest = async ({ sheetId, problemId }) => {
  try {
    const response = await axios.delete(`/sheets/${sheetId}/removeProblem`, {
      problemIds: problemId,
    });
    return response.data;
  } catch (error) {
    console.error(error);
    throw error.response.data;
  }
};

==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\apis\ProblemSheet\updateProblemsInSheet.js
==============================

import axios from '@/config/axiosConfig';


export const updateProblemsInSheetRequest = async ({ sheetId, problemIds }) => {
  try {
    const response = await axios.post(`/sheets/${sheetId}/updateProblems`, {
      problemIds
    });
    return response.data;
  } catch (error) {
    console.error(error);
    throw error.response?.data || error;
  }
}

==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\apis\runCode\index.js
==============================

import axios from '@/config/axiosConfig';

export const runCode = async ({
  source_code,
  language_id,
  problemId,
}) => {
  try {
    const response = await axios.post('codeExecutor/runCode', {
      source_code,
      language_id,
      problemId,
    });
    return response.data;
  } catch (error) {
    console.error(error);
    throw error.response.data;
  }
};


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\apis\submitCode\index.js
==============================

import axios from '@/config/axiosConfig';

export const submitCode = async ({
  source_code,
  language_id,
  problemId,
}) => {
  try {
    const response = await axios.post('codeExecutor/submitCode', {
      source_code,
      language_id,
      problemId,
    });
    return response.data;
  } catch (error) {
    console.error(error);
    throw error.response.data;
  }
};


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\apis\updateProblemDetails\index.js
==============================

import axios from '@/config/axiosConfig';

export const updateProblemDetails = async ({
  problemId,
  problemNumber,
  problem,
  testCases,
}) => {
  try {
    const response = await axios.put(`/problems/update-problem/${problemId}`, {
      problemNumber,
      problem,
      testCases,
    });

    return response.data;
  } catch (error) {
    console.log('error', error);
    throw error.response.data;
  }
};


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\apis\userStats\getUserHeatMapData.js
==============================

import axios from '@/config/axiosConfig';


export const getUserHeatMapDataRequest = async () => {
  try {
    const response = await axios.get('/userStats/getUserHeatMapData');
    return response.data;
  } catch (error) {
    console.error(error);
    throw error.response.data;
  }
}

==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\apis\userStats\getUserProgressData.js
==============================

import axios from '@/config/axiosConfig';


export const getUserProgressDataRequest = async () => {
  try {
    const response = await axios.get('/userStats/getUserProgress');
    return response.data;
  } catch (error) {
    console.error(error);
    throw error.response.data;
  }
}

==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\apis\userStats\getUserSolvedStats.js
==============================

import axios from '@/config/axiosConfig';


export const getUSerSolvedStatsRequest = async () => {
  try {
    const response = await axios.get('/userStats/getUserSolvedStats');
    return response.data;
  } catch (error) {
    console.error(error);
    throw error.response.data;
  }
}

==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\app\store.js
==============================

import { configureStore } from '@reduxjs/toolkit';
import {
  persistStore,
  persistReducer,
  FLUSH,
  REHYDRATE,
  PAUSE,
  PERSIST,
  PURGE,
  REGISTER,
} from 'redux-persist';
import storage from 'redux-persist/lib/storage'; // defaults to localStorage
import authReducer from '../features/auth/authSlice';

// Configuration for redux-persist
const persistConfig = {
  key: 'root',
  storage,
  //whitelist: ['auth'] // only persist auth reducer
  
};

// Create a persisted reducer
const persistedAuthReducer = persistReducer(persistConfig, authReducer);

export const store = configureStore({
  reducer: {
    auth: persistedAuthReducer,
  },
  middleware: (getDefaultMiddleware) =>
    getDefaultMiddleware({
      serializableCheck: {
        // Ignore these action types to avoid errors with non-serializable values
        ignoredActions: [FLUSH, REHYDRATE, PAUSE, PERSIST, PURGE, REGISTER],
      },
    }),
});

// Create the persistor
export const persistor = persistStore(store);

==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\App.css
==============================



==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\App.jsx
==============================

import './App.css'
import { QueryClient, QueryClientProvider } from '@tanstack/react-query';
import { AppRoutes } from './Routes';
import { Toaster } from '@/components/ui/sonner';
import { Provider } from 'react-redux';
import { PersistGate } from 'redux-persist/integration/react';
import { persistor, store } from './app/store';
function App() {
  const queryClient = new QueryClient();

  // Add this to verify the store and persistor are correctly initialized
  console.log('Store initialized:', store);
  console.log('Persistor initialized:', persistor);

  return (
    <Provider store={store}>
      <PersistGate loading={null} persistor={persistor}>
        <QueryClientProvider client={queryClient}>
          <AppRoutes />
          <Toaster position='top-center' richColors />
        </QueryClientProvider>
      </PersistGate>
    </Provider>
  );
}

export default App


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\assets\react.svg
==============================

<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="iconify iconify--logos" width="35.93" height="32" preserveAspectRatio="xMidYMid meet" viewBox="0 0 256 228"><path fill="#00D8FF" d="M210.483 73.824a171.49 171.49 0 0 0-8.24-2.597c.465-1.9.893-3.777 1.273-5.621c6.238-30.281 2.16-54.676-11.769-62.708c-13.355-7.7-35.196.329-57.254 19.526a171.23 171.23 0 0 0-6.375 5.848a155.866 155.866 0 0 0-4.241-3.917C100.759 3.829 77.587-4.822 63.673 3.233C50.33 10.957 46.379 33.89 51.995 62.588a170.974 170.974 0 0 0 1.892 8.48c-3.28.932-6.445 1.924-9.474 2.98C17.309 83.498 0 98.307 0 113.668c0 15.865 18.582 31.778 46.812 41.427a145.52 145.52 0 0 0 6.921 2.165a167.467 167.467 0 0 0-2.01 9.138c-5.354 28.2-1.173 50.591 12.134 58.266c13.744 7.926 36.812-.22 59.273-19.855a145.567 145.567 0 0 0 5.342-4.923a168.064 168.064 0 0 0 6.92 6.314c21.758 18.722 43.246 26.282 56.54 18.586c13.731-7.949 18.194-32.003 12.4-61.268a145.016 145.016 0 0 0-1.535-6.842c1.62-.48 3.21-.974 4.76-1.488c29.348-9.723 48.443-25.443 48.443-41.52c0-15.417-17.868-30.326-45.517-39.844Zm-6.365 70.984c-1.4.463-2.836.91-4.3 1.345c-3.24-10.257-7.612-21.163-12.963-32.432c5.106-11 9.31-21.767 12.459-31.957c2.619.758 5.16 1.557 7.61 2.4c23.69 8.156 38.14 20.213 38.14 29.504c0 9.896-15.606 22.743-40.946 31.14Zm-10.514 20.834c2.562 12.94 2.927 24.64 1.23 33.787c-1.524 8.219-4.59 13.698-8.382 15.893c-8.067 4.67-25.32-1.4-43.927-17.412a156.726 156.726 0 0 1-6.437-5.87c7.214-7.889 14.423-17.06 21.459-27.246c12.376-1.098 24.068-2.894 34.671-5.345a134.17 134.17 0 0 1 1.386 6.193ZM87.276 214.515c-7.882 2.783-14.16 2.863-17.955.675c-8.075-4.657-11.432-22.636-6.853-46.752a156.923 156.923 0 0 1 1.869-8.499c10.486 2.32 22.093 3.988 34.498 4.994c7.084 9.967 14.501 19.128 21.976 27.15a134.668 134.668 0 0 1-4.877 4.492c-9.933 8.682-19.886 14.842-28.658 17.94ZM50.35 144.747c-12.483-4.267-22.792-9.812-29.858-15.863c-6.35-5.437-9.555-10.836-9.555-15.216c0-9.322 13.897-21.212 37.076-29.293c2.813-.98 5.757-1.905 8.812-2.773c3.204 10.42 7.406 21.315 12.477 32.332c-5.137 11.18-9.399 22.249-12.634 32.792a134.718 134.718 0 0 1-6.318-1.979Zm12.378-84.26c-4.811-24.587-1.616-43.134 6.425-47.789c8.564-4.958 27.502 2.111 47.463 19.835a144.318 144.318 0 0 1 3.841 3.545c-7.438 7.987-14.787 17.08-21.808 26.988c-12.04 1.116-23.565 2.908-34.161 5.309a160.342 160.342 0 0 1-1.76-7.887Zm110.427 27.268a347.8 347.8 0 0 0-7.785-12.803c8.168 1.033 15.994 2.404 23.343 4.08c-2.206 7.072-4.956 14.465-8.193 22.045a381.151 381.151 0 0 0-7.365-13.322Zm-45.032-43.861c5.044 5.465 10.096 11.566 15.065 18.186a322.04 322.04 0 0 0-30.257-.006c4.974-6.559 10.069-12.652 15.192-18.18ZM82.802 87.83a323.167 323.167 0 0 0-7.227 13.238c-3.184-7.553-5.909-14.98-8.134-22.152c7.304-1.634 15.093-2.97 23.209-3.984a321.524 321.524 0 0 0-7.848 12.897Zm8.081 65.352c-8.385-.936-16.291-2.203-23.593-3.793c2.26-7.3 5.045-14.885 8.298-22.6a321.187 321.187 0 0 0 7.257 13.246c2.594 4.48 5.28 8.868 8.038 13.147Zm37.542 31.03c-5.184-5.592-10.354-11.779-15.403-18.433c4.902.192 9.899.29 14.978.29c5.218 0 10.376-.117 15.453-.343c-4.985 6.774-10.018 12.97-15.028 18.486Zm52.198-57.817c3.422 7.8 6.306 15.345 8.596 22.52c-7.422 1.694-15.436 3.058-23.88 4.071a382.417 382.417 0 0 0 7.859-13.026a347.403 347.403 0 0 0 7.425-13.565Zm-16.898 8.101a358.557 358.557 0 0 1-12.281 19.815a329.4 329.4 0 0 1-23.444.823c-7.967 0-15.716-.248-23.178-.732a310.202 310.202 0 0 1-12.513-19.846h.001a307.41 307.41 0 0 1-10.923-20.627a310.278 310.278 0 0 1 10.89-20.637l-.001.001a307.318 307.318 0 0 1 12.413-19.761c7.613-.576 15.42-.876 23.31-.876H128c7.926 0 15.743.303 23.354.883a329.357 329.357 0 0 1 12.335 19.695a358.489 358.489 0 0 1 11.036 20.54a329.472 329.472 0 0 1-11 20.722Zm22.56-122.124c8.572 4.944 11.906 24.881 6.52 51.026c-.344 1.668-.73 3.367-1.15 5.09c-10.622-2.452-22.155-4.275-34.23-5.408c-7.034-10.017-14.323-19.124-21.64-27.008a160.789 160.789 0 0 1 5.888-5.4c18.9-16.447 36.564-22.941 44.612-18.3ZM128 90.808c12.625 0 22.86 10.235 22.86 22.86s-10.235 22.86-22.86 22.86s-22.86-10.235-22.86-22.86s10.235-22.86 22.86-22.86Z"></path></svg>

==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\components\Auth\Login.jsx
==============================

import { cn } from '@/lib/utils';
import { Button } from '@/components/ui/button';
import {
  Card,
  CardContent,
  CardDescription,
  CardHeader,
  CardTitle,
} from '@/components/ui/card';
import { Input } from '@/components/ui/input';
import { Label } from '@/components/ui/label';
import { useEffect, useState } from 'react';
import { Link, useNavigate } from 'react-router-dom';
import { useSignin } from '@/hooks/apis/auth/useSignin';
import { FaCheck } from 'react-icons/fa';
import { LucideLoader2 } from 'lucide-react';
import { toast } from 'sonner';
import axios from '@/config/axiosConfig';
import { useDispatch } from 'react-redux';
import { loginSuccess } from '@/features/auth/authSlice';


export function Login({ className, ...props }) {

  const [loginData, setLoginData] = useState({
    email: '',
    password: '',
  });

  const navigate = useNavigate();

  const { isPending, isSuccess, error, signinMutation } = useSignin();


  const handleEmailChange = (e) => setLoginData({...loginData, email: e.target.value});
  const handlePasswordChange = (e) => setLoginData({...loginData, password: e.target.value});

  const backendUrl =
    import.meta.env.VITE_BACKEND_API_URL;

    const dispatch = useDispatch();


  const handleSubmit = async (e) => {
    e.preventDefault();
    // Handle login logic here
    await signinMutation({
      email: loginData.email,
      password: loginData.password,
    });
  };

    useEffect(() => {
      if (isSuccess) {
        setTimeout(() => {
          navigate('/problem-set');
        }, 2000);
      }
    }, [isSuccess, navigate]);


    const handleGoogleSignin = () => {
      window.location.href = `${
        import.meta.env.VITE_BACKEND_API_URL
      }/auth/google`;
    };

  // console.log("loginData", loginData);

  return (
    <div className={cn('flex flex-col gap-6', className)} {...props}>
      <Card className='bg-premium-darker border border-premium-blue/20 text-white shadow-lg premium-border-gradient'>
        <CardHeader className='border-b border-premium-blue/20'>
          <CardTitle className='premium-text-gradient text-2xl'>
            Login to your account
          </CardTitle>
          <CardDescription className='text-gray-400'>
            Enter your email below to login to your account
          </CardDescription>
        </CardHeader>
        {isSuccess && (
          <div className='bg-primary/15 p-3 rounded-md flex items-center gap-x-2 text-sm text-primary mb-5'>
            <FaCheck className='size-8 fill-green-500' />
            <p className='text-sm text-white'>
              Successfully signed in. You will be redirected to the problem page
              in a few seconds.
              <LucideLoader2 className='animate-spin ml-2' />
            </p>
          </div>
        )}
        <CardContent className=''>
          <form onSubmit={handleSubmit}>
            <div className='flex flex-col gap-6'>
              <div className='grid gap-3'>
                <Label htmlFor='email' className='text-gray-200'>
                  Email
                </Label>
                <Input
                  id='email'
                  type='email'
                  placeholder='m@example.com'
                  required
                  value={loginData.email}
                  onChange={handleEmailChange}
                  className='bg-premium-dark border-premium-blue/40 text-white placeholder:text-gray-500 focus:border-premium-cyan focus:ring-premium-cyan/20'
                />
              </div>
              <div className='grid gap-3'>
                <div className='flex items-center'>
                  <Label htmlFor='password' className='text-gray-200'>
                    Password
                  </Label>
                  <a
                    href='/forgot-password'
                    className='ml-auto inline-block text-sm text-premium-cyan hover:text-premium-highlight underline-offset-4 hover:underline'
                  >
                    Forgot your password?
                  </a>
                </div>
                <Input
                  id='password'
                  type='password'
                  required
                  value={loginData.password}
                  onChange={handlePasswordChange}
                  className='bg-premium-dark border-premium-blue/40 text-white focus:border-premium-cyan focus:ring-premium-cyan/20'
                />
              </div>
              <div className='flex flex-col gap-3'>
                <Button
                  type='submit'
                  className='w-full bg-premium-purple hover:bg-premium-highlight text-white transition-colors'
                >
                  Login
                </Button>
                <Button
                  type='button'
                  variant='outline'
                  className='w-full border-premium-blue/50 bg-premium-darker text-white hover:bg-premium-blue/20 hover:text-premium-cyan transition-colors'
                  onClick={handleGoogleSignin}
                >
                  Login with Google
                </Button>
              </div>
            </div>
            <div className='mt-6 text-center text-sm text-gray-400'>
              Don't have an account?{' '}
              <Link
                to='/signup'
                className='text-premium-cyan hover:text-premium-highlight underline underline-offset-4'
              >
                Sign up
              </Link>
            </div>
          </form>
        </CardContent>
      </Card>
    </div>
  );
}


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\components\Auth\Signup.jsx
==============================

import { useForm } from 'react-hook-form';
import { zodResolver } from '@hookform/resolvers/zod';
import { signupSchema } from '@/lib/validations/signupSchema';
import { z } from 'zod';

import { cn } from '@/lib/utils';
import { Button } from '@/components/ui/button';
import {
  Card,
  CardContent,
  CardDescription,
  CardHeader,
  CardTitle,
  CardFooter,
} from '@/components/ui/card';
import { Input } from '@/components/ui/input';
import { Label } from '@/components/ui/label';

import { useSignup } from '@/hooks/apis/auth/useSignup';
import { Link, useNavigate } from 'react-router-dom';
import { useFormState } from 'react-dom';
import { useEffect } from 'react';
import { LucideLoader2, TriangleAlert } from 'lucide-react';
import { FaCheck } from 'react-icons/fa';
import { toast } from 'sonner';
import { useDispatch } from 'react-redux';
import { loginSuccess } from '@/features/auth/authSlice';
import axios from '@/config/axiosConfig';

export function Signup({ className, ...props }) {
  const {
    register,
    handleSubmit,
    formState: { errors },
  } = useForm({
    resolver: zodResolver(signupSchema),
  });

  const navigate = useNavigate();

  const dispatch = useDispatch();

  const backendUrl = import.meta.env.VITE_BACKEND_API_URL;

  const { isPending, isSuccess, error, signupMutation } = useSignup();

  const onSubmit = async (data) => {
    await signupMutation({
      name: data.fullName,
      email: data.email,
      password: data.password,
    });
  };

  useEffect(() => {
    if (isSuccess) {
      setTimeout(() => {
        navigate('/problem-set');
      }, 2000);
    }
  }, [isSuccess, navigate]);
  

  const handleGoogleSignup = () => {
    // Redirect the user to the backend route that starts Google OAuth flow
    window.location.href = `${import.meta.env.VITE_BACKEND_API_URL}/auth/google`;
  };

  console.log('window.location.origin:', window.location.origin);
  return (
    <div className={cn('flex flex-col gap-2', className)} {...props}>
      <Card className='bg-premium-darker border border-premium-blue/20 text-white shadow-lg premium-border-gradient'>
        <CardHeader className='border-b border-premium-blue/20'>
          <CardTitle className='premium-text-gradient text-2xl'>
            Create your account
          </CardTitle>
        </CardHeader>
        {isSuccess && (
          <div className='bg-primary/15 p-3 rounded-md flex items-center gap-x-2 text-sm text-primary mb-5'>
            <FaCheck className='size-8 fill-green-500' />
            <p className='text-sm text-white'>
              Successfully signed in. You will be redirected to the problem page
              in a few seconds.
              <LucideLoader2 className='animate-spin ml-2' />
            </p>
          </div>
        )}
        <form onSubmit={handleSubmit(onSubmit)}>
          <CardContent>
            <div className='flex flex-col gap-3'>
              <div className='grid gap-1.5'>
                <Label htmlFor='fullName' className='text-gray-200'>
                  Full Name
                </Label>
                <Input
                  id='fullName'
                  {...register('fullName')}
                  placeholder='John Doe'
                  className='bg-premium-dark border-premium-blue/40 text-white placeholder:text-gray-500'
                />
                {errors.fullName && (
                  <p className='text-sm text-red-500'>
                    {errors.fullName.message}
                  </p>
                )}
              </div>

              <div className='grid gap-1.5'>
                <Label htmlFor='email' className='text-gray-200'>
                  Email
                </Label>
                <Input
                  id='email'
                  type='email'
                  {...register('email')}
                  placeholder='john@example.com'
                  className='bg-premium-dark border-premium-blue/40 text-white placeholder:text-gray-500'
                />
                {errors.email && (
                  <p className='text-sm text-red-500'>{errors.email.message}</p>
                )}
              </div>

              <div className='grid gap-1.5'>
                <Label htmlFor='password' className='text-gray-200'>
                  Password
                </Label>
                <Input
                  id='password'
                  type='password'
                  {...register('password')}
                  className='bg-premium-dark border-premium-blue/40 text-white'
                />
                {errors.password && (
                  <p className='text-sm text-red-500'>
                    {errors.password.message}
                  </p>
                )}
              </div>

              <div className='grid gap-1.5'>
                <Label htmlFor='confirmPassword' className='text-gray-200'>
                  Confirm Password
                </Label>
                <Input
                  id='confirmPassword'
                  type='password'
                  {...register('confirmPassword')}
                  className='bg-premium-dark border-premium-blue/40 text-white'
                />
                {errors.confirmPassword && (
                  <p className='text-sm text-red-500'>
                    {errors.confirmPassword.message}
                  </p>
                )}
              </div>
            </div>
          </CardContent>

          <CardFooter className='flex flex-col gap-4 pt-2'>
            <Button
              type='submit'
              className='w-full bg-premium-purple hover:bg-premium-highlight text-white transition-colors'
            >
              Create Account
            </Button>
            <Button
              type='button'
              variant='outline'
              className='w-full border-premium-blue/50 bg-premium-darker text-white hover:bg-premium-blue/20 hover:text-premium-cyan'
              onClick={handleGoogleSignup}
            >
              Sign up with Google
            </Button>
            <div className='mt-2 text-center text-sm text-gray-400'>
              Already have an account?{' '}
              <Link
                to='/login'
                className='text-premium-cyan hover:text-premium-highlight underline underline-offset-4'
              >
                Log in
              </Link>
            </div>
          </CardFooter>
        </form>
      </Card>
    </div>
  );
}


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\components\Discussion\CodeEditor.jsx
==============================


import { useState } from "react"
import { Button } from "@/components/ui/button"
import { Textarea } from "@/components/ui/textarea"
import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from "@/components/ui/select"
import { Badge } from "@/components/ui/badge"
import { Tabs, TabsContent, TabsList, TabsTrigger } from "@/components/ui/tabs"
import { Copy, Play, Download, Eye, Code2 } from "lucide-react"


const languageTemplates = {
  javascript: `// JavaScript Solution
function twoSum(nums, target) {
    const map = new Map();
    
    for (let i = 0; i < nums.length; i++) {
        const complement = target - nums[i];
        
        if (map.has(complement)) {
            return [map.get(complement), i];
        }
        
        map.set(nums[i], i);
    }
    
    return [];
}

// Test case
console.log(twoSum([2, 7, 11, 15], 9)); // [0, 1]`,

  python: `# Python Solution
def two_sum(nums, target):
    """
    Find two numbers that add up to target
    Time: O(n), Space: O(n)
    """
    seen = {}
    
    for i, num in enumerate(nums):
        complement = target - num
        
        if complement in seen:
            return [seen[complement], i]
        
        seen[num] = i
    
    return []

# Test case
print(two_sum([2, 7, 11, 15], 9))  # [0, 1]`,

  java: `// Java Solution
import java.util.*;

public class Solution {
    public int[] twoSum(int[] nums, int target) {
        Map<Integer, Integer> map = new HashMap<>();
        
        for (int i = 0; i < nums.length; i++) {
            int complement = target - nums[i];
            
            if (map.containsKey(complement)) {
                return new int[] { map.get(complement), i };
            }
            
            map.put(nums[i], i);
        }
        
        throw new IllegalArgumentException("No solution found");
    }
}`,

  cpp: `// C++ Solution
#include <vector>
#include <unordered_map>
using namespace std;

class Solution {
public:
    vector<int> twoSum(vector<int>& nums, int target) {
        unordered_map<int, int> map;
        
        for (int i = 0; i < nums.size(); i++) {
            int complement = target - nums[i];
            
            if (map.find(complement) != map.end()) {
                return {map[complement], i};
            }
            
            map[nums[i]] = i;
        }
        
        return {};
    }
};`,
}

const programmingLanguages = [
  { value: "javascript", label: "JavaScript", color: "bg-yellow-500" },
  { value: "python", label: "Python", color: "bg-blue-500" },
  { value: "java", label: "Java", color: "bg-red-500" },
  { value: "cpp", label: "C++", color: "bg-purple-500" },
  { value: "c", label: "C", color: "bg-gray-500" },
  { value: "csharp", label: "C#", color: "bg-green-500" },
  { value: "go", label: "Go", color: "bg-cyan-500" },
  { value: "rust", label: "Rust", color: "bg-orange-500" },
  { value: "typescript", label: "TypeScript", color: "bg-blue-600" },
  { value: "php", label: "PHP", color: "bg-indigo-500" },
  { value: "ruby", label: "Ruby", color: "bg-red-600" },
  { value: "swift", label: "Swift", color: "bg-orange-600" },
  { value: "kotlin", label: "Kotlin", color: "bg-purple-600" },
  { value: "sql", label: "SQL", color: "bg-teal-500" },
]

export function CodeEditor({ value, onChange, language, onLanguageChange }) {
  const [activeTab, setActiveTab] = useState("editor")

  const handleLanguageChange = (newLanguage) => {
    onLanguageChange(newLanguage)

    // If editor is empty or user confirms, insert template
    if (!value.trim() && languageTemplates[newLanguage]) {
        onChange(languageTemplates[newLanguage]);
      }
      
  }

  const copyToClipboard = () => {
    navigator.clipboard.writeText(value)
  }

  const downloadCode = () => {
    const extensions = {
      javascript: "js",
      python: "py",
      java: "java",
      cpp: "cpp",
      c: "c",
      csharp: "cs",
      go: "go",
      rust: "rs",
      typescript: "ts",
      php: "php",
      ruby: "rb",
      swift: "swift",
      kotlin: "kt",
      sql: "sql",
    }

    const extension = extensions[language] || "txt"
    const blob = new Blob([value], { type: "text/plain" })
    const url = URL.createObjectURL(blob)
    const a = document.createElement("a")
    a.href = url
    a.download = `solution.${extension}`
    a.click()
    URL.revokeObjectURL(url)
  }

  const formatCode = (code) => {
    if (!code) return ""

    // Simple syntax highlighting for preview
    return code
      .replace(/(\/\/.*$|#.*$)/gm, '<span class="text-green-600">$1</span>')
      .replace(
        /(function|def|class|public|private|protected|const|let|var|if|else|for|while|return|import|from|try|catch)/g,
        '<span class="text-blue-600 font-semibold">$1</span>',
      )
      .replace(/(".*?"|'.*?'|`.*?`)/g, '<span class="text-green-500">$1</span>')
      .replace(/(\d+)/g, '<span class="text-orange-500">$1</span>')
      .replace(/\n/g, "<br>")
  }

  const selectedLanguageInfo = programmingLanguages.find((lang) => lang.value === language)

  return (
    <div className="space-y-4">
      <Tabs value={activeTab} onValueChange={setActiveTab} className="w-full">
        <div className="flex items-center justify-between">
          <TabsList className="grid w-fit grid-cols-2">
            <TabsTrigger value="editor" className="flex items-center gap-2">
              <Code2 className="w-4 h-4" />
              Editor
            </TabsTrigger>
            <TabsTrigger value="preview" className="flex items-center gap-2">
              <Eye className="w-4 h-4" />
              Preview
            </TabsTrigger>
          </TabsList>

          <div className="flex items-center gap-2">
            <Badge variant="outline" className="flex items-center gap-1">
              <div className={`w-2 h-2 rounded-full ${selectedLanguageInfo?.color || "bg-gray-500"}`} />
              {selectedLanguageInfo?.label || language}
            </Badge>
            <Button variant="outline" size="sm" onClick={copyToClipboard}>
              <Copy className="w-4 h-4" />
            </Button>
            <Button variant="outline" size="sm" onClick={downloadCode}>
              <Download className="w-4 h-4" />
            </Button>
          </div>
        </div>

        <TabsContent value="editor" className="space-y-3">
          {/* Language Selector and Actions */}
          <div className="flex items-center gap-2 p-2 border rounded-md bg-muted/50">
            <Select value={language} onValueChange={handleLanguageChange}>
              <SelectTrigger className="w-40">
                <SelectValue />
              </SelectTrigger>
              <SelectContent>
                {programmingLanguages.map((lang) => (
                  <SelectItem key={lang.value} value={lang.value}>
                    <div className="flex items-center gap-2">
                      <div className={`w-2 h-2 rounded-full ${lang.color}`} />
                      {lang.label}
                    </div>
                  </SelectItem>
                ))}
              </SelectContent>
            </Select>

            <div className="flex-1" />

            <Button variant="ghost" size="sm" className="h-8">
              <Play className="w-4 h-4 mr-1" />
              Run
            </Button>
          </div>

          {/* Code Editor */}
          <div className="relative">
            <Textarea
              value={value}
              onChange={(e) => onChange(e.target.value)}
              placeholder={`Write your ${selectedLanguageInfo?.label || language} code here...`}
              rows={16}
              className="font-mono text-sm resize-none bg-slate-950 text-slate-100 border-slate-800"
              style={{
                tabSize: 2,
                fontSize: "14px",
                lineHeight: "1.5",
              }}
            />

            {/* Line numbers overlay */}
            <div className="absolute left-2 top-2 text-slate-500 text-sm font-mono pointer-events-none select-none">
              {value.split("\n").map((_, index) => (
                <div key={index} style={{ lineHeight: "1.5", height: "21px" }}>
                  {index + 1}
                </div>
              ))}
            </div>
          </div>

          {/* Code Stats */}
          <div className="flex items-center gap-4 text-xs text-muted-foreground">
            <span>Lines: {value.split("\n").length}</span>
            <span>Characters: {value.length}</span>
            <span>Language: {selectedLanguageInfo?.label || language}</span>
          </div>
        </TabsContent>

        <TabsContent value="preview" className="space-y-3">
          <div className="min-h-[400px] p-4 border rounded-md bg-slate-950 text-slate-100 overflow-x-auto">
            {value ? (
              <pre className="font-mono text-sm">
                <code dangerouslySetInnerHTML={{ __html: formatCode(value) }} />
              </pre>
            ) : (
              <p className="text-slate-400 italic">No code to preview. Switch to Editor tab to write code.</p>
            )}
          </div>
        </TabsContent>
      </Tabs>

      {/* Quick Templates */}
      {!value.trim() && (
        <div className="p-3 border rounded-md bg-muted/50">
          <p className="text-sm font-medium mb-2">Quick Start Templates:</p>
          <div className="flex flex-wrap gap-2">
            {Object.keys(languageTemplates).map((lang) => (
              <Button
                key={lang}
                variant="outline"
                size="sm"
                onClick={() => {
                  onLanguageChange(lang)
                  onChange(languageTemplates[lang])
                }}
              >
                {programmingLanguages.find((l) => l.value === lang)?.label || lang}
              </Button>
            ))}
          </div>
        </div>
      )}
    </div>
  )
}


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\components\Discussion\CommentEditor.jsx
==============================


import { useRef } from "react"
import { Button } from "@/components/ui/button"
import { Textarea } from "@/components/ui/textarea"
import { Avatar, AvatarFallback, AvatarImage } from "@/components/ui/avatar"
import { Bold, Italic, Code, Link, List, Quote } from "lucide-react"


export function CommentEditor({
  value,
  onChange,
  onSubmit,
  onCancel,
  placeholder = "Write a comment...",
  submitText = "Comment",
  isSubmitting = false,
  showCancel = false,
  compact = false,
}) {
    const textareaRef = useRef(null);


  const insertText = (before, after = "", placeholder = "") => {
    const textarea = textareaRef.current
    if (!textarea) return

    const start = textarea.selectionStart
    const end = textarea.selectionEnd
    const selectedText = value.substring(start, end)
    const textToInsert = selectedText || placeholder

    const newValue = value.substring(0, start) + before + textToInsert + after + value.substring(end)
    onChange(newValue)

    setTimeout(() => {
      textarea.focus()
      const newCursorPos = start + before.length + textToInsert.length
      textarea.setSelectionRange(newCursorPos, newCursorPos)
    }, 10)
  }

  const handleKeyDown = (e) => {
    if (e.key === "Enter" && (e.metaKey || e.ctrlKey)) {
      e.preventDefault()
      onSubmit()
    }
  }

  return (
    <div className="space-y-3">
      <div className="flex items-start gap-3">
        <Avatar className="w-8 h-8">
          <AvatarImage src="/placeholder.svg?height=32&width=32" />
          <AvatarFallback>U</AvatarFallback>
        </Avatar>

        <div className="flex-1 space-y-2">
          {!compact && (
            <div className="flex gap-1 p-1 border rounded-md bg-muted/50">
              <Button
                type="button"
                variant="ghost"
                size="sm"
                className="h-7 w-7 p-0"
                onClick={() => insertText("**", "**", "bold")}
                title="Bold"
              >
                <Bold className="w-3 h-3" />
              </Button>
              <Button
                type="button"
                variant="ghost"
                size="sm"
                className="h-7 w-7 p-0"
                onClick={() => insertText("*", "*", "italic")}
                title="Italic"
              >
                <Italic className="w-3 h-3" />
              </Button>
              <Button
                type="button"
                variant="ghost"
                size="sm"
                className="h-7 w-7 p-0"
                onClick={() => insertText("`", "`", "code")}
                title="Code"
              >
                <Code className="w-3 h-3" />
              </Button>
              <Button
                type="button"
                variant="ghost"
                size="sm"
                className="h-7 w-7 p-0"
                onClick={() => insertText("> ", "", "quote")}
                title="Quote"
              >
                <Quote className="w-3 h-3" />
              </Button>
              <Button
                type="button"
                variant="ghost"
                size="sm"
                className="h-7 w-7 p-0"
                onClick={() => insertText("* ", "", "list item")}
                title="List"
              >
                <List className="w-3 h-3" />
              </Button>
              <Button
                type="button"
                variant="ghost"
                size="sm"
                className="h-7 w-7 p-0"
                onClick={() => {
                  const url = prompt("Enter URL:")
                  if (url) insertText("[", `](${url})`, "link text")
                }}
                title="Link"
              >
                <Link className="w-3 h-3" />
              </Button>
            </div>
          )}

          <Textarea
            ref={textareaRef}
            value={value}
            onChange={(e) => onChange(e.target.value)}
            placeholder={placeholder}
            rows={compact ? 3 : 4}
            className="resize-none text-sm"
            onKeyDown={handleKeyDown}
          />

          <div className="flex items-center justify-between">
            <p className="text-xs text-muted-foreground">
              {compact ? "Ctrl+Enter to submit" : "Markdown supported • Ctrl+Enter to submit"}
            </p>
            <div className="flex gap-2">
              {showCancel && (
                <Button variant="outline" size="sm" onClick={onCancel}>
                  Cancel
                </Button>
              )}
              <Button size="sm" onClick={onSubmit} disabled={!value.trim() || isSubmitting}>
                {isSubmitting ? "Posting..." : submitText}
              </Button>
            </div>
          </div>
        </div>
      </div>
    </div>
  )
}


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\components\Discussion\CommentThread.jsx
==============================


import { useState } from "react"
import { Avatar, AvatarFallback, AvatarImage } from "@/components/ui/avatar"
import { Button } from "@/components/ui/button"
import { Badge } from "@/components/ui/badge"
import { DropdownMenu, DropdownMenuContent, DropdownMenuItem, DropdownMenuTrigger } from "@/components/ui/dropdown-menu"
import { ChevronUp, ChevronDown, Reply, MoreHorizontal, Edit, Trash2, Flag, MessageSquare } from "lucide-react"
import { CommentEditor } from "./CommentEditor"



export function CommentThread({
  comments,
  onVote,
  onReply,
  onEdit,
  onDelete,
  onReport,
  maxDepth = 3,
  currentDepth = 0,
}) {
  const [replyingTo, setReplyingTo] = useState(null)
  const [editingComment, setEditingComment] = useState(null)
  const [replyContent, setReplyContent] = useState("")
  const [editContent, setEditContent] = useState("")
  const [collapsedComments, setCollapsedComments] = useState(new Set());


  const formatTimeAgo = (dateString) => {
    const date = new Date(dateString)
    const now = new Date()
    const diffInMinutes = Math.floor((now.getTime() - date.getTime()) / (1000 * 60))

    if (diffInMinutes < 1) return "just now"
    if (diffInMinutes < 60) return `${diffInMinutes}m ago`
    if (diffInMinutes < 1440) return `${Math.floor(diffInMinutes / 60)}h ago`
    return `${Math.floor(diffInMinutes / 1440)}d ago`
  }

  const formatMarkdown = (text) => {
    return text
      .replace(/\*\*(.*?)\*\*/g, "<strong>$1</strong>")
      .replace(/\*(.*?)\*/g, "<em>$1</em>")
      .replace(/`(.*?)`/g, '<code class="bg-muted px-1 py-0.5 rounded text-xs">$1</code>')
      .replace(/^> (.*$)/gm, '<blockquote class="border-l-2 border-muted pl-2 italic">$1</blockquote>')
      .replace(/^\* (.*$)/gm, "<li>$1</li>")
      .replace(/\[([^\]]+)\]$$([^)]+)$$/g, '<a href="$2" class="text-blue-500 underline">$1</a>')
      .replace(/\n/g, "<br>")
  }

  const handleReply = (parentId) => {
    if (replyContent.trim()) {
      onReply(parentId, replyContent)
      setReplyContent("")
      setReplyingTo(null)
    }
  }

  const handleEdit = (commentId) => {
    if (editContent.trim()) {
      onEdit(commentId, editContent)
      setEditContent("")
      setEditingComment(null)
    }
  }

  const startEdit = (comment) => {
    setEditContent(comment.content)
    setEditingComment(comment.id)
  }

  const toggleCollapse = (commentId) => {
    const newCollapsed = new Set(collapsedComments)
    if (newCollapsed.has(commentId)) {
      newCollapsed.delete(commentId)
    } else {
      newCollapsed.add(commentId)
    }
    setCollapsedComments(newCollapsed)
  }

  const getReplyCount = (comment) => {
    return comment.replies.reduce((count, reply) => count + 1 + getReplyCount(reply), 0)
  }

  return (
    <div className="space-y-4">
      {comments.map((comment) => {
        const isCollapsed = collapsedComments.has(comment.id)
        const replyCount = getReplyCount(comment)
        const indentLevel = Math.min(currentDepth, 4)

        return (
          <div
            key={comment.id}
            className={`${indentLevel > 0 ? `ml-${indentLevel * 4} border-l border-muted pl-4` : ""}`}
          >
            <div className="flex items-start gap-3">
              <Avatar className="w-7 h-7">
                <AvatarImage src={comment.authorAvatar || "/placeholder.svg"} />
                <AvatarFallback>{comment.author[0].toUpperCase()}</AvatarFallback>
              </Avatar>

              <div className="flex-1 min-w-0">
                <div className="flex items-center gap-2 mb-1">
                  <span className="font-medium text-sm">{comment.author}</span>
                  <span className="text-xs text-muted-foreground">{formatTimeAgo(comment.createdAt)}</span>
                  {comment.isEdited && (
                    <Badge variant="outline" className="text-xs">
                      edited
                    </Badge>
                  )}
                  {replyCount > 0 && (
                    <Button
                      variant="ghost"
                      size="sm"
                      className="h-5 px-1 text-xs text-muted-foreground"
                      onClick={() => toggleCollapse(comment.id)}
                    >
                      <MessageSquare className="w-3 h-3 mr-1" />
                      {replyCount} {replyCount === 1 ? "reply" : "replies"}
                      {isCollapsed ? " (hidden)" : ""}
                    </Button>
                  )}
                </div>

                {editingComment === comment.id ? (
                  <div className="mb-3">
                    <CommentEditor
                      value={editContent}
                      onChange={setEditContent}
                      onSubmit={() => handleEdit(comment.id)}
                      onCancel={() => setEditingComment(null)}
                      placeholder="Edit your comment..."
                      submitText="Save"
                      showCancel
                      compact
                    />
                  </div>
                ) : (
                  <div className="prose prose-sm max-w-none mb-2">
                    <div dangerouslySetInnerHTML={{ __html: formatMarkdown(comment.content) }} />
                  </div>
                )}

                <div className="flex items-center gap-1 mb-3">
                  <div className="flex items-center">
                    <Button
                      variant="ghost"
                      size="sm"
                      className={`h-6 w-6 p-0 ${comment.userVote === 1 ? "text-orange-500" : ""}`}
                      onClick={() => onVote(comment.id, "up")}
                    >
                      <ChevronUp className="w-3 h-3" />
                    </Button>
                    <span className="text-xs font-medium min-w-[20px] text-center">
                      {comment.upvotes - comment.downvotes}
                    </span>
                    <Button
                      variant="ghost"
                      size="sm"
                      className={`h-6 w-6 p-0 ${comment.userVote === -1 ? "text-blue-500" : ""}`}
                      onClick={() => onVote(comment.id, "down")}
                    >
                      <ChevronDown className="w-3 h-3" />
                    </Button>
                  </div>

                  {currentDepth < maxDepth && (
                    <Button
                      variant="ghost"
                      size="sm"
                      className="h-6 px-2 text-xs"
                      onClick={() => setReplyingTo(replyingTo === comment.id ? null : comment.id)}
                    >
                      <Reply className="w-3 h-3 mr-1" />
                      Reply
                    </Button>
                  )}

                  <DropdownMenu>
                    <DropdownMenuTrigger asChild>
                      <Button variant="ghost" size="sm" className="h-6 w-6 p-0">
                        <MoreHorizontal className="w-3 h-3" />
                      </Button>
                    </DropdownMenuTrigger>
                    <DropdownMenuContent align="end">
                      <DropdownMenuItem onClick={() => startEdit(comment)}>
                        <Edit className="w-3 h-3 mr-2" />
                        Edit
                      </DropdownMenuItem>
                      <DropdownMenuItem onClick={() => onDelete(comment.id)}>
                        <Trash2 className="w-3 h-3 mr-2" />
                        Delete
                      </DropdownMenuItem>
                      <DropdownMenuItem onClick={() => onReport(comment.id)}>
                        <Flag className="w-3 h-3 mr-2" />
                        Report
                      </DropdownMenuItem>
                    </DropdownMenuContent>
                  </DropdownMenu>
                </div>

                {replyingTo === comment.id && (
                  <div className="mb-3">
                    <CommentEditor
                      value={replyContent}
                      onChange={setReplyContent}
                      onSubmit={() => handleReply(comment.id)}
                      onCancel={() => setReplyingTo(null)}
                      placeholder={`Reply to ${comment.author}...`}
                      submitText="Reply"
                      showCancel
                      compact
                    />
                  </div>
                )}
              </div>
            </div>

            {/* Nested Replies */}
            {!isCollapsed && comment.replies.length > 0 && (
              <div className="mt-3">
                <CommentThread
                  comments={comment.replies}
                  onVote={onVote}
                  onReply={onReply}
                  onEdit={onEdit}
                  onDelete={onDelete}
                  onReport={onReport}
                  maxDepth={maxDepth}
                  currentDepth={currentDepth + 1}
                />
              </div>
            )}
          </div>
        )
      })}
    </div>
  )
}


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\components\Discussion\DeleteConfirmationDialog.jsx
==============================


import { useState } from "react"
import { Button } from "@/components/ui/button"
import { Input } from "@/components/ui/input"
import { Label } from "@/components/ui/label"
import { Checkbox } from "@/components/ui/checkbox"
import {
  Dialog,
  DialogContent,
  DialogDescription,
  DialogFooter,
  DialogHeader,
  DialogTitle,
} from "@/components/ui/dialog"
import { Alert, AlertDescription } from "@/components/ui/alert"
import { Badge } from "@/components/ui/badge"
import { Trash2, AlertTriangle, MessageSquare, Users } from "lucide-react"


export function DeleteConfirmationDialog({
  isOpen,
  onClose,
  onConfirm,
  type,
  title,
  author,
  commentCount = 0,
  replyCount = 0,
  isLoading = false,
  requireConfirmation = false,
  confirmationText = "DELETE",
}) {
  const [confirmText, setConfirmText] = useState("")
  const [acknowledgeWarning, setAcknowledgeWarning] = useState(false)
  const [isDeleting, setIsDeleting] = useState(false)

  const isDiscussion = type === "discussion"
  const hasReplies = replyCount > 0
  const hasComments = commentCount > 0
  const requiresTextConfirmation = requireConfirmation || (isDiscussion && (hasComments || hasReplies))
  const textConfirmationValid = !requiresTextConfirmation || confirmText === confirmationText

  const handleConfirm = async () => {
    if (!textConfirmationValid || (requiresTextConfirmation && !acknowledgeWarning)) {
      return
    }

    setIsDeleting(true)
    try {
      await onConfirm()
      handleClose()
    } catch (error) {
      console.error("Delete failed:", error)
      setIsDeleting(false)
    }
  }

  const handleClose = () => {
    setConfirmText("")
    setAcknowledgeWarning(false)
    setIsDeleting(false)
    onClose()
  }

  const getWarningMessage = () => {
    if (isDiscussion) {
      if (hasComments && hasReplies) {
        return `This discussion has ${commentCount} comments with ${replyCount} replies. All comments and replies will be permanently deleted.`
      } else if (hasComments) {
        return `This discussion has ${commentCount} ${commentCount === 1 ? "comment" : "comments"}. All comments will be permanently deleted.`
      } else if (hasReplies) {
        return `This discussion has ${replyCount} ${replyCount === 1 ? "reply" : "replies"}. All replies will be permanently deleted.`
      }
      return "This discussion will be permanently deleted."
    } else {
      if (hasReplies) {
        return `This comment has ${replyCount} ${replyCount === 1 ? "reply" : "replies"}. All replies will be permanently deleted.`
      }
      return "This comment will be permanently deleted."
    }
  }

  const getImpactBadges = () => {
    const badges = []

    if (isDiscussion && hasComments) {
      badges.push(
        <Badge key="comments" variant="destructive" className="flex items-center gap-1">
          <MessageSquare className="w-3 h-3" />
          {commentCount} {commentCount === 1 ? "comment" : "comments"}
        </Badge>,
      )
    }

    if (hasReplies) {
      badges.push(
        <Badge key="replies" variant="destructive" className="flex items-center gap-1">
          <Users className="w-3 h-3" />
          {replyCount} {replyCount === 1 ? "reply" : "replies"}
        </Badge>,
      )
    }

    return badges
  }

  return (
    <Dialog open={isOpen} onOpenChange={handleClose}>
      <DialogContent className="sm:max-w-md">
        <DialogHeader>
          <DialogTitle className="flex items-center gap-2 text-destructive">
            <Trash2 className="w-5 h-5" />
            Delete {isDiscussion ? "Discussion" : "Comment"}
          </DialogTitle>
          <DialogDescription>
            This action cannot be undone. Please confirm you want to delete this {type}.
          </DialogDescription>
        </DialogHeader>

        <div className="space-y-4">
          {/* Content Preview */}
          {title && (
            <div className="p-3 bg-muted rounded-md">
              <div className="text-sm font-medium text-muted-foreground mb-1">
                {isDiscussion ? "Discussion Title" : "Comment"}
              </div>
              <div className="text-sm line-clamp-2">{title}</div>
              {author && <div className="text-xs text-muted-foreground mt-1">by {author}</div>}
            </div>
          )}

          {/* Impact Warning */}
          <Alert variant="destructive">
            <AlertTriangle className="h-4 w-4" />
            <AlertDescription className="space-y-2">
              <div>{getWarningMessage()}</div>
              {getImpactBadges().length > 0 && <div className="flex flex-wrap gap-2 mt-2">{getImpactBadges()}</div>}
            </AlertDescription>
          </Alert>

          {/* Text Confirmation */}
          {requiresTextConfirmation && (
            <div className="space-y-3">
              <div>
                <Label htmlFor="confirm-text" className="text-sm font-medium">
                  Type <code className="bg-muted px-1 py-0.5 rounded text-xs font-mono">{confirmationText}</code> to
                  confirm:
                </Label>
                <Input
                  id="confirm-text"
                  value={confirmText}
                  onChange={(e) => setConfirmText(e.target.value)}
                  placeholder={`Type "${confirmationText}" here`}
                  className="mt-1"
                  autoComplete="off"
                />
              </div>

              <div className="flex items-center space-x-2">
                <Checkbox id="acknowledge" checked={acknowledgeWarning} onCheckedChange={setAcknowledgeWarning} />
                <Label htmlFor="acknowledge" className="text-sm">
                  I understand this action is permanent and cannot be undone
                </Label>
              </div>
            </div>
          )}

          {/* Simple Confirmation for Comments without replies */}
          {!requiresTextConfirmation && (
            <div className="flex items-center space-x-2">
              <Checkbox id="simple-acknowledge" checked={acknowledgeWarning} onCheckedChange={setAcknowledgeWarning} />
              <Label htmlFor="simple-acknowledge" className="text-sm">
                I confirm I want to delete this {type}
              </Label>
            </div>
          )}
        </div>

        <DialogFooter className="flex gap-2">
          <Button variant="outline" onClick={handleClose} disabled={isDeleting}>
            Cancel
          </Button>
          <Button
            variant="destructive"
            onClick={handleConfirm}
            disabled={!textConfirmationValid || !acknowledgeWarning || isDeleting}
            className="min-w-[100px]"
          >
            {isDeleting ? (
              <div className="flex items-center gap-2">
                <div className="w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin" />
                Deleting...
              </div>
            ) : (
              <>
                <Trash2 className="w-4 h-4 mr-2" />
                Delete
              </>
            )}
          </Button>
        </DialogFooter>
      </DialogContent>
    </Dialog>
  )
}


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\components\Discussion\DiscussionSection.jsx
==============================


import { useState, useMemo } from "react"
import { Avatar, AvatarFallback, AvatarImage } from "@/components/ui/avatar"
import { Button } from "@/components/ui/button"
import { Card, CardContent, CardHeader } from "@/components/ui/card"
import { Badge } from "@/components/ui/badge"
import { Input } from "@/components/ui/input"
import { Label } from "@/components/ui/label"
import { Textarea } from "@/components/ui/textarea"
import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from "@/components/ui/select"
import { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from "@/components/ui/dialog"
import { DropdownMenu, DropdownMenuContent, DropdownMenuItem, DropdownMenuTrigger } from "@/components/ui/dropdown-menu"
import {
  ChevronUp,
  ChevronDown,
  MessageSquare,
  Plus,
  Search,
  Filter,
  MoreHorizontal,
  Edit,
  Trash2,
  Flag,
  Reply,
} from "lucide-react"

// Sample data
const sampleDiscussions = [
  {
    id: 1,
    title: "Optimal O(n) Solution using HashMap",
    content:
      "Here's an efficient approach using a HashMap to solve this in linear time...\n\n```python\ndef twoSum(nums, target):\n    seen = {}\n    for i, num in enumerate(nums):\n        complement = target - num\n        if complement in seen:\n            return [seen[complement], i]\n        seen[num] = i\n```",
    author: "codeMaster",
    authorAvatar: "/placeholder.svg?height=32&width=32",
    createdAt: "2024-01-15T10:30:00Z",
    upvotes: 45,
    downvotes: 2,
    userVote: 1, // 1 for upvote, -1 for downvote, 0 for no vote
    commentCount: 12,
    tags: ["Python", "HashMap", "Optimized"],
    comments: [
      {
        id: 1,
        content: "Great explanation! This is much cleaner than the brute force approach.",
        author: "newbie123",
        authorAvatar: "/placeholder.svg?height=24&width=24",
        createdAt: "2024-01-15T11:00:00Z",
        upvotes: 8,
        downvotes: 0,
        userVote: 0,
        replies: [],
      },
      {
        id: 2,
        content: "Can you explain the time complexity analysis?",
        author: "student_dev",
        authorAvatar: "/placeholder.svg?height=24&width=24",
        createdAt: "2024-01-15T11:15:00Z",
        upvotes: 3,
        downvotes: 0,
        userVote: 0,
        replies: [
          {
            id: 3,
            content:
              "We iterate through the array once (O(n)) and HashMap operations are O(1) on average, so overall it's O(n).",
            author: "codeMaster",
            authorAvatar: "/placeholder.svg?height=24&width=24",
            createdAt: "2024-01-15T11:30:00Z",
            upvotes: 5,
            downvotes: 0,
            userVote: 0,
          },
        ],
      },
    ],
  },
  {
    id: 2,
    title: "Java Solution with Detailed Explanation",
    content:
      'Here\'s my Java implementation with step-by-step breakdown:\n\n```java\npublic int[] twoSum(int[] nums, int target) {\n    Map<Integer, Integer> map = new HashMap<>();\n    for (int i = 0; i < nums.length; i++) {\n        int complement = target - nums[i];\n        if (map.containsKey(complement)) {\n            return new int[] { map.get(complement), i };\n        }\n        map.put(nums[i], i);\n    }\n    throw new IllegalArgumentException("No two sum solution");\n}\n```',
    author: "javaGuru",
    authorAvatar: "/placeholder.svg?height=32&width=32",
    createdAt: "2024-01-14T15:20:00Z",
    upvotes: 32,
    downvotes: 1,
    userVote: 0,
    commentCount: 8,
    tags: ["Java", "HashMap", "Beginner-Friendly"],
    comments: [],
  },
  {
    id: 3,
    title: "Brute Force vs Optimized - Performance Comparison",
    content:
      "I ran both approaches on different input sizes. Here are the results:\n\n**Brute Force O(n²):**\n- 1000 elements: 2.3ms\n- 10000 elements: 180ms\n\n**HashMap O(n):**\n- 1000 elements: 0.8ms\n- 10000 elements: 1.2ms\n\nThe difference is significant for larger inputs!",
    author: "perfAnalyst",
    authorAvatar: "/placeholder.svg?height=32&width=32",
    createdAt: "2024-01-13T09:45:00Z",
    upvotes: 28,
    downvotes: 0,
    userVote: -1,
    commentCount: 15,
    tags: ["Performance", "Analysis", "Comparison"],
    comments: [],
  },
]

const allTags = [
  "Python",
  "Java",
  "JavaScript",
  "C++",
  "HashMap",
  "Array",
  "Optimized",
  "Brute Force",
  "Dynamic Programming",
  "Two Pointers",
  "Beginner-Friendly",
  "Performance",
  "Analysis",
  "Comparison",
]

export default function DiscussionSection() {
  const [discussions, setDiscussions] = useState(sampleDiscussions)
  const [sortBy, setSortBy] = useState("top")
  const [filterTag, setFilterTag] = useState("all")
  const [searchQuery, setSearchQuery] = useState("")
  const [newPostOpen, setNewPostOpen] = useState(false)
  const [expandedComments, setExpandedComments] = useState([])

  // New post form state
  const [newPost, setNewPost] = useState({
    title: "",
    content: "",
    tags: [] as string[],
  })

  const handleVote = (discussionId, voteType) => {
    setDiscussions((prev) =>
      prev.map((discussion) => {
        if (discussion.id === discussionId) {
          const currentVote = discussion.userVote
          let newVote = 0
          let upvotes = discussion.upvotes
          let downvotes = discussion.downvotes

          // Remove previous vote
          if (currentVote === 1) upvotes--
          if (currentVote === -1) downvotes--

          // Apply new vote
          if (voteType === "up" && currentVote !== 1) {
            newVote = 1
            upvotes++
          } else if (voteType === "down" && currentVote !== -1) {
            newVote = -1
            downvotes++
          }

          return { ...discussion, userVote: newVote, upvotes, downvotes }
        }
        return discussion
      }),
    )
  }

  const handleCommentVote = (discussionId, commentId, voteType) => {
    // Similar logic for comment voting
    console.log(`Voting ${voteType} on comment ${commentId} in discussion ${discussionId}`)
  }

  const toggleComments = (discussionId) => {
    setExpandedComments((prev) =>
      prev.includes(discussionId) ? prev.filter((id) => id !== discussionId) : [...prev, discussionId],
    )
  }

  const filteredAndSortedDiscussions = useMemo(() => {
    let filtered = discussions

    // Filter by search query
    if (searchQuery) {
      filtered = filtered.filter(
        (d) =>
          d.title.toLowerCase().includes(searchQuery.toLowerCase()) ||
          d.content.toLowerCase().includes(searchQuery.toLowerCase()),
      )
    }

    // Filter by tag
    if (filterTag !== "all") {
      filtered = filtered.filter((d) => d.tags.includes(filterTag))
    }

    // Sort
    return filtered.sort((a, b) => {
      switch (sortBy) {
        case "top":
          return b.upvotes - b.downvotes - (a.upvotes - a.downvotes)
        case "newest":
          return new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()
        case "oldest":
          return new Date(a.createdAt).getTime() - new Date(b.createdAt).getTime()
        case "discussed":
          return b.commentCount - a.commentCount
        default:
          return 0
      }
    })
  }, [discussions, sortBy, filterTag, searchQuery])

  const handleCreatePost = () => {
    if (!newPost.title.trim() || !newPost.content.trim()) return

    const post = {
      id: Date.now(),
      title: newPost.title,
      content: newPost.content,
      author: "currentUser",
      authorAvatar: "/placeholder.svg?height=32&width=32",
      createdAt: new Date().toISOString(),
      upvotes: 0,
      downvotes: 0,
      userVote: 0,
      commentCount: 0,
      tags: newPost.tags,
      comments: [],
    }

    setDiscussions((prev) => [post, ...prev])
    setNewPost({ title: "", content: "", tags: [] })
    setNewPostOpen(false)
  }

  const formatTimeAgo = (dateString) => {
    const date = new Date(dateString)
    const now = new Date()
    const diffInHours = Math.floor((now.getTime() - date.getTime()) / (1000 * 60 * 60))

    if (diffInHours < 1) return "just now"
    if (diffInHours < 24) return `${diffInHours}h ago`
    return `${Math.floor(diffInHours / 24)}d ago`
  }

  return (
    <div className="max-w-4xl mx-auto p-6 space-y-6">
      {/* Header */}
      <div className="flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between">
        <div>
          <h1 className="text-2xl font-bold">Discussion</h1>
          <p className="text-muted-foreground">Problem: Two Sum</p>
        </div>

        <Dialog open={newPostOpen} onOpenChange={setNewPostOpen}>
          <DialogTrigger asChild>
            <Button>
              <Plus className="w-4 h-4 mr-2" />
              New Post
            </Button>
          </DialogTrigger>
          <DialogContent className="max-w-2xl">
            <DialogHeader>
              <DialogTitle>Create New Discussion Post</DialogTitle>
            </DialogHeader>
            <div className="space-y-4">
              <div>
                <Label htmlFor="title">Title</Label>
                <Input
                  id="title"
                  value={newPost.title}
                  onChange={(e) => setNewPost((prev) => ({ ...prev, title: e.target.value }))}
                  placeholder="Enter a descriptive title..."
                />
              </div>
              <div>
                <Label htmlFor="content">Content</Label>
                <Textarea
                  id="content"
                  value={newPost.content}
                  onChange={(e) => setNewPost((prev) => ({ ...prev, content: e.target.value }))}
                  placeholder="Share your solution, ask a question, or start a discussion... (Markdown supported)"
                  rows={8}
                />
              </div>
              <div>
                <Label>Tags</Label>
                <div className="flex flex-wrap gap-2 mt-2">
                  {allTags.map((tag) => (
                    <Badge
                      key={tag}
                      variant={newPost.tags.includes(tag) ? "default" : "outline"}
                      className="cursor-pointer"
                      onClick={() => {
                        setNewPost((prev) => ({
                          ...prev,
                          tags: prev.tags.includes(tag) ? prev.tags.filter((t) => t !== tag) : [...prev.tags, tag],
                        }))
                      }}
                    >
                      {tag}
                    </Badge>
                  ))}
                </div>
              </div>
              <div className="flex gap-2 justify-end">
                <Button variant="outline" onClick={() => setNewPostOpen(false)}>
                  Cancel
                </Button>
                <Button onClick={handleCreatePost}>Create Post</Button>
              </div>
            </div>
          </DialogContent>
        </Dialog>
      </div>

      {/* Search and Filters */}
      <div className="flex flex-col sm:flex-row gap-4">
        <div className="relative flex-1">
          <Search className="absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4" />
          <Input
            placeholder="Search discussions..."
            value={searchQuery}
            onChange={(e) => setSearchQuery(e.target.value)}
            className="pl-10"
          />
        </div>

        <div className="flex gap-2">
          <Select value={sortBy} onValueChange={setSortBy}>
            <SelectTrigger className="w-[140px]">
              <SelectValue />
            </SelectTrigger>
            <SelectContent>
              <SelectItem value="top">Top</SelectItem>
              <SelectItem value="newest">Newest</SelectItem>
              <SelectItem value="oldest">Oldest</SelectItem>
              <SelectItem value="discussed">Most Discussed</SelectItem>
            </SelectContent>
          </Select>

          <Select value={filterTag} onValueChange={setFilterTag}>
            <SelectTrigger className="w-[120px]">
              <Filter className="w-4 h-4 mr-2" />
              <SelectValue />
            </SelectTrigger>
            <SelectContent>
              <SelectItem value="all">All Tags</SelectItem>
              {allTags.map((tag) => (
                <SelectItem key={tag} value={tag}>
                  {tag}
                </SelectItem>
              ))}
            </SelectContent>
          </Select>
        </div>
      </div>

      {/* Discussion List */}
      <div className="space-y-4">
        {filteredAndSortedDiscussions.map((discussion) => (
          <Card key={discussion.id} className="overflow-hidden">
            <CardHeader className="pb-3">
              <div className="flex items-start gap-3">
                <div className="flex flex-col items-center gap-1 min-w-[60px]">
                  <Button
                    variant="ghost"
                    size="sm"
                    className={`p-1 h-8 w-8 ${discussion.userVote === 1 ? "text-orange-500" : ""}`}
                    onClick={() => handleVote(discussion.id, "up")}
                  >
                    <ChevronUp className="w-4 h-4" />
                  </Button>
                  <span className="text-sm font-medium">{discussion.upvotes - discussion.downvotes}</span>
                  <Button
                    variant="ghost"
                    size="sm"
                    className={`p-1 h-8 w-8 ${discussion.userVote === -1 ? "text-blue-500" : ""}`}
                    onClick={() => handleVote(discussion.id, "down")}
                  >
                    <ChevronDown className="w-4 h-4" />
                  </Button>
                </div>

                <div className="flex-1 min-w-0">
                  <div className="flex items-start justify-between gap-2">
                    <h3 className="font-semibold text-lg leading-tight">{discussion.title}</h3>

                    <DropdownMenu>
                      <DropdownMenuTrigger asChild>
                        <Button variant="ghost" size="sm" className="h-8 w-8 p-0">
                          <MoreHorizontal className="w-4 h-4" />
                        </Button>
                      </DropdownMenuTrigger>
                      <DropdownMenuContent align="end">
                        <DropdownMenuItem>
                          <Edit className="w-4 h-4 mr-2" />
                          Edit
                        </DropdownMenuItem>
                        <DropdownMenuItem>
                          <Trash2 className="w-4 h-4 mr-2" />
                          Delete
                        </DropdownMenuItem>
                        <DropdownMenuItem>
                          <Flag className="w-4 h-4 mr-2" />
                          Report
                        </DropdownMenuItem>
                      </DropdownMenuContent>
                    </DropdownMenu>
                  </div>

                  <div className="flex items-center gap-2 mt-1 text-sm text-muted-foreground">
                    <Avatar className="w-5 h-5">
                      <AvatarImage src={discussion.authorAvatar || "/placeholder.svg"} />
                      <AvatarFallback>{discussion.author[0].toUpperCase()}</AvatarFallback>
                    </Avatar>
                    <span>{discussion.author}</span>
                    <span>•</span>
                    <span>{formatTimeAgo(discussion.createdAt)}</span>
                  </div>

                  <div className="flex flex-wrap gap-1 mt-2">
                    {discussion.tags.map((tag) => (
                      <Badge key={tag} variant="secondary" className="text-xs">
                        {tag}
                      </Badge>
                    ))}
                  </div>
                </div>
              </div>
            </CardHeader>

            <CardContent className="pt-0">
              <div className="ml-[75px]">
                <div className="prose prose-sm max-w-none mb-4">
                  <pre className="bg-muted p-3 rounded-md overflow-x-auto text-sm">
                    <code>{discussion.content}</code>
                  </pre>
                </div>

                <div className="flex items-center gap-4 text-sm text-muted-foreground">
                  <Button variant="ghost" size="sm" className="h-8 px-2" onClick={() => toggleComments(discussion.id)}>
                    <MessageSquare className="w-4 h-4 mr-1" />
                    {discussion.commentCount} comments
                  </Button>
                  <Button variant="ghost" size="sm" className="h-8 px-2">
                    <Reply className="w-4 h-4 mr-1" />
                    Reply
                  </Button>
                </div>

                {/* Comments Section */}
                {expandedComments.includes(discussion.id) && (
                  <div className="mt-4 space-y-3 border-l-2 border-muted pl-4">
                    {discussion.comments.map((comment) => (
                      <div key={comment.id} className="space-y-2">
                        <div className="flex items-start gap-2">
                          <Avatar className="w-6 h-6">
                            <AvatarImage src={comment.authorAvatar || "/placeholder.svg"} />
                            <AvatarFallback>{comment.author[0].toUpperCase()}</AvatarFallback>
                          </Avatar>
                          <div className="flex-1">
                            <div className="flex items-center gap-2 text-sm">
                              <span className="font-medium">{comment.author}</span>
                              <span className="text-muted-foreground">{formatTimeAgo(comment.createdAt)}</span>
                            </div>
                            <p className="text-sm mt-1">{comment.content}</p>
                            <div className="flex items-center gap-2 mt-2">
                              <div className="flex items-center gap-1">
                                <Button variant="ghost" size="sm" className="h-6 px-1">
                                  <ChevronUp className="w-3 h-3" />
                                </Button>
                                <span className="text-xs">{comment.upvotes}</span>
                                <Button variant="ghost" size="sm" className="h-6 px-1">
                                  <ChevronDown className="w-3 h-3" />
                                </Button>
                              </div>
                              <Button variant="ghost" size="sm" className="h-6 px-2 text-xs">
                                Reply
                              </Button>
                            </div>
                          </div>
                        </div>

                        {/* Nested Replies */}
                        {comment.replies && comment.replies.length > 0 && (
                          <div className="ml-8 space-y-2 border-l border-muted pl-3">
                            {comment.replies.map((reply) => (
                              <div key={reply.id} className="flex items-start gap-2">
                                <Avatar className="w-5 h-5">
                                  <AvatarImage src={reply.authorAvatar || "/placeholder.svg"} />
                                  <AvatarFallback>{reply.author[0].toUpperCase()}</AvatarFallback>
                                </Avatar>
                                <div className="flex-1">
                                  <div className="flex items-center gap-2 text-xs">
                                    <span className="font-medium">{reply.author}</span>
                                    <span className="text-muted-foreground">{formatTimeAgo(reply.createdAt)}</span>
                                  </div>
                                  <p className="text-sm mt-1">{reply.content}</p>
                                </div>
                              </div>
                            ))}
                          </div>
                        )}
                      </div>
                    ))}
                  </div>
                )}
              </div>
            </CardContent>
          </Card>
        ))}
      </div>

      {filteredAndSortedDiscussions.length === 0 && (
        <div className="text-center py-12">
          <MessageSquare className="w-12 h-12 mx-auto text-muted-foreground mb-4" />
          <h3 className="text-lg font-medium mb-2">No discussions found</h3>
          <p className="text-muted-foreground mb-4">
            {searchQuery || filterTag !== "all"
              ? "Try adjusting your search or filters"
              : "Be the first to start a discussion!"}
          </p>
          <Button onClick={() => setNewPostOpen(true)}>
            <Plus className="w-4 h-4 mr-2" />
            Create First Post
          </Button>
        </div>
      )}
    </div>
  )
}


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\components\Discussion\DiscussionThread.jsx
==============================


import { useState } from "react"
import { Button } from "@/components/ui/button"
import { MessageSquare, SortAsc } from "lucide-react"
import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from "@/components/ui/select"
import { CommentEditor } from "./CommentEditor"
import { CommentThread } from "./CommentThread"



export function DiscussionComments({
  discussionId,
  comments,
  commentCount,
  onAddComment,
  onVoteComment,
  onReplyToComment,
  onEditComment,
  onDeleteComment,
  onReportComment,
}) {
  const [newComment, setNewComment] = useState("")
  const [isSubmitting, setIsSubmitting] = useState(false)
  const [sortBy, setSortBy] = useState("best")
  const [showCommentEditor, setShowCommentEditor] = useState(false)

  const handleSubmitComment = async () => {
    if (!newComment.trim()) return

    setIsSubmitting(true)
    try {
      await onAddComment(newComment)
      setNewComment("")
      setShowCommentEditor(false)
    } finally {
      setIsSubmitting(false)
    }
  }

  const sortedComments = [...comments].sort((a, b) => {
    switch (sortBy) {
      case "best":
        return b.upvotes - b.downvotes - (a.upvotes - a.downvotes)
      case "newest":
        return new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()
      case "oldest":
        return new Date(a.createdAt).getTime() - new Date(b.createdAt).getTime()
      default:
        return 0
    }
  })




  return (
    <div className="space-y-6">
      {/* Comments Header */}
      <div className="flex items-center justify-between">
        <div className="flex items-center gap-2">
          <MessageSquare className="w-5 h-5" />
          <h3 className="text-lg font-semibold">
            {commentCount} {commentCount === 1 ? "Comment" : "Comments"}
          </h3>
        </div>

        <div className="flex items-center gap-2">
          <Select value={sortBy} onValueChange={setSortBy}>
            <SelectTrigger className="w-32">
              <SortAsc className="w-4 h-4 mr-2" />
              <SelectValue />
            </SelectTrigger>
            <SelectContent>
              <SelectItem value="best">Best</SelectItem>
              <SelectItem value="newest">Newest</SelectItem>
              <SelectItem value="oldest">Oldest</SelectItem>
            </SelectContent>
          </Select>
        </div>
      </div>

      {/* Add Comment */}
      <div className="space-y-3">
        {!showCommentEditor ? (
          <Button
            variant="outline"
            className="w-full justify-start text-muted-foreground"
            onClick={() => {setShowCommentEditor(true)}}
          >
            <MessageSquare className="w-4 h-4 mr-2" />
            Add a comment...
          </Button>
        ) : (
          <CommentEditor
            value={newComment}
            onChange={setNewComment}
            onSubmit={handleSubmitComment}
            onCancel={() => {
              setShowCommentEditor(false)
              setNewComment("")
            }}
            placeholder="What are your thoughts?"
            submitText="Comment"
            isSubmitting={isSubmitting}
            showCancel
          />
        )}
      </div>

      {/* Comments List */}
      {sortedComments.length > 0 ? (
        <CommentThread
          comments={sortedComments}
          onVote={onVoteComment}
          onReply={onReplyToComment}
          onEdit={onEditComment}
          onDelete={onDeleteComment}
          onReport={onReportComment}
        />
      ) : (
        <div className="text-center py-8">
          <MessageSquare className="w-12 h-12 mx-auto text-muted-foreground mb-4" />
          <h3 className="text-lg font-medium mb-2">No comments yet</h3>
          <p className="text-muted-foreground mb-4">Be the first to share your thoughts!</p>
          <Button onClick={() => setShowCommentEditor(true)}>
            <MessageSquare className="w-4 h-4 mr-2" />
            Add Comment
          </Button>
        </div>
      )}
    </div>
  )
}


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\components\Discussion\EditorTabs.jsx
==============================


import { useState } from "react"
import { Tabs, TabsList, TabsTrigger, TabsContent } from "@/components/ui/tabs"
import { FileText, Code2 } from "lucide-react"
import { Label } from "@/components/ui/label"
import { RichTextEditor } from "./RichTextEditor"
import { CodeEditor } from "./CodeEditor"



export function EditorTabs({
  textValue,
  onTextChange,
  codeValue,
  onCodeChange,
  codeLanguage,
  onLanguageChange,
}) {
  const [activeTab, setActiveTab] = useState("text")

  return (
    <Tabs value={activeTab} onValueChange={setActiveTab} className="w-full">
      <TabsList className="grid w-full grid-cols-2">
        <TabsTrigger value="text" className="flex items-center gap-2">
          <FileText className="w-4 h-4" />
          Text Explanation
        </TabsTrigger>
        <TabsTrigger value="code" className="flex items-center gap-2">
          <Code2 className="w-4 h-4" />
          Code Solution
        </TabsTrigger>
      </TabsList>

      <TabsContent value="text" className="space-y-3 pt-4">
        <Label className="text-sm text-muted-foreground">Explanation</Label>
        <RichTextEditor
          value={textValue}
          onChange={onTextChange}
          placeholder="Explain your approach, complexity analysis, or provide context for your code..."
        />
      </TabsContent>

      <TabsContent value="code" className="space-y-3 pt-4">
        <Label className="text-sm text-muted-foreground">Code</Label>
        <CodeEditor
          value={codeValue}
          onChange={onCodeChange}
          language={codeLanguage}
          onLanguageChange={onLanguageChange}
        />
      </TabsContent>
    </Tabs>
  )
}


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\components\Discussion\GlobalDiscussion.jsx
==============================

import { useState, useMemo, useEffect } from 'react';
import { Avatar, AvatarFallback, AvatarImage } from '@/components/ui/avatar';
import { Button } from '@/components/ui/button';
import { Card, CardContent, CardHeader } from '@/components/ui/card';
import { Badge } from '@/components/ui/badge';
import { Input } from '@/components/ui/input';
import { Label } from '@/components/ui/label';
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from '@/components/ui/select';
import {
  Dialog,
  DialogContent,
  DialogHeader,
  DialogTitle,
  DialogTrigger,
} from '@/components/ui/dialog';
import {
  DropdownMenu,
  DropdownMenuContent,
  DropdownMenuItem,
  DropdownMenuTrigger,
} from '@/components/ui/dropdown-menu';
import { Tabs, TabsList, TabsTrigger } from '@/components/ui/tabs';

import {
  ChevronUp,
  ChevronDown,
  MessageSquare,
  Plus,
  Search,
  Filter,
  MoreHorizontal,
  Edit,
  Trash2,
  Flag,
  Reply,
  ExternalLink,
  Briefcase,
  Code,
  Users,
  TrendingUp,
  Clock,
  Star,
  FileText,
  Code2,
} from 'lucide-react';
import { DiscussionComments } from './DiscussionThread';
import { RichTextEditor } from './RichTextEditor';
import { useGetAllDiscussions } from '@/hooks/apis/discussions/useGetAllDiscussions';
import { SkeletonCard } from '@/Pages/SkeletonPage/SkeletonCard';
import { useCreateDiscussion } from '@/hooks/apis/discussions/useCreateDiscussions';
import { EditorTabs } from './EditorTabs';
import { toast } from 'sonner';
import { DeleteConfirmationDialog } from './DeleteConfirmationDialog';
import { useDeleteDiscussion } from '@/hooks/apis/discussions/useDeleteDiscussion';
import { AlertDialog, AlertDialogAction, AlertDialogCancel, AlertDialogContent, AlertDialogDescription, AlertDialogFooter, AlertDialogHeader, AlertDialogTitle } from '../ui/alert-dialog';
import { useSelector } from 'react-redux';
import { useGetAllComments } from '@/hooks/apis/discussions/useGetAllComments';

// Discussion categories
const categories = [
  {
    id: 'problem',
    label: 'Problem Discussion',
    icon: Code,
    color: 'bg-blue-500',
  },
  {
    id: 'interview',
    label: 'Interview Experience',
    icon: Briefcase,
    color: 'bg-green-500',
  },
  {
    id: 'career',
    label: 'Career Advice',
    icon: TrendingUp,
    color: 'bg-purple-500',
  },
  {
    id: 'general',
    label: 'General Discussion',
    icon: Users,
    color: 'bg-orange-500',
  },
];

// Sample problems for reference
const sampleProblems = [
  { id: 1, title: 'Two Sum', difficulty: 'Easy' },
  { id: 2, title: 'Add Two Numbers', difficulty: 'Medium' },
  {
    id: 3,
    title: 'Longest Substring Without Repeating Characters',
    difficulty: 'Medium',
  },
  { id: 4, title: 'Median of Two Sorted Arrays', difficulty: 'Hard' },
  { id: 5, title: 'Longest Palindromic Substring', difficulty: 'Medium' },
  { id: 6, title: 'Regular Expression Matching', difficulty: 'Hard' },
];

// Sample comments
const sampleComments = [
  {
    id: 1,
    content:
      'Great explanation! This is much cleaner than the brute force approach. I especially like how you explained the time complexity trade-offs.',
    author: 'newbie123',
    authorAvatar: '/placeholder.svg?height=24&width=24',
    createdAt: '2024-01-15T11:00:00Z',
    upvotes: 12,
    downvotes: 0,
    userVote: 1,
    replies: [
      {
        id: 2,
        content:
          'Agreed! The HashMap approach is definitely the way to go for this problem.',
        author: 'codingNinja',
        authorAvatar: '/placeholder.svg?height=24&width=24',
        createdAt: '2024-01-15T11:30:00Z',
        upvotes: 5,
        downvotes: 0,
        userVote: 0,
        replies: [],
      },
    ],
  },
  {
    id: 3,
    content:
      "Can you explain the time complexity analysis in more detail? I'm still learning about Big O notation.",
    author: 'student_dev',
    authorAvatar: '/placeholder.svg?height=24&width=24',
    createdAt: '2024-01-15T11:15:00Z',
    upvotes: 8,
    downvotes: 0,
    userVote: 0,
    replies: [
      {
        id: 4,
        content:
          "We iterate through the array once (O(n)) and HashMap operations are O(1) on average, so overall it's O(n). The space complexity is also O(n) for the HashMap.",
        author: 'algorithmExpert',
        authorAvatar: '/placeholder.svg?height=24&width=24',
        createdAt: '2024-01-15T11:45:00Z',
        upvotes: 15,
        downvotes: 0,
        userVote: 0,
        replies: [
          {
            id: 5,
            content:
              'Thanks! That makes it much clearer. So the trade-off is space for time efficiency.',
            author: 'student_dev',
            authorAvatar: '/placeholder.svg?height=24&width=24',
            createdAt: '2024-01-15T12:00:00Z',
            upvotes: 3,
            downvotes: 0,
            userVote: 0,
            replies: [],
          },
        ],
      },
    ],
  },
  {
    id: 6,
    content:
      "I implemented this in Python and got the same result. Here's my version:\n\n```python\ndef two_sum(nums, target):\n    seen = {}\n    for i, num in enumerate(nums):\n        if target - num in seen:\n            return [seen[target - num], i]\n        seen[num] = i\n```",
    author: 'pythonista',
    authorAvatar: '/placeholder.svg?height=24&width=24',
    createdAt: '2024-01-15T12:30:00Z',
    upvotes: 20,
    downvotes: 1,
    userVote: 0,
    replies: [],
  },
];

// Sample global discussions with comments
const sampleDiscussions = [
  {
    id: 1,
    title: 'Google Interview Experience - L4 SWE Position',
    content: `Just finished my Google interview process and wanted to share my experience!\n\n**Round 1: Phone Screen**\n- Two Sum variant\n- Follow-up questions about optimization\n\n**Round 2-5: Onsite**\n- Dynamic Programming (Edit Distance)\n- System Design (Design a URL Shortener)\n- Behavioral questions\n- Coding on whiteboard\n\n**Tips:**\n- Practice explaining your thought process\n- Don't jump into coding immediately\n- Ask clarifying questions\n\n**Result:** Got the offer! 🎉`,
    contentType: 'text',
    codeContent: '',
    codeLanguage: 'javascript',
    category: 'interview',
    problemId: null,
    company: 'Google',
    position: 'L4 Software Engineer',
    author: 'techInterviewee',
    authorAvatar: '/placeholder.svg?height=32&width=32',
    createdAt: '2024-01-15T10:30:00Z',
    upvotes: 89,
    downvotes: 3,
    userVote: 1,
    commentCount: 24,
    tags: ['Google', 'L4', 'System Design', 'Interview Tips'],
    isBookmarked: false,
    comments: sampleComments,
  },
  {
    id: 2,
    title: 'Optimal Solution for Two Sum - Multiple Approaches',
    content: `Let's discuss different approaches to solve Two Sum and their trade-offs:

**Approach 1: Brute Force O(n²)**
Simple nested loop approach - easy to understand but inefficient for large inputs.

**Approach 2: HashMap O(n)**
Single pass with hash map - optimal time complexity with O(n) space trade-off.

**Analysis:**
- Time Complexity: O(n²) vs O(n)
- Space Complexity: O(1) vs O(n)
- Readability: High vs Medium
- Performance: Poor vs Excellent

Which approach do you prefer and why?`,
    contentType: 'code',
    codeContent: `// JavaScript - HashMap Approach
function twoSum(nums, target) {
    const map = new Map();
    
    for (let i = 0; i < nums.length; i++) {
        const complement = target - nums[i];
        
        if (map.has(complement)) {
            return [map.get(complement), i];
        }
        
        map.set(nums[i], i);
    }
    
    return [];
}

// Test case
console.log(twoSum([2, 7, 11, 15], 9)); // [0, 1]`,
    codeLanguage: 'javascript',
    category: 'problem',
    problemId: 1,
    problemTitle: 'Two Sum',
    problemDifficulty: 'Easy',
    author: 'algorithmExpert',
    authorAvatar: '/placeholder.svg?height=32&width=32',
    createdAt: '2024-01-14T15:20:00Z',
    upvotes: 156,
    downvotes: 4,
    userVote: 0,
    commentCount: 43,
    tags: ['JavaScript', 'HashMap', 'Time Complexity', 'Optimization'],
    isBookmarked: true,
    comments: sampleComments,
  },
];

const allTags = [
  // Programming Languages
  'Python',
  'Java',
  'JavaScript',
  'C++',
  'Go',
  'Rust',
  // Companies
  'Google',
  'Meta',
  'Amazon',
  'Microsoft',
  'Apple',
  'Netflix',
  // Concepts
  'Dynamic Programming',
  'System Design',
  'Data Structures',
  'Algorithms',
  // Interview
  'Interview Tips',
  'Behavioral',
  'Coding Interview',
  'System Design Interview',
  // Career
  'Career Transition',
  'Salary Negotiation',
  'Remote Work',
  'Startup vs Big Tech',
  // Difficulty
  'Beginner',
  'Intermediate',
  'Advanced',
  // Contest
  'Contest',
  'Weekly',
  'Competition',
];

const companies = [
  'Google',
  'Meta',
  'Amazon',
  'Microsoft',
  'Apple',
  'Netflix',
  'Uber',
  'Airbnb',
  'Spotify',
  'Twitter',
  'LinkedIn',
  'Salesforce',
  'Adobe',
  'Other',
];

export default function GlobalDiscussion() {
  const [discussions, setDiscussions] = useState([]);
  const [activeCategory, setActiveCategory] = useState('all');
  const [sortBy, setSortBy] = useState('top');
  const [filterTag, setFilterTag] = useState('all');
  const [searchQuery, setSearchQuery] = useState('');
  const [newPostOpen, setNewPostOpen] = useState(false);
  const [expandedComments, setExpandedComments] = useState([]);

  // New post form state
  const [newPost, setNewPost] = useState({
    title: '',
    content: '',
    contentType: 'text',
    codeContent: '',
    codeLanguage: 'javascript',
    category: 'general',
    problemId: null,
    company: '',
    position: '',
    tags: [],
  });



  const authUser = useSelector((state) => state.auth);

  const [openDropdownId, setOpenDropdownId] = useState(null);
  const [deleteDialogOpen, setDeleteDialogOpen] = useState(false);
  const [deleteTarget, setDeleteTarget] = useState(null);

  console.log('newPost', newPost);

  const {
    data: discussionData,
    isPending: discussionPending,
    isSuccess: discussionSuccess,
    error: discussionError,
    refetch: discussionRefetch,
  } = useGetAllDiscussions();

  const {
    isPending: createDiscussionPending,
    isSuccess: createDiscussionSuccess,
    error: createDiscussionError,
    createDiscussionMutation,
  } = useCreateDiscussion();

  const {
    isPending: deleteDiscussionPending,
    isSuccess: deleteDiscussionSuccess,
    error: deleteDiscussionError,
    deleteDiscussionMutation,
  } = useDeleteDiscussion();

  const { data: allCommentsData, isPending: allCommentsPending, refetch: allCommentsRefetch } = useGetAllComments();

  useEffect(() => {
    console.log('discussionData', discussionData);
    setDiscussions(discussionData?.data);
  }, [discussionData]);

  console.log('discussion Pending', discussionPending);

  const handleCreateDiscussion = async (post) => {
    try {
      console.log('post', post);
      const data = await createDiscussionMutation(post);
      console.log('successfully created discussion', data);
      toast.success('Discussion created successfully.');
      await discussionRefetch();
    } catch (error) {
      console.log('error while creating discussion', error);
    }
  };

  const handleVote = (discussionId, voteType) => {
    setDiscussions((prev) =>
      prev.map((discussion) => {
        if (discussion.id === discussionId) {
          const currentVote = discussion.userVote;
          let newVote = 0;
          let upvotes = discussion.upvotes;
          let downvotes = discussion.downvotes;

          // Remove previous vote
          if (currentVote === 1) upvotes--;
          if (currentVote === -1) downvotes--;

          // Apply new vote
          if (voteType === 'up' && currentVote !== 1) {
            newVote = 1;
            upvotes++;
          } else if (voteType === 'down' && currentVote !== -1) {
            newVote = -1;
            downvotes++;
          }

          return { ...discussion, userVote: newVote, upvotes, downvotes };
        }
        return discussion;
      })
    );
  };

  const handleCommentVote = (discussionId, commentId, voteType) => {
    setDiscussions((prev) =>
      prev.map((discussion) => {
        if (discussion.id === discussionId) {
          const updateCommentVote = (comments) => {
            return comments.map((comment) => {
              if (comment.id === commentId) {
                const currentVote = comment.userVote;
                let newVote = 0;
                let upvotes = comment.upvotes;
                let downvotes = comment.downvotes;

                // Remove previous vote
                if (currentVote === 1) upvotes--;
                if (currentVote === -1) downvotes--;

                // Apply new vote
                if (voteType === 'up' && currentVote !== 1) {
                  newVote = 1;
                  upvotes++;
                } else if (voteType === 'down' && currentVote !== -1) {
                  newVote = -1;
                  downvotes++;
                }

                return { ...comment, userVote: newVote, upvotes, downvotes };
              }
              return {
                ...comment,
                replies: updateCommentVote(comment.replies),
              };
            });
          };

          return {
            ...discussion,
            comments: updateCommentVote(discussion.comments),
          };
        }
        return discussion;
      })
    );
  };

  const handleAddComment = (discussionId, content) => {
    console.log("content", content);
    const newComment = {
      id: Date.now(),
      content,
      author: 'currentUser',
      authorAvatar: '/placeholder.svg?height=24&width=24',
      createdAt: new Date().toISOString(),
      upvotes: 0,
      downvotes: 0,
      userVote: 0,
      replies: [],
    };

    setDiscussions((prev) =>
      prev.map((discussion) => {
        if (discussion.id === discussionId) {
          return {
            ...discussion,
            comments: [...discussion.comments, newComment],
            commentCount: discussion.commentCount + 1,
          };
        }
        return discussion;
      })
    );
  };

  const handleReplyToComment = (discussionId, parentId, content) => {
    const newReply = {
      id: Date.now(),
      content,
      author: 'currentUser',
      authorAvatar: '/placeholder.svg?height=24&width=24',
      createdAt: new Date().toISOString(),
      upvotes: 0,
      downvotes: 0,
      userVote: 0,
      replies: [],
    };

    setDiscussions((prev) =>
      prev.map((discussion) => {
        if (discussion.id === discussionId) {
          const addReply = (comments) => {
            return comments.map((comment) => {
              if (comment.id === parentId) {
                return { ...comment, replies: [...comment.replies, newReply] };
              }
              return { ...comment, replies: addReply(comment.replies) };
            });
          };

          return {
            ...discussion,
            comments: addReply(discussion.comments),
            commentCount: discussion.commentCount + 1,
          };
        }
        return discussion;
      })
    );
  };

  const handleEditComment = (discussionId, commentId, content) => {
    setDiscussions((prev) =>
      prev.map((discussion) => {
        if (discussion.id === discussionId) {
          const editComment = (comments) => {
            return comments.map((comment) => {
              if (comment.id === commentId) {
                return {
                  ...comment,
                  content,
                  isEdited: true,
                  editedAt: new Date().toISOString(),
                };
              }
              return { ...comment, replies: editComment(comment.replies) };
            });
          };

          return { ...discussion, comments: editComment(discussion.comments) };
        }
        return discussion;
      })
    );
  };

  const handleDeleteComment = (discussionId, commentId) => {
    if (confirm('Are you sure you want to delete this comment?')) {
      setDiscussions((prev) =>
        prev.map((discussion) => {
          if (discussion.id === discussionId) {
            const deleteComment = (comments) => {
              return comments
                .filter((comment) => comment.id !== commentId)
                .map((comment) => ({
                  ...comment,
                  replies: deleteComment(comment.replies),
                }));
            };

            return {
              ...discussion,
              comments: deleteComment(discussion.comments),
              commentCount: discussion.commentCount - 1,
            };
          }
          return discussion;
        })
      );
    }
  };

  const handleReportComment = (discussionId, commentId) => {
    alert('Comment reported. Thank you for helping keep our community safe.');
  };

  const toggleBookmark = (discussionId) => {
    setDiscussions((prev) =>
      prev.map((discussion) =>
        discussion.id === discussionId
          ? { ...discussion, isBookmarked: !discussion.isBookmarked }
          : discussion
      )
    );
  };

  const toggleComments = (discussionId) => {
    setExpandedComments((prev) =>
      prev.includes(discussionId)
        ? prev.filter((id) => id !== discussionId)
        : [...prev, discussionId]
    );
  };

  const filteredAndSortedDiscussions = useMemo(() => {
    let filtered = discussions;

    // Filter by category
    if (activeCategory !== 'all') {
      filtered = filtered.filter((d) => d.category === activeCategory);
    }

    // Filter by search query
    if (searchQuery) {
      filtered = filtered.filter(
        (d) =>
          d.title.toLowerCase().includes(searchQuery.toLowerCase()) ||
          d.content.toLowerCase().includes(searchQuery.toLowerCase()) ||
          (d.company &&
            d.company.toLowerCase().includes(searchQuery.toLowerCase()))
      );
    }

    // Filter by tag
    if (filterTag !== 'all') {
      filtered = filtered?.filter((d) => d.tags.includes(filterTag));
    }

    // Sort
    return filtered?.sort((a, b) => {
      switch (sortBy) {
        case 'top':
          return b.upvotes - b.downvotes - (a.upvotes - a.downvotes);
        case 'newest':
          return (
            new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()
          );
        case 'oldest':
          return (
            new Date(a.createdAt).getTime() - new Date(b.createdAt).getTime()
          );
        case 'discussed':
          return b.commentCount - a.commentCount;
        default:
          return 0;
      }
    });
  }, [discussions, activeCategory, sortBy, filterTag, searchQuery]);

  const handleCreatePost = () => {
    if (!newPost.title.trim()) return;

    // Validate content based on selected type
    if (newPost.contentType === 'text' && !newPost.content.trim()) {
      toast.warning;
      toast.warning('Please add some content to your post');
      return;
    }

    if (newPost.contentType === 'code' && !newPost.codeContent.trim()) {
      toast.warning('Please add some code to your solution');
      return;
    }

    handleCreateDiscussion(newPost);

    setNewPost({
      title: '',
      content: '',
      contentType: 'text',
      codeContent: '',
      codeLanguage: 'javascript',
      category: 'general',
      problemId: null,
      company: '',
      position: '',
      tags: [],
    });
    setNewPostOpen(false);
  };

  const [discussionToDelete, setDiscussionToDelete] = useState(null);
  const [discussionConfirmOpen, setDiscussionConfirmOpen] = useState(false);

  const handleDeleteDiscussion = (discussionId) => {
    console.log('discussionId', discussionId);
    const discussion = discussions.find((d) => d.id === discussionId);
    if (discussion) {
      const totalReplies = discussion?.comments?.reduce((count, comment) => {
        const getReplyCount = (c) => {
          return c.replies.reduce(
            (total, reply) => total + 1 + getReplyCount(reply),
            0
          );
        };
        return count + getReplyCount(comment);
      }, 0);

      setDeleteTarget({
        type: 'discussion',
        id: discussionId,
        title: discussion.title,
        author: discussion.author,
        commentCount: discussion.commentCount,
        replyCount: totalReplies,
      });
      setDeleteDialogOpen(true);
    }
  };

  const handleDelDiscussion = async (discussionId) => {
    // const discussion = discussions.find((d) => d.id === discussionId);
    // setDiscussionToDelete(discussion);
    try {
      console.log('discussionId', discussionId);
      await deleteDiscussionMutation(discussionId);
      toast.success('Discussion deleted successfully.');
      setDiscussionToDelete(null);
      await discussionRefetch();
      setDiscussionConfirmOpen(false);
    } catch (error) {
      console.error('Error deleting discussion:', error);
      toast.error('Failed to delete discussion. Please try again.');
      return;
    }
  };



  const confirmDelete = async() => {
    try {
      console.log("discussionToDelete", discussionToDelete);
      // deleteDiscussionMutation(discussionToDelete?.id);
      toast.success('Discussion deleted successfully.');
      // await discussionRefetch(); 
      setDiscussionConfirmOpen(false);
    } catch (error) {
      console.error('Error deleting discussion:', error);
      toast.error('Failed to delete discussion. Please try again.');
    }
  };


  const confirmDeleteDiscussion = () => {
    if (deleteTarget && deleteTarget.type === 'discussion') {
      setDiscussions((prev) =>
        prev.filter((discussion) => discussion.id !== deleteTarget.id)
      );
    }
  };

  const confirmDeleteComment = () => {
    if (
      deleteTarget &&
      deleteTarget.type === 'comment' &&
      deleteTarget.discussionId
    ) {
      setDiscussions((prev) =>
        prev.map((discussion) => {
          if (discussion.id === deleteTarget.discussionId) {
            const deleteComment = (comments) => {
              return comments
                .filter((comment) => comment.id !== deleteTarget.id)
                .map((comment) => ({
                  ...comment,
                  replies: deleteComment(comment.replies),
                }));
            };

            return {
              ...discussion,
              comments: deleteComment(discussion.comments),
              commentCount: discussion.commentCount - 1,
            };
          }
          return discussion;
        })
      );
    }
  };

  const formatTimeAgo = (dateString) => {
    const date = new Date(dateString);
    const now = new Date();
    const diffInHours = Math.floor(
      (now.getTime() - date.getTime()) / (1000 * 60 * 60)
    );

    if (diffInHours < 1) return 'just now';
    if (diffInHours < 24) return `${diffInHours}h ago`;
    return `${Math.floor(diffInHours / 24)}d ago`;
  };

  const getCategoryIcon = (categoryId) => {
    const category = categories.find((c) => c.id === categoryId);
    return category ? category.icon : Users;
  };

  const getCategoryColor = (categoryId) => {
    const category = categories.find((c) => c.id === categoryId);
    return category ? category.color : 'bg-gray-500';
  };

  const formatMarkdown = (text) => {
    if (!text) return '';

    // Simple markdown to HTML conversion for display
    return text
      .replace(
        /^### (.*$)/gm,
        '<h3 class="text-lg font-semibold mt-4 mb-2">$1</h3>'
      )
      .replace(
        /^## (.*$)/gm,
        '<h2 class="text-xl font-semibold mt-4 mb-2">$1</h2>'
      )
      .replace(/^# (.*$)/gm, '<h1 class="text-2xl font-bold mt-4 mb-2">$1</h1>')
      .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
      .replace(/\*(.*?)\*/g, '<em>$1</em>')
      .replace(/~~(.*?)~~/g, '<del>$1</del>')
      .replace(
        /`(.*?)`/g,
        '<code class="bg-muted px-1 py-0.5 rounded text-sm">$1</code>'
      )
      .replace(
        /```(\w+)?\n([\s\S]*?)```/g,
        '<pre class="bg-muted p-3 rounded-md overflow-x-auto my-2"><code>$2</code></pre>'
      )
      .replace(
        /^> (.*$)/gm,
        '<blockquote class="border-l-4 border-muted pl-4 italic my-2">$1</blockquote>'
      )
      .replace(/^\* (.*$)/gm, '<li class="ml-4">• $1</li>')
      .replace(/^\d+\. (.*$)/gm, '<li class="ml-4">$1</li>')
      .replace(
        /\[([^\]]+)\]$$([^)]+)$$/g,
        '<a href="$2" class="text-blue-500 underline">$1</a>'
      )
      .replace(
        /!\[([^\]]*)\]$$([^)]+)$$/g,
        '<img src="$2" alt="$1" class="max-w-full h-auto rounded my-2" />'
      )
      .replace(/\n/g, '<br>');
  };


  console.log('authUser', authUser);
  console.log('discussions', discussions);

  return (
    <>
      {discussionPending ? (
        <SkeletonCard />
      ) : (
        <div className='max-w-6xl mx-auto p-6 space-y-6'>
          {/* Header */}
          <div className='flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between'>
            <div>
              <h1 className='text-3xl font-bold'>Global Discussions</h1>
              <p className='text-muted-foreground'>
                Share experiences, discuss problems, and connect with the
                community
              </p>
            </div>

            <Dialog open={newPostOpen} onOpenChange={setNewPostOpen}>
              <DialogTrigger asChild>
                <Button size='lg'>
                  <Plus className='w-4 h-4 mr-2' />
                  Create Post
                </Button>
              </DialogTrigger>
              <DialogContent className='max-w-5xl max-h-[90vh] overflow-y-auto'>
                <DialogHeader>
                  <DialogTitle>Create New Discussion Post</DialogTitle>
                </DialogHeader>
                <div className='space-y-6'>
                  {/* Post Type Selection */}
                  <div>
                    <Label>Post Type</Label>
                    <Tabs
                      value={newPost.contentType}
                      onValueChange={(value) =>
                        setNewPost((prev) => ({ ...prev, contentType: value }))
                      }
                    >
                      <TabsList className='grid w-full grid-cols-1'>
                        <TabsTrigger
                          value='text'
                          className='flex items-center gap-2'
                        >
                          <FileText className='w-4 h-4' />
                          Text Discussion
                        </TabsTrigger>
                        {/* <TabsTrigger
                          value='code'
                          className='flex items-center gap-2'
                        >
                          <Code2 className='w-4 h-4' />
                          Code Solution
                        </TabsTrigger> */}
                      </TabsList>
                    </Tabs>
                  </div>

                  {/* Basic Info */}
                  <div className='grid grid-cols-1 md:grid-cols-2 gap-4'>
                    <div>
                      <Label htmlFor='category'>Category</Label>
                      <Select
                        value={newPost.category}
                        onValueChange={(value) =>
                          setNewPost((prev) => ({ ...prev, category: value }))
                        }
                      >
                        <SelectTrigger>
                          <SelectValue />
                        </SelectTrigger>
                        <SelectContent>
                          {categories.map((category) => {
                            const Icon = category.icon;
                            return (
                              <SelectItem key={category.id} value={category.id}>
                                <div className='flex items-center gap-2'>
                                  <Icon className='w-4 h-4' />
                                  {category.label}
                                </div>
                              </SelectItem>
                            );
                          })}
                        </SelectContent>
                      </Select>
                    </div>

                    {/* {newPost.category === 'problem' && (
                      <div>
                        <Label htmlFor='problem'>
                          Related Problem (Optional)
                        </Label>
                        <Select
                          value={newPost.problemId?.toString() || 'none'}
                          onValueChange={(value) =>
                            setNewPost((prev) => ({
                              ...prev,
                              problemId:
                                value === 'none'
                                  ? null
                                  : Number.parseInt(value),
                            }))
                          }
                        >
                          <SelectTrigger>
                            <SelectValue placeholder='Select a problem...' />
                          </SelectTrigger>
                          <SelectContent>
                            <SelectItem value='none'>
                              No specific problem
                            </SelectItem>
                            {sampleProblems.map((problem) => (
                              <SelectItem
                                key={problem.id}
                                value={problem.id.toString()}
                              >
                                <div className='flex items-center gap-2'>
                                  <Badge
                                    variant={
                                      problem.difficulty === 'Easy'
                                        ? 'default'
                                        : problem.difficulty === 'Medium'
                                        ? 'secondary'
                                        : 'destructive'
                                    }
                                    className='text-xs'
                                  >
                                    {problem.difficulty}
                                  </Badge>
                                  {problem.title}
                                </div>
                              </SelectItem>
                            ))}
                          </SelectContent>
                        </Select>
                      </div>
                    )} */}
                  </div>

                  {newPost.category === 'interview' && (
                    <div className='grid grid-cols-2 gap-4'>
                      <div>
                        <Label htmlFor='company'>Company</Label>
                        <Select
                          value={newPost.company}
                          onValueChange={(value) =>
                            setNewPost((prev) => ({ ...prev, company: value }))
                          }
                        >
                          <SelectTrigger>
                            <SelectValue placeholder='Select company...' />
                          </SelectTrigger>
                          <SelectContent>
                            {companies.map((company) => (
                              <SelectItem key={company} value={company}>
                                {company}
                              </SelectItem>
                            ))}
                          </SelectContent>
                        </Select>
                      </div>
                      <div>
                        <Label htmlFor='position'>Position</Label>
                        <Input
                          id='position'
                          value={newPost.position}
                          onChange={(e) =>
                            setNewPost((prev) => ({
                              ...prev,
                              position: e.target.value,
                            }))
                          }
                          placeholder='e.g., L4 Software Engineer'
                        />
                      </div>
                    </div>
                  )}

                  <div>
                    <Label htmlFor='title'>Title</Label>
                    <Input
                      id='title'
                      value={newPost.title}
                      onChange={(e) =>
                        setNewPost((prev) => ({
                          ...prev,
                          title: e.target.value,
                        }))
                      }
                      placeholder='Enter a descriptive title...'
                    />
                  </div>

                  {/* Content Editor */}
                  {newPost.contentType === 'text' ? (
                    <div>
                      <Label>Content</Label>
                      <RichTextEditor
                        value={newPost.content}
                        onChange={(value) =>
                          setNewPost((prev) => ({ ...prev, content: value }))
                        }
                        placeholder='Share your thoughts, experience, or question...'
                      />
                    </div>
                  ) : (
                    <div>
                      <Label>Code Solution</Label>
                      <EditorTabs
                        textValue={newPost.content}
                        onTextChange={(value) =>
                          setNewPost((prev) => ({ ...prev, content: value }))
                        }
                        codeValue={newPost.codeContent}
                        onCodeChange={(value) =>
                          setNewPost((prev) => ({
                            ...prev,
                            codeContent: value,
                          }))
                        }
                        codeLanguage={newPost.codeLanguage}
                        onLanguageChange={(language) =>
                          setNewPost((prev) => ({
                            ...prev,
                            codeLanguage: language,
                          }))
                        }
                      />
                    </div>
                  )}

                  <div>
                    <Label>Tags</Label>
                    <div className='flex flex-wrap gap-2 mt-2 max-h-32 overflow-y-auto'>
                      {allTags.map((tag) => (
                        <Badge
                          key={tag}
                          variant={
                            newPost.tags.includes(tag) ? 'default' : 'outline'
                          }
                          className='cursor-pointer'
                          onClick={() => {
                            setNewPost((prev) => ({
                              ...prev,
                              tags: prev.tags.includes(tag)
                                ? prev.tags.filter((t) => t !== tag)
                                : [...prev.tags, tag],
                            }));
                          }}
                        >
                          {tag}
                        </Badge>
                      ))}
                    </div>
                  </div>

                  <div className='flex gap-2 justify-end'>
                    <Button
                      variant='outline'
                      onClick={() => setNewPostOpen(false)}
                    >
                      Cancel
                    </Button>
                    <Button onClick={handleCreatePost}>Create Post</Button>
                  </div>
                </div>
              </DialogContent>
            </Dialog>
          </div>

          {/* Category Tabs */}
          <Tabs
            value={activeCategory}
            onValueChange={setActiveCategory}
            className='w-full'
          >
            <TabsList className='grid w-full grid-cols-5'>
              <TabsTrigger value='all' className='flex items-center gap-2'>
                <Users className='w-4 h-4' />
                All
              </TabsTrigger>
              {categories.map((category) => {
                const Icon = category.icon;
                return (
                  <TabsTrigger
                    key={category.id}
                    value={category.id}
                    className='flex items-center gap-2'
                  >
                    <Icon className='w-4 h-4' />
                    <span className='hidden sm:inline'>{category.label}</span>
                  </TabsTrigger>
                );
              })}
            </TabsList>
          </Tabs>

          {/* Search and Filters */}
          <div className='flex flex-col sm:flex-row gap-4'>
            <div className='relative flex-1'>
              <Search className='absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4' />
              <Input
                placeholder='Search discussions, companies, or topics...'
                value={searchQuery}
                onChange={(e) => setSearchQuery(e.target.value)}
                className='pl-10'
              />
            </div>

            <div className='flex gap-2'>
              <Select value={sortBy} onValueChange={setSortBy}>
                <SelectTrigger className='w-[140px]'>
                  <SelectValue />
                </SelectTrigger>
                <SelectContent>
                  <SelectItem value='top'>
                    <div className='flex items-center gap-2'>
                      <TrendingUp className='w-4 h-4' />
                      Top
                    </div>
                  </SelectItem>
                  <SelectItem value='newest'>
                    <div className='flex items-center gap-2'>
                      <Clock className='w-4 h-4' />
                      Newest
                    </div>
                  </SelectItem>
                  <SelectItem value='oldest'>Oldest</SelectItem>
                  <SelectItem value='discussed'>Most Discussed</SelectItem>
                </SelectContent>
              </Select>

              <Select value={filterTag} onValueChange={setFilterTag}>
                <SelectTrigger className='w-[120px]'>
                  <Filter className='w-4 h-4 mr-2' />
                  <SelectValue />
                </SelectTrigger>
                <SelectContent>
                  <SelectItem value='all'>All Tags</SelectItem>
                  {allTags.map((tag) => (
                    <SelectItem key={tag} value={tag}>
                      {tag}
                    </SelectItem>
                  ))}
                </SelectContent>
              </Select>
            </div>
          </div>

          {/* Discussion List */}
          <div className='space-y-6'>
            {filteredAndSortedDiscussions?.map((discussion) => {
              const CategoryIcon = getCategoryIcon(discussion.category);
              const isCommentsExpanded = expandedComments.includes(
                discussion.id
              );

              return (
                <Card
                  key={discussion.id}
                  className='overflow-hidden hover:shadow-md transition-shadow'
                >
                  <CardHeader className='pb-3'>
                    <div className='flex items-start gap-3'>
                      <div className='flex flex-col items-center gap-1 min-w-[60px]'>
                        {/* <Button
                          variant='ghost'
                          size='sm'
                          className={`p-1 h-8 w-8 ${
                            discussion.userVote === 1 ? 'text-orange-500' : ''
                          }`}
                          onClick={() => handleVote(discussion.id, 'up')}
                        >
                          <ChevronUp className='w-4 h-4' />
                        </Button>
                        <span className='text-sm font-medium'>
                          {discussion.upvotes - discussion.downvotes}
                        </span>
                        <Button
                          variant='ghost'
                          size='sm'
                          className={`p-1 h-8 w-8 ${
                            discussion.userVote === -1 ? 'text-blue-500' : ''
                          }`}
                          onClick={() => handleVote(discussion.id, 'down')}
                        >
                          <ChevronDown className='w-4 h-4' />
                        </Button> */}
                      </div>

                      <div className='flex-1 min-w-0'>
                        <div className='flex items-start justify-between gap-2'>
                          <div className='flex-1'>
                            <div className='flex items-center gap-2 mb-2'>
                              <div
                                className={`w-2 h-2 rounded-full ${getCategoryColor(
                                  discussion.category
                                )}`}
                              />
                              <CategoryIcon className='w-4 h-4 text-muted-foreground' />
                              <span className='text-sm text-muted-foreground'>
                                {
                                  categories.find(
                                    (c) => c.id === discussion.category
                                  )?.label
                                }
                              </span>
                              {discussion.contentType === 'code' && (
                                <>
                                  <span className='text-muted-foreground'>
                                    •
                                  </span>
                                  <Badge variant='outline' className='text-xs'>
                                    <Code2 className='w-3 h-3 mr-1' />
                                    {discussion.codeLanguage}
                                  </Badge>
                                </>
                              )}
                              {discussion.company && (
                                <>
                                  <span className='text-muted-foreground'>
                                    •
                                  </span>
                                  <Badge variant='outline' className='text-xs'>
                                    {discussion.company}
                                  </Badge>
                                </>
                              )}
                              {discussion.problemTitle && (
                                <>
                                  <span className='text-muted-foreground'>
                                    •
                                  </span>
                                  <div className='flex items-center gap-1'>
                                    <Badge
                                      variant={
                                        discussion.problemDifficulty === 'Easy'
                                          ? 'default'
                                          : discussion.problemDifficulty ===
                                            'Medium'
                                          ? 'secondary'
                                          : 'destructive'
                                      }
                                      className='text-xs'
                                    >
                                      {discussion.problemDifficulty}
                                    </Badge>
                                    <span className='text-sm text-muted-foreground'>
                                      {discussion.problemTitle}
                                    </span>
                                    <ExternalLink className='w-3 h-3 text-muted-foreground' />
                                  </div>
                                </>
                              )}
                            </div>
                            <h3 className='font-semibold text-lg leading-tight mb-2'>
                              {discussion.title}
                            </h3>
                          </div>

                          <div className='flex items-center gap-1'>
                            {/* <Button
                              variant='ghost'
                              size='sm'
                              className={`h-8 w-8 p-0 ${
                                discussion.isBookmarked ? 'text-yellow-500' : ''
                              }`}
                              onClick={() => toggleBookmark(discussion.id)}
                            >
                              <Star
                                className={`w-4 h-4 ${
                                  discussion.isBookmarked ? 'fill-current' : ''
                                }`}
                              />
                            </Button> */}
                            {discussion.author?.id === authUser?.id && (
                              <DropdownMenu
                                open={openDropdownId === discussion.id}
                                onOpenChange={(open) => {
                                  if (open) {
                                    setOpenDropdownId(discussion.id);
                                  } else {
                                    setOpenDropdownId(null);
                                  }
                                }}
                              >
                                <DropdownMenuTrigger asChild>
                                  <Button
                                    variant='ghost'
                                    size='sm'
                                    className='h-8 w-8 p-0'
                                  >
                                    <MoreHorizontal className='w-4 h-4' />
                                  </Button>
                                </DropdownMenuTrigger>
                                <DropdownMenuContent align='end'>
                                  {/* <DropdownMenuItem>
                                    <Edit className='w-4 h-4 mr-2' />
                                    Edit
                                  </DropdownMenuItem> */}
                                  <DropdownMenuItem
                                    // onClick={() =>
                                    //   handleDeleteDiscussion(discussion.id)
                                    // }

                                    onClick={(e) => {
                                      e.stopPropagation();
                                      setDiscussionToDelete(discussion);
                                      setDiscussionConfirmOpen(true);
                                      setOpenDropdownId(null);
                                    }}
                                  >
                                    <Trash2 className='w-4 h-4 mr-2' />
                                    Delete
                                  </DropdownMenuItem>
                                  {/* <DropdownMenuItem>
                                  <Flag className='w-4 h-4 mr-2' />
                                  Report
                                </DropdownMenuItem> */}
                                </DropdownMenuContent>
                              </DropdownMenu>
                            )}
                          </div>
                        </div>

                        <div className='flex items-center gap-2 mb-3 text-sm text-muted-foreground'>
                          <Avatar className='w-5 h-5'>
                            <AvatarImage
                              src={
                                discussion?.author?.image || '/placeholder.svg'
                              }
                            />
                            <AvatarFallback>
                              {discussion.author?.username[0].toUpperCase()}
                            </AvatarFallback>
                          </Avatar>
                          <span>{discussion?.author?.username}</span>
                          <span>•</span>
                          <span>{formatTimeAgo(discussion.createdAt)}</span>
                        </div>

                        <div className='flex flex-wrap gap-1 mb-3'>
                          {discussion.tags.slice(0, 5).map((tag) => (
                            <Badge
                              key={tag}
                              variant='secondary'
                              className='text-xs'
                            >
                              {tag}
                            </Badge>
                          ))}
                          {discussion.tags.length > 5 && (
                            <Badge variant='outline' className='text-xs'>
                              +{discussion.tags.length - 5} more
                            </Badge>
                          )}
                        </div>
                      </div>
                    </div>
                  </CardHeader>

                  <CardContent className='pt-0'>
                    <div className='ml-[75px]'>
                      {/* Text Content */}
                      {discussion.content && (
                        <div className='prose prose-sm max-w-none mb-4'>
                          <div
                            dangerouslySetInnerHTML={{
                              __html: formatMarkdown(discussion.content),
                            }}
                          />
                        </div>
                      )}

                      {/* Code Content */}
                      {discussion.contentType === 'code' &&
                        discussion.codeContent && (
                          <div className='mb-4'>
                            <div className='bg-slate-950 text-slate-100 p-4 rounded-md overflow-x-auto'>
                              <div className='flex items-center justify-between mb-2'>
                                <Badge
                                  variant='outline'
                                  className='text-slate-300 border-slate-600'
                                >
                                  {discussion.codeLanguage}
                                </Badge>
                              </div>
                              <pre className='text-sm'>
                                <code>{discussion.codeContent}</code>
                              </pre>
                            </div>
                          </div>
                        )}

                      {/* <div className='flex items-center gap-4 text-sm text-muted-foreground'>
                        <Button
                          variant='ghost'
                          size='sm'
                          className='h-8 px-2'
                          onClick={() => toggleComments(discussion.id)}
                        >
                          <MessageSquare className='w-4 h-4 mr-1' />
                          {discussion.commentCount} comments
                        </Button>
                        <Button variant='ghost' size='sm' className='h-8 px-2'>
                          <Reply className='w-4 h-4 mr-1' />
                          Reply
                        </Button>
                      </div> */}
                    </div>
                  </CardContent>

                  {/* Comments Section */}
                  {isCommentsExpanded && (
                    <CardContent className='pt-0 border-t'>
                      <div className='ml-[75px]'>
                        <DiscussionComments
                          discussionId={discussion.id}
                          comments={discussion.comments}
                          commentCount={discussion.commentCount}
                          onAddComment={(content) =>
                            handleAddComment(discussion.id, content)
                          }
                          onVoteComment={(commentId, voteType) =>
                            handleCommentVote(
                              discussion.id,
                              commentId,
                              voteType
                            )
                          }
                          onReplyToComment={(parentId, content) =>
                            handleReplyToComment(
                              discussion.id,
                              parentId,
                              content
                            )
                          }
                          onEditComment={(commentId, content) =>
                            handleEditComment(discussion.id, commentId, content)
                          }
                          onDeleteComment={(commentId) =>
                            handleDeleteComment(discussion.id, commentId)
                          }
                          onReportComment={(commentId) =>
                            handleReportComment(discussion.id, commentId)
                          }
                        />
                      </div>
                    </CardContent>
                  )}
                </Card>
              );
            })}
          </div>

          {filteredAndSortedDiscussions?.length === 0 && (
            <div className='text-center py-12'>
              <MessageSquare className='w-12 h-12 mx-auto text-muted-foreground mb-4' />
              <h3 className='text-lg font-medium mb-2'>No discussions found</h3>
              <p className='text-muted-foreground mb-4'>
                {searchQuery || filterTag !== 'all' || activeCategory !== 'all'
                  ? 'Try adjusting your search or filters'
                  : 'Be the first to start a discussion!'}
              </p>
              <Button onClick={() => setNewPostOpen(true)}>
                <Plus className='w-4 h-4 mr-2' />
                Create First Post
              </Button>
            </div>
          )}

          <DeleteConfirmationDialog
            isOpen={deleteDialogOpen}
            onClose={() => {
              setDeleteDialogOpen(false);
              setDeleteTarget(null);
            }}
            onConfirm={
              deleteTarget?.type === 'discussion'
                ? confirmDeleteDiscussion
                : confirmDeleteComment
            }
            type={deleteTarget?.type || 'discussion'}
            title={deleteTarget?.title}
            author={deleteTarget?.author}
            commentCount={deleteTarget?.commentCount}
            replyCount={deleteTarget?.replyCount}
            requireConfirmation={
              deleteTarget?.type === 'discussion'
                ? (deleteTarget.commentCount || 0) > 0 ||
                  (deleteTarget.replyCount || 0) > 0
                : (deleteTarget?.replyCount || 0) > 0
            }
          />

          <AlertDialog
            open={discussionConfirmOpen}
            onOpenChange={setDiscussionConfirmOpen}
          >
            <AlertDialogContent className='bg-gray-900 border-gray-700 text-white'>
              <AlertDialogHeader>
                <AlertDialogTitle>Are you sure?</AlertDialogTitle>
                <AlertDialogDescription className='text-gray-400'>
                  This will permanently delete the problem "{discussionToDelete?.title}
                  ". This action cannot be undone.
                </AlertDialogDescription>
              </AlertDialogHeader>
              <AlertDialogFooter>
                <AlertDialogCancel
                  className='bg-gray-800 text-white hover:bg-gray-700'
                  onClick={() => setDiscussionToDelete(null)}
                >
                  Cancel
                </AlertDialogCancel>
                <AlertDialogAction
                  className='bg-red-600 hover:bg-red-700 text-white'
                  onClick={()=> {
                    if(discussionToDelete) {
                      handleDelDiscussion(discussionToDelete.id);
                      setDiscussionToDelete(null);
                      setDiscussionConfirmOpen(false);
                    }
                  }}
                >
                  Delete
                </AlertDialogAction>
              </AlertDialogFooter>
            </AlertDialogContent>
          </AlertDialog>
        </div>
      )}
    </>
  );
}


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\components\Discussion\RichTextEditor.jsx
==============================

"use client"

import { useState, useRef } from "react"
import { Button } from "@/components/ui/button"
import { Textarea } from "@/components/ui/textarea"
import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from "@/components/ui/select"
import { Tabs, TabsContent, TabsList, TabsTrigger } from "@/components/ui/tabs"
import {
  Bold,
  Italic,
  Strikethrough,
  List,
  ListOrdered,
  Quote,
  Code,
  Link,
  ImageIcon,
  Heading1,
  Heading2,
  Heading3,
} from "lucide-react"



const programmingLanguages = [
  "javascript",
  "python",
  "java",
  "cpp",
  "c",
  "csharp",
  "go",
  "rust",
  "typescript",
  "php",
  "ruby",
  "swift",
  "kotlin",
  "sql",
  "html",
  "css",
  "bash",
  "json",
  "xml",
  "yaml",
]

export function RichTextEditor({ value, onChange, placeholder }) {
  const [activeTab, setActiveTab] = useState("write")
  const [selectedLanguage, setSelectedLanguage] = useState("javascript")
  const textareaRef = useRef(null)

  const insertText = (before, after = "", placeholder = "") => {
    const textarea = textareaRef.current
    if (!textarea) return

    const start = textarea.selectionStart
    const end = textarea.selectionEnd
    const selectedText = value.substring(start, end)
    const textToInsert = selectedText || placeholder

    const newValue = value.substring(0, start) + before + textToInsert + after + value.substring(end)
    onChange(newValue)

    // Set cursor position after inserted text
    setTimeout(() => {
      textarea.focus()
      const newCursorPos = selectedText
        ? start + before.length + selectedText.length + after.length
        : start + before.length + placeholder.length
      textarea.setSelectionRange(newCursorPos, newCursorPos)
    }, 10)
  }

  const insertCodeBlock = (language = selectedLanguage) => {
    insertText(`\n\`\`\`${language}\n`, `\n\`\`\`\n`, "// Your code here")
  }

  const insertInlineCode = () => {
    insertText("`", "`", "code")
  }

  const insertLink = () => {
    const url = prompt("Enter URL:")
    if (url) {
      insertText(`[`, `](${url})`, "link text")
    }
  }

  const insertImage = () => {
    const url = prompt("Enter image URL:")
    if (url) {
      insertText(`![`, `](${url})`, "alt text")
    }
  }

  const formatMarkdown = (text) => {
    // Simple markdown to HTML conversion for preview
    return text
      .replace(/^### (.*$)/gm, "<h3>$1</h3>")
      .replace(/^## (.*$)/gm, "<h2>$1</h2>")
      .replace(/^# (.*$)/gm, "<h1>$1</h1>")
      .replace(/\*\*(.*?)\*\*/g, "<strong>$1</strong>")
      .replace(/\*(.*?)\*/g, "<em>$1</em>")
      .replace(/~~(.*?)~~/g, "<del>$1</del>")
      .replace(/`(.*?)`/g, '<code class="bg-muted px-1 py-0.5 rounded text-sm">$1</code>')
      .replace(
        /```(\w+)?\n([\s\S]*?)```/g,
        '<pre class="bg-muted p-3 rounded-md overflow-x-auto"><code>$2</code></pre>',
      )
      .replace(/^> (.*$)/gm, '<blockquote class="border-l-4 border-muted pl-4 italic">$1</blockquote>')
      .replace(/^\* (.*$)/gm, "<li>$1</li>")
      .replace(/^\d+\. (.*$)/gm, "<li>$1</li>")
      .replace(/\[([^\]]+)\]$$([^)]+)$$/g, '<a href="$2" class="text-blue-500 underline">$1</a>')
      .replace(/!\[([^\]]*)\]$$([^)]+)$$/g, '<img src="$2" alt="$1" class="max-w-full h-auto rounded" />')
      .replace(/\n/g, "<br>")
  }

  return (
    <div className="space-y-4">
      <Tabs value={activeTab} onValueChange={setActiveTab} className="w-full">
        {/* <TabsList className="grid w-full grid-cols-2">
          <TabsTrigger value="write" className="flex items-center gap-2">
            <Heading1 className="w-4 h-4" />
            Write
          </TabsTrigger>
          <TabsTrigger value="preview" className="flex items-center gap-2">
            <ImageIcon className="w-4 h-4" />
            Preview
          </TabsTrigger>
        </TabsList> */}

        <TabsContent value="write" className="space-y-3">
          {/* Formatting Toolbar */}
          <div className="flex flex-wrap gap-1 p-2 border rounded-md bg-muted/50">
            {/* Text Formatting */}
            {/* <div className="flex gap-1 border-r pr-2 mr-2">
              <Button
                type="button"
                variant="ghost"
                size="sm"
                className="h-8 w-8 p-0"
                onClick={() => insertText("# ", "", "Heading 1")}
                title="Heading 1"
              >
                <Heading1 className="w-4 h-4" />
              </Button>
              <Button
                type="button"
                variant="ghost"
                size="sm"
                className="h-8 w-8 p-0"
                onClick={() => insertText("## ", "", "Heading 2")}
                title="Heading 2"
              >
                <Heading2 className="w-4 h-4" />
              </Button>
              <Button
                type="button"
                variant="ghost"
                size="sm"
                className="h-8 w-8 p-0"
                onClick={() => insertText("### ", "", "Heading 3")}
                title="Heading 3"
              >
                <Heading3 className="w-4 h-4" />
              </Button>
            </div> */}

            <div className="flex gap-1 border-r pr-2 mr-2">
              <Button
                type="button"
                variant="ghost"
                size="sm"
                className="h-8 w-8 p-0"
                onClick={() => insertText("**", "**", "bold text")}
                title="Bold"
              >
                <Bold className="w-4 h-4" />
              </Button>
              <Button
                type="button"
                variant="ghost"
                size="sm"
                className="h-8 w-8 p-0"
                onClick={() => insertText("*", "*", "italic text")}
                title="Italic"
              >
                <Italic className="w-4 h-4" />
              </Button>
              <Button
                type="button"
                variant="ghost"
                size="sm"
                className="h-8 w-8 p-0"
                onClick={() => insertText("~~", "~~", "strikethrough")}
                title="Strikethrough"
              >
                <Strikethrough className="w-4 h-4" />
              </Button>
            </div>

            {/* Lists and Quotes */}
            <div className="flex gap-1 border-r pr-2 mr-2">
              <Button
                type="button"
                variant="ghost"
                size="sm"
                className="h-8 w-8 p-0"
                onClick={() => insertText("* ", "", "List item")}
                title="Bullet List"
              >
                <List className="w-4 h-4" />
              </Button>
              <Button
                type="button"
                variant="ghost"
                size="sm"
                className="h-8 w-8 p-0"
                onClick={() => insertText("1. ", "", "List item")}
                title="Numbered List"
              >
                <ListOrdered className="w-4 h-4" />
              </Button>
              <Button
                type="button"
                variant="ghost"
                size="sm"
                className="h-8 w-8 p-0"
                onClick={() => insertText("> ", "", "Quote")}
                title="Quote"
              >
                <Quote className="w-4 h-4" />
              </Button>
            </div>

            {/* Code */}
            {/* <div className="flex gap-1 border-r pr-2 mr-2">
              <Button
                type="button"
                variant="ghost"
                size="sm"
                className="h-8 w-8 p-0"
                onClick={insertInlineCode}
                title="Inline Code"
              >
                <Code className="w-4 h-4" />
              </Button>
              <Select value={selectedLanguage} onValueChange={setSelectedLanguage}>
                <SelectTrigger className="h-8 w-24">
                  <SelectValue />
                </SelectTrigger>
                <SelectContent>
                  {programmingLanguages.map((lang) => (
                    <SelectItem key={lang} value={lang}>
                      {lang}
                    </SelectItem>
                  ))}
                </SelectContent>
              </Select>
              <Button
                type="button"
                variant="ghost"
                size="sm"
                className="h-8 px-2"
                onClick={() => insertCodeBlock()}
                title="Code Block"
              >
                Code Block
              </Button>
            </div> */}

            {/* Links and Images */}
            {/* <div className="flex gap-1">
              <Button type="button" variant="ghost" size="sm" className="h-8 w-8 p-0" onClick={insertLink} title="Link">
                <Link className="w-4 h-4" />
              </Button>
              <Button
                type="button"
                variant="ghost"
                size="sm"
                className="h-8 w-8 p-0"
                onClick={insertImage}
                title="Image"
              >
                <ImageIcon className="w-4 h-4" />
              </Button>
            </div> */}
          </div>

          {/* Text Area */}
          <Textarea
            ref={textareaRef}
            value={value}
            onChange={(e) => onChange(e.target.value)}
            placeholder={placeholder || "Write your post content here... (Markdown supported)"}
            rows={12}
            className="font-mono text-sm resize-none"
          />

          {/* Quick Reference */}
          <div className="text-xs text-muted-foreground space-y-1">
            <p>
              <strong>Quick Reference:</strong> **bold** *italic* `code` [link](url) ![image](url)
            </p>
            <p>Use the toolbar buttons above or type markdown directly</p>
          </div>
        </TabsContent>

        <TabsContent value="preview" className="space-y-3">
          <div className="min-h-[300px] p-4 border rounded-md bg-background">
            {value ? (
              <div className="prose prose-sm max-w-none" dangerouslySetInnerHTML={{ __html: formatMarkdown(value) }} />
            ) : (
              <p className="text-muted-foreground italic">
                Nothing to preview yet. Switch to Write tab to add content.
              </p>
            )}
          </div>
        </TabsContent>
      </Tabs>
    </div>
  )
}


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\components\LandingPage\CodeExample.jsx
==============================

import React from 'react';

export function CodeExample() {
  return (
    <div className='premium-border-gradient w-full h-[420px] overflow-hidden rounded-lg bg-premium-dark p-2 code-glow relative'>
      <div className='absolute top-0 left-0 right-0 h-10 bg-premium-dark flex items-center px-4 gap-1 border-b border-gray-700'>
        <div className='w-3 h-3 rounded-full bg-red-500'></div>
        <div className='w-3 h-3 rounded-full bg-yellow-500'></div>
        <div className='w-3 h-3 rounded-full bg-green-500'></div>
        <div className='ml-4 text-xs text-gray-400'>Problem: Two Sum</div>
      </div>
      <div className='h-full p-4 pt-12 text-xs font-mono overflow-y-auto'>
        <pre className='text-sm'>
          <code className='text-gray-300'>
            {`function twoSum(nums, target) {
    const map = new Map();
    
    for (let i = 0; i < nums.length; i++) {
      const complement = target - nums[i];
      
      if (map.has(complement)) {
        return [map.get(complement), i];
      }
      map.set(nums[i], i);
    }
    return null;
  }`}
          </code>
        </pre>
        <div className='mt-4 p-2 bg-premium-blue/20 rounded-md'>
          <p className='text-green-400'>✓ All test cases passed!</p>
          <p className='text-xs text-gray-400 mt-1'>
            Runtime: 76ms (faster than 92% of submissions)
          </p>
        </div>
      </div>
    </div>
  );
}

export default CodeExample;


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\components\LandingPage\CtaSection.jsx
==============================

import { ArrowRight } from 'lucide-react';
import { Button } from '@/components/ui/button';

export function CtaSection() {
  return (
    <section className='w-full py-12 md:py-24 lg:py-32 bg-premium-darker relative'>
      <div className='absolute inset-0 bg-gradient-to-t from-premium-blue/5 to-transparent'></div>
      <div className='container grid items-center gap-6 px-4 md:px-6 lg:grid-cols-2 lg:gap-10 relative z-10'>
        <div className='space-y-2'>
          <h2 className='text-3xl font-bold tracking-tighter md:text-4xl/tight'>
            <span className='premium-text-gradient'>
              Ready to level up your coding skills?
            </span>
          </h2>
          <p className='max-w-[600px] text-gray-400 md:text-xl/relaxed lg:text-base/relaxed xl:text-xl/relaxed'>
            Join thousands of developers who are improving their skills and
            landing their dream jobs.
          </p>
        </div>
        <div className='flex flex-col gap-2 min-[400px]:flex-row lg:justify-end'>
          <Button
            size='lg'
            className='gap-1 bg-premium-purple hover:bg-premium-highlight text-white'
          >
            Start Coding Now <ArrowRight className='h-4 w-4' />
          </Button>
          <Button
            size='lg'
            variant='outline'
            className='border-premium-blue/50 bg-premium-darker text-white hover:bg-premium-blue/20 hover:text-premium-cyan'
          >
            View Demo
          </Button>
        </div>
      </div>
    </section>
  );
}


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\components\LandingPage\FeatureCard.jsx
==============================

export function FeatureCard({ icon, title, description }) {
  return (
    <div className='flex flex-col items-center space-y-2 rounded-lg border border-premium-blue/20 bg-premium-darker p-6 shadow-lg hover:border-premium-purple/50 transition-all duration-300'>
      <div className='rounded-full bg-premium-purple/10 p-3'>{icon}</div>
      <h3 className='text-xl text-center font-bold'>{title}</h3>
      <p className='text-center text-gray-400'>{description}</p>
    </div>
  );
}


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\components\LandingPage\FeatureSection.jsx
==============================

import { Code, Zap, Users, Trophy, Github } from 'lucide-react';

import { FeatureCard } from './FeatureCard';
import { SectionHeader } from './SectionHeader';


export function FeaturesSection() {
  const features = [
    {
      icon: <Code className='h-6 w-6 text-premium-cyan' />,
      title: '1000+ Coding Problems',
      description:
        'Practice with a vast library of problems across different difficulty levels and categories.',
    },
    {
      icon: <Zap className='h-6 w-6 text-premium-cyan' />,
      title: 'Interactive Coding Environment',
      description:
        'Code directly in your browser with support for multiple programming languages and real-time feedback.',
    },
    {
      icon: <Users className='h-6 w-6 text-premium-cyan' />,
      title: 'Community Discussions',
      description:
        'Learn from others by exploring different approaches and explanations for each problem.',
    },
    {
      icon: <Trophy className='h-6 w-6 text-premium-cyan' />,
      title: 'Contests & Leaderboards',
      description:
        'Participate in weekly coding contests and see how you rank against other programmers.',
    },
    {
      icon: <Github className='h-6 w-6 text-premium-cyan' />,
      title: 'Progress Tracking',
      description:
        'Track your progress over time with detailed statistics and performance metrics.',
    },
    {
      icon: <Users className='h-6 w-6 text-premium-cyan' />,
      title: 'Mock Interviews',
      description:
        'Prepare for technical interviews with realistic mock interview sessions and feedback.',
    },
  ];

  return (
    <section
      id='features'
      className='w-full py-12 md:py-24 lg:py-32 bg-premium-darker relative'
    >
      <div className='absolute inset-0 bg-gradient-to-b from-premium-blue/5 to-transparent'></div>
      <div className='container px-4 md:px-6 relative z-10'>
        <SectionHeader
          badge='Features'
          title='Everything You Need to Excel'
          description='Our platform provides all the tools and resources you need to become a better programmer and ace your technical interviews.'
        />
        <div className='mx-auto grid max-w-5xl grid-cols-1 gap-6 py-12 md:grid-cols-2 lg:grid-cols-3'>
          {features.map((feature, index) => (
            <FeatureCard
              key={index}
              icon={feature.icon}
              title={feature.title}
              description={feature.description}
            />
          ))}
        </div>
      </div>
    </section>
  );
}


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\components\LandingPage\Footer.jsx
==============================

import { Code } from 'lucide-react';
import { Link } from 'react-router-dom';

export function Footer() {
  return (
    <footer className='w-full border-t border-premium-blue/20 py-6 md:py-0 bg-premium-dark'>
      <div className='container flex flex-col items-center justify-between gap-4 md:h-24 md:flex-row'>
        <div className='flex gap-2 items-center text-lg font-bold'>
          <Code className='h-5 w-5 text-premium-cyan' />
          <span className='premium-text-gradient'>algodrill</span>
        </div>
        <p className='text-center text-sm leading-loose text-gray-400 md:text-left'>
          © {new Date().getFullYear()} algodrill. All rights reserved.
        </p>
        <div className='flex gap-4'>
          <Link
            to='/'
            className='text-sm text-gray-400 underline-offset-4 hover:text-premium-cyan hover:underline'
          >
            Terms
          </Link>
          <Link
            to='/'
            className='text-sm text-gray-400 underline-offset-4 hover:text-premium-cyan hover:underline'
          >
            Privacy
          </Link>
          <Link
            to='/'
            className='text-sm text-gray-400 underline-offset-4 hover:text-premium-cyan hover:underline'
          >
            Contact
          </Link>
        </div>
      </div>
    </footer>
  );
}


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\components\LandingPage\Header.jsx
==============================

import { Code, User } from 'lucide-react';
import { Button } from '@/components/ui/button';
import { useEffect, useState } from 'react';
import { Link, useLocation } from 'react-router-dom';
import { useSelector } from 'react-redux';
import ProfileIcon from './ProfileIcon';

export function Header() {
  const location = useLocation();
  const isHomePage = location.pathname === '/';
  const { isAuthenticated } = useSelector((state) => state.auth);

  // Function to handle scroll to section
  const scrollToSection = (sectionId) => (e) => {
    e.preventDefault();
    const section = document.getElementById(sectionId);
    if (section) {
      window.scrollTo({
        top: section.offsetTop - 80, // Offset to account for header height
        behavior: 'smooth',
      });
    }
  };

  // Handle hash links when page loads
  useEffect(() => {
    if (window.location.hash) {
      const id = window.location.hash.replace('#', '');
      const element = document.getElementById(id);
      if (element) {
        setTimeout(() => {
          window.scrollTo({
            top: element.offsetTop - 80,
            behavior: 'smooth',
          });
        }, 100);
      }
    }
  }, []);




  // Profile icon component for authenticated users

  // Auth buttons for non-authenticated users
  const AuthButtons = () => (
    <>
      <Link to={'/login'}>
        <Button
          variant='outline'
          size='sm'
          className='mr-2 border-premium-blue/50 bg-premium-darker premium-blue text-white hover:bg-premium-blue/20 hover:text-premium-cyan'
        >
          Log In
        </Button>
      </Link>
      <Link to={'/signup'}>
        <Button
          size='sm'
          className='bg-premium-purple hover:bg-premium-highlight text-white'
        >
          Sign Up
        </Button>
      </Link>
    </>
  );

  return (
    <header className='sticky top-0 z-40 w-full border-b border-premium-blue/20 bg-premium-darker/95 backdrop-blur supports-[backdrop-filter]:bg-premium-darker/60'>
      <div className='container flex h-16 items-center sm:justify-between'>
        {!isHomePage ? (
          // For non-homepage with authenticated user, show logo and profile icon
          <div className='flex justify-between items-center w-full'>
            <Link to='/' className='flex gap-2 items-center text-xl font-bold'>
              <Code className='h-6 w-6 text-premium-cyan' />
              <span className='premium-text-gradient'>algodrill</span>
            </Link>
            <div className='w-32 flex justify-end'>
              {isAuthenticated ? <ProfileIcon /> : <AuthButtons />}
            </div>
          </div>
        ) : (
          // Original header layout for homepage
          <>
            <div className='flex gap-2 items-center text-xl font-bold'>
              <Code className='h-6 w-6 text-premium-cyan' />
              <span className='premium-text-gradient'>algodrill</span>
            </div>
            <div className='flex flex-1 items-center justify-end space-x-4'>
              <nav className='flex items-center space-x-6'>
                <a
                  href='#features'
                  onClick={scrollToSection('features')}
                  className='hidden text-sm font-medium text-gray-400 transition-colors hover:text-premium-cyan sm:block cursor-pointer relative z-10'
                >
                  Features
                </a>
                <a
                  href='#how-it-works'
                  onClick={scrollToSection('how-it-works')}
                  className='hidden text-sm font-medium text-gray-400 transition-colors hover:text-premium-cyan sm:block cursor-pointer relative z-10'
                >
                  How It Works
                </a>
                <a
                  href='#pricing'
                  onClick={scrollToSection('pricing')}
                  className='hidden text-sm font-medium text-gray-400 transition-colors hover:text-premium-cyan sm:block cursor-pointer relative z-10'
                >
                  Pricing
                </a>
              </nav>
              <div className='w-32 flex justify-end ml-6'>
                {isAuthenticated ? <ProfileIcon /> : <AuthButtons />}
              </div>
            </div>
          </>
        )}
      </div>
    </header>
  );
}


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\components\LandingPage\HeroSection.jsx
==============================

import { ArrowRight, CheckCircle } from 'lucide-react';
import { Button } from '@/components/ui/button';
import { CodeExample } from './CodeExample';
import { Link } from 'react-router-dom';


export function HeroSection() {
  return (
    <section className='w-full py-12 md:py-24 lg:py-32 xl:py-48 relative overflow-hidden'>
      <div className='absolute inset-0 bg-gradient-radial from-premium-blue/20 to-transparent opacity-30'></div>
      <div className='container px-4 md:px-6 relative z-10'>
        <div className='grid gap-6 lg:grid-cols-[1fr_400px] lg:gap-12 xl:grid-cols-[1fr_500px]'>
          <div className='flex flex-col justify-center space-y-4'>
            <div className='space-y-2'>
              <h1 className='text-3xl font-bold tracking-tighter sm:text-5xl xl:text-6xl/none'>
                <span className='premium-text-gradient'>
                  Master Coding Challenges.
                </span>{' '}
                <br />
                Ace Your Interviews.
              </h1>
              <p className='max-w-[600px] text-gray-400 md:text-xl'>
                Practice with thousands of coding challenges, prepare for
                technical interviews, and join a community of developers
                improving their skills together.
              </p>
            </div>
            <div className='flex flex-col gap-2 min-[400px]:flex-row'>
              <Button
                size='lg'
                className='gap-1 bg-premium-purple hover:bg-premium-highlight text-white'
              >
                Start Coding Now <ArrowRight className='h-4 w-4' />
              </Button>
              <Link to={'/problem-set'}>
                <Button
                  size='lg'
                  variant='outline'
                  className='border-premium-blue/50 bg-premium-darker text-white hover:bg-premium-blue/20 hover:text-premium-cyan'
                >
                  Explore Challenges
                </Button>
              </Link>
            </div>
            <div className='flex items-center space-x-4 text-sm'>
              <div className='flex items-center gap-1'>
                <CheckCircle className='h-4 w-4 text-premium-cyan' />
                <span>1000+ Problems</span>
              </div>
              <div className='flex items-center gap-1'>
                <CheckCircle className='h-4 w-4 text-premium-cyan' />
                <span>Daily Challenges</span>
              </div>
              <div className='flex items-center gap-1'>
                <CheckCircle className='h-4 w-4 text-premium-cyan' />
                <span>Multiple Languages</span>
              </div>
            </div>
          </div>
          <div className='flex items-center justify-center'>
            <CodeExample />
          </div>
        </div>
      </div>
    </section>
  );
}


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\components\LandingPage\HowItWorksSection.jsx
==============================

import { SectionHeader } from "./SectionHeader";
import { StepCard } from "./StepCard";


export function HowItWorksSection() {
  const steps = [
    {
      number: 1,
      title: 'Choose a Problem',
      description:
        'Browse our extensive library of coding challenges filtered by difficulty, topic, or company.',
    },
    {
      number: 2,
      title: 'Solve & Submit',
      description:
        'Write your solution in our interactive coding environment and submit it to see if it passes all test cases.',
    },
    {
      number: 3,
      title: 'Learn & Improve',
      description:
        'Review other solutions, participate in discussions, and track your progress as you improve.',
    },
  ];

  return (
    <section
      id='how-it-works'
      className='w-full py-12 md:py-24 lg:py-32 bg-premium-darker relative'
    >
      <div className='absolute inset-0 bg-gradient-to-t from-premium-blue/5 to-transparent'></div>
      <div className='container px-4 md:px-6 relative z-10'>
        <SectionHeader
          badge='How It Works'
          title='Simple. Effective. Rewarding.'
          description='Our platform is designed to make your coding practice efficient and enjoyable.'
        />
        <div className='mx-auto grid max-w-5xl grid-cols-1 gap-6 py-12 md:grid-cols-3'>
          {steps.map((step, index) => (
            <StepCard
              key={index}
              number={step.number}
              title={step.title}
              description={step.description}
              isLast={index === steps.length - 1}
            />
          ))}
        </div>
      </div>
    </section>
  );
}


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\components\LandingPage\PricingCard.jsx
==============================

import { CheckCircle } from 'lucide-react';
import { Button } from '@/components/ui/button';

export function PricingCard({
  name,
  description,
  price,
  period,
  features,
  buttonText,
  buttonVariant = 'primary',
  popular = false,
}) {
  return (
    <div
      className={`flex flex-col rounded-lg border ${
        popular ? 'border-premium-purple/50' : 'border-premium-blue/20'
      } bg-premium-darker p-6 shadow-lg relative`}
    >
      {popular && (
        <div className='absolute -top-4 left-0 right-0 mx-auto w-fit rounded-full bg-premium-purple px-3 py-1 text-xs font-medium text-white'>
          Most Popular
        </div>
      )}
      <div className='space-y-2'>
        <h3 className='text-2xl font-bold'>{name}</h3>
        <p className='text-gray-400'>{description}</p>
      </div>
      <div className='mt-4 space-y-2'>
        <div
          className={`text-4xl font-bold ${
            price === '$15' ? 'premium-text-gradient' : ''
          }`}
        >
          {price}
        </div>
        <p className='text-gray-400'>{period}</p>
      </div>
      <ul className='mt-6 space-y-2 text-sm'>
        {features.map((feature, index) => (
          <li key={index} className='flex items-center gap-2'>
            <CheckCircle className='h-4 w-4 text-premium-cyan' />
            <span>{feature}</span>
          </li>
        ))}
      </ul>
      <div className='mt-6'>
        <Button
          className={`w-full ${
            buttonVariant === 'highlight'
              ? 'bg-premium-purple hover:bg-premium-highlight text-white'
              : 'bg-premium-blue hover:bg-premium-purple text-white'
          }`}
        >
          {buttonText}
        </Button>
      </div>
    </div>
  );
}


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\components\LandingPage\PricingSection.jsx
==============================

import { CheckCircle } from 'lucide-react';
import { Button } from '@/components/ui/button';
import { SectionHeader } from './SectionHeader';
import { PricingCard } from './PricingCard';


export function PricingSection() {
  const pricingPlans = [
    {
      name: 'Free',
      description: 'Perfect for getting started',
      price: '$0',
      period: 'Forever free',
      features: [
        '100+ Basic Problems',
        'Community Discussions',
        'Basic Progress Tracking',
      ],
      buttonText: 'Get Started',
      buttonVariant: 'primary',
      popular: false,
    },
    {
      name: 'Pro',
      description: 'For serious programmers',
      price: '$15',
      period: 'per month',
      features: [
        'All Free Features',
        '1000+ Advanced Problems',
        'Company-specific Questions',
        'Advanced Analytics',
      ],
      buttonText: 'Subscribe',
      buttonVariant: 'highlight',
      popular: true,
    },
    {
      name: 'Enterprise',
      description: 'For teams and companies',
      price: 'Custom',
      period: 'Contact for pricing',
      features: [
        'All Pro Features',
        'Team Management',
        'Custom Problem Sets',
        'Dedicated Support',
      ],
      buttonText: 'Contact Sales',
      buttonVariant: 'primary',
      popular: false,
    },
  ];

  return (
    <section
      id='pricing'
      className='w-full py-12 md:py-24 lg:py-32 bg-premium-dark relative'
    >
      <div className='absolute inset-0 bg-gradient-to-b from-premium-blue/5 to-transparent'></div>
      <div className='container px-4 md:px-6 relative z-10'>
        <SectionHeader
          badge='Pricing'
          title='Simple, Transparent Pricing'
          description="Choose the plan that's right for you and start improving your coding skills today."
        />
        <div className='mx-auto grid max-w-5xl grid-cols-1 gap-6 py-12 md:grid-cols-3'>
          {pricingPlans.map((plan, index) => (
            <PricingCard
              key={index}
              name={plan.name}
              description={plan.description}
              price={plan.price}
              period={plan.period}
              features={plan.features}
              buttonText={plan.buttonText}
              buttonVariant={plan.buttonVariant}
              popular={plan.popular}
            />
          ))}
        </div>
      </div>
    </section>
  );
}


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\components\LandingPage\ProfileIcon.jsx
==============================

import { Link, useNavigate } from 'react-router-dom';
import { User, LogOut, UserCircle } from 'lucide-react';
import { useDispatch } from 'react-redux';
import { logout } from '@/features/auth/authSlice';
import {
  DropdownMenu,
  DropdownMenuContent,
  DropdownMenuItem,
  DropdownMenuLabel,
  DropdownMenuSeparator,
  DropdownMenuTrigger,
} from '@/components/ui/dropdown-menu';
import axios from '@/config/axiosConfig';
import { toast } from 'sonner';

const ProfileIcon = () => {
  const dispatch = useDispatch();

  const navigate = useNavigate();

  const handleLogout = () => {
    try {
      axios
        .post('/auth/logout')
        .then(() => {
          console.log('Successfully logged out');
          dispatch(logout());
          navigate('/', { replace: true });
          toast.success('Successfully logged out');
          
        })
        .catch((error) => {
          console.error('Logout failed:', error);
        });
    } catch (error) {
      console.log("error", error);
      toast.error('Logout failed. Please try again later.');
      // Handle error if the logout request fails
      throw new Error('Logout failed. Please try again later.');
    }
  };

  return (
    <DropdownMenu>
      <DropdownMenuTrigger asChild>
        <div className='w-8 h-8 rounded-full bg-premium-purple flex items-center justify-center hover:bg-premium-highlight cursor-pointer transition-colors'>
          <User className='h-5 w-5 text-white' />
        </div>
      </DropdownMenuTrigger>
      <DropdownMenuContent className='w-48' align='end'>
        <DropdownMenuLabel>Your Profile</DropdownMenuLabel>
        <DropdownMenuSeparator />
        <DropdownMenuItem asChild>
          <Link to='/profile' className='flex items-center cursor-pointer'>
            <UserCircle className='mr-2 h-4 w-4' />
            View Profile
          </Link>
        </DropdownMenuItem>
        <DropdownMenuSeparator />
        <DropdownMenuItem
          onClick={handleLogout}
          className='text-red-600 focus:text-red-600 cursor-pointer'
        >
          <LogOut className='mr-2 h-4 w-4' />
          Logout
        </DropdownMenuItem>
      </DropdownMenuContent>
    </DropdownMenu>
  );
};

export default ProfileIcon;


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\components\LandingPage\SectionHeader.jsx
==============================

export function SectionHeader({ badge, title, description }) {
  return (
    <div className='flex flex-col items-center justify-center space-y-4 text-center'>
      <div className='space-y-2'>
        {badge && (
          <div className='inline-block rounded-lg bg-premium-purple px-3 py-1 text-sm text-white'>
            {badge}
          </div>
        )}
        <h2 className='text-3xl font-bold tracking-tighter md:text-4xl'>
          <span className='premium-text-gradient'>{title}</span>
        </h2>
        <p className='max-w-[700px] text-gray-400 md:text-xl'>{description}</p>
      </div>
    </div>
  );
}


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\components\LandingPage\StepCard.jsx
==============================

export function StepCard({ number, title, description, isLast }) {
  return (
    <div className='flex flex-col items-center space-y-4 rounded-lg p-6 relative'>
      <div className='flex h-16 w-16 items-center justify-center rounded-full bg-premium-purple text-xl font-bold text-white animate-glow'>
        {number}
      </div>
      {!isLast && (
        <div className='h-full w-px bg-gradient-to-b from-premium-purple to-transparent absolute -bottom-6 left-1/2 transform -translate-x-1/2 md:hidden'></div>
      )}
      <h3 className='text-xl font-bold'>{title}</h3>
      <p className='text-center text-gray-400'>{description}</p>
    </div>
  );
}


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\components\Leaderboard\Leaderboard.jsx
==============================


import { useState, useMemo, useEffect } from "react"
import { Search, Trophy, Medal, Award } from "lucide-react"
import { Input } from "@/components/ui/input"
import { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from "@/components/ui/table"
import { Badge } from "@/components/ui/badge"
import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card"
import { Skeleton } from "@/components/ui/skeleton"
import { useGetLeaderBoardData } from "@/hooks/apis/leaderboard/useGetLeaderBoardData"
import { useSelector } from "react-redux"


const LeaderboardSkeleton = () => (
  <div className="space-y-4">
    <Skeleton className="h-10 w-full max-w-sm" />
    <div className="rounded-md border">
      <Table>
        <TableHeader>
          <TableRow>
            <TableHead className="w-16">Rank</TableHead>
            <TableHead>Full Name</TableHead>
            <TableHead className="hidden sm:table-cell">Username</TableHead>
            <TableHead className="text-right">Problems Solved</TableHead>
          </TableRow>
        </TableHeader>
        <TableBody>
          {Array.from({ length: 6 }).map((_, i) => (
            <TableRow key={i}>
              <TableCell>
                <Skeleton className="h-6 w-8" />
              </TableCell>
              <TableCell>
                <Skeleton className="h-6 w-32" />
              </TableCell>
              <TableCell className="hidden sm:table-cell">
                <Skeleton className="h-6 w-24" />
              </TableCell>
              <TableCell className="text-right">
                <Skeleton className="h-6 w-12 ml-auto" />
              </TableCell>
            </TableRow>
          ))}
        </TableBody>
      </Table>
    </div>
  </div>
)

const getRankIcon = (rank) => {
  switch (rank) {
    case 1:
      return <Trophy className="h-5 w-5 text-yellow-500" />
    case 2:
      return <Medal className="h-5 w-5 text-gray-400" />
    case 3:
      return <Award className="h-5 w-5 text-amber-600" />
    default:
      return null
  }
}

const getRankBadge = (rank) => {
  switch (rank) {
    case 1:
      return (
        <Badge variant="secondary" className="bg-yellow-100 text-yellow-800 border-yellow-300">
          🥇 1st
        </Badge>
      )
    case 2:
      return (
        <Badge variant="secondary" className="bg-gray-100 text-gray-800 border-gray-300">
          🥈 2nd
        </Badge>
      )
    case 3:
      return (
        <Badge variant="secondary" className="bg-amber-100 text-amber-800 border-amber-300">
          🥉 3rd
        </Badge>
      )
    default:
      return <span className="font-semibold text-muted-foreground">#{rank}</span>
  }
}

export default function Leaderboard() {
  const [searchTerm, setSearchTerm] = useState("")

  const [leaderboardDetails, setLeaderboardDetails] = useState(null);


  const auth = useSelector((state) => state.auth);

    const currentUsername = auth.username;


  const { isPending, isSuccess, error, leaderBoardData } =
    useGetLeaderBoardData();

  useEffect(() => {
    console.log('Leaderboard data fetched:', leaderBoardData);
    setLeaderboardDetails(leaderBoardData?.data);
  }, [leaderBoardData]);

  const filteredData = useMemo(() => {
    if (!searchTerm) return leaderboardDetails

    return leaderboardDetails.filter(
      (user) =>
        user.fullName.toLowerCase().includes(searchTerm.toLowerCase()) ||
        user.username.toLowerCase().includes(searchTerm.toLowerCase()),
    )
  }, [leaderboardDetails, searchTerm])



  console.log("ispending", isPending);

  return (
    <>
      {isPending ? (
        <LeaderboardSkeleton />
      ) : (
        <Card className='w-full max-w-4xl mx-auto'>
          <CardHeader>
            <CardTitle className='text-2xl font-bold text-center flex items-center justify-center gap-2'>
              <Trophy className='h-6 w-6 text-yellow-500' />
              Leaderboard
            </CardTitle>
          </CardHeader>
          <CardContent className='space-y-4'>
            {/* Search Filter */}
            <div className='relative max-w-sm'>
              <Search className='absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4' />
              <Input
                placeholder='Search by name or username...'
                value={searchTerm}
                onChange={(e) => setSearchTerm(e.target.value)}
                className='pl-10'
              />
            </div>

            {/* Leaderboard Table */}
            <div className='rounded-md border'>
              <Table>
                <TableHeader>
                  <TableRow>
                    <TableHead className='w-16'>Rank</TableHead>
                    <TableHead>Full Name</TableHead>
                    <TableHead className='hidden sm:table-cell'>
                      Username
                    </TableHead>
                    <TableHead className='text-right'>
                      Problems Solved
                    </TableHead>
                  </TableRow>
                </TableHeader>
                <TableBody>
                  {filteredData?.length === 0 ? (
                    <TableRow>
                      <TableCell
                        colSpan={4}
                        className='text-center py-8 text-muted-foreground'
                      >
                        {searchTerm
                          ? 'No users found matching your search.'
                          : 'No data available.'}
                      </TableCell>
                    </TableRow>
                  ) : (
                    filteredData?.map((user) => {
                      const isCurrentUser = user.username === currentUsername;

                      return (
                        <TableRow
                          key={user.username}
                          className={`${
                            isCurrentUser
                              ? 'bg-blue-50 border-blue-200 dark:bg-blue-950/20 dark:border-blue-800'
                              : ''
                          } hover:bg-muted/50 transition-colors`}
                        >
                          <TableCell className='font-medium'>
                            <div className='flex items-center gap-2'>
                              {getRankIcon(user.rank)}
                              {getRankBadge(user.rank)}
                            </div>
                          </TableCell>
                          <TableCell>
                            <div className='flex flex-col'>
                              <div className='flex items-center gap-2'>
                                <span className='font-medium'>
                                  {user.fullName}
                                </span>
                                {isCurrentUser && (
                                  <Badge
                                    variant='outline'
                                    className='text-xs bg-blue-100 text-blue-800 border-blue-300'
                                  >
                                    You
                                  </Badge>
                                )}
                              </div>
                              {/* Show username on mobile when hidden in separate column */}
                              <span className='text-sm text-muted-foreground sm:hidden'>
                                @{user.username}
                              </span>
                            </div>
                          </TableCell>
                          <TableCell className='hidden sm:table-cell text-muted-foreground'>
                            @{user.username}
                          </TableCell>
                          <TableCell className='text-right'>
                            <div className='flex items-center justify-end gap-1'>
                              <span className='font-semibold text-lg'>
                                {user.problemsSolved}
                              </span>
                              <span className='text-sm text-muted-foreground'>
                                solved
                              </span>
                            </div>
                          </TableCell>
                        </TableRow>
                      );
                    })
                  )}
                </TableBody>
              </Table>
            </div>

            {/* Stats Summary */}
            {filteredData?.length > 0 && (
              <div className='flex flex-wrap gap-4 pt-4 border-t'>
                <div className='text-sm text-muted-foreground'>
                  <span className='font-medium'>{filteredData.length}</span>{' '}
                  users shown
                </div>
                <div className='text-sm text-muted-foreground'>
                  Top performer:{' '}
                  <span className='font-medium'>
                    {filteredData[0]?.fullName}
                  </span>{' '}
                  with{' '}
                  <span className='font-medium'>
                    {filteredData[0]?.problemsSolved}
                  </span>{' '}
                  problems solved
                </div>
              </div>
            )}
          </CardContent>
        </Card>
      )}
    </>
  );
}


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\components\ProblemForm\CodeSnippet.jsx
==============================

import React, { Suspense, lazy } from 'react';
import { Card } from '@/components/ui/card';

// Lazy load the Monaco editor component
const MonacoEditor = lazy(() => import('@monaco-editor/react'));

/**
 * CodeSnippet component that renders a Monaco editor
 * @param {Object} props
 * @param {string} props.code - The code to display in the editor
 * @param {function} props.onChange - Function to call when code changes
 * @param {string} props.language - The programming language for syntax highlighting
 * @param {string} props.label - Label for the code editor
 */
export default function CodeSnippet({ code, onChange, language, label }) {
  
  // console.log("code", code);
  
  return (
    <div className='space-y-2'>
      <label className='block text-sm font-medium'>{label}</label>
      <Card className='border rounded-md overflow-hidden'>
        <Suspense
          fallback={
            <div className='h-400 bg-slate-800 flex items-center justify-center'>
              <div className='animate-pulse text-slate-300'>
                Loading editor...
              </div>
            </div>
          }
        >
          <MonacoEditor
            height='400px'
            language={language}
            value={code}
            onChange={(newValue) => {
              // console.log('Updated code:', newValue);
              onChange(newValue);
            }}
            theme='vs-dark'
            options={{
              minimap: { enabled: false },
              scrollBeyondLastLine: false,
              fontSize: 14,
              tabSize: 2,
              theme: 'vs-dark',
              backgroundColor: '#1e293b',
            }}
          />
        </Suspense>
      </Card>
      <p className='text-xs text-gray-500'>
        Use the code editor to write your {language} code.
      </p>
    </div>
  );
}


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\components\ProblemForm\Examples.jsx
==============================

import { Button } from '../ui/button';
import { Input } from '../ui/input';
import InputField from './InputField';

// interface ExamplesProps {
//   example: {
//     input: string
//     output: string
//     explanation: string
//   }
//   onChange: (field: string, value: string) => void
// }

export default function Examples({ example, onChange, onRemove }) {
  return (
    <div className='space-y-4 border p-4 rounded-md'>
      <Input
        label='Input'
        value={example.input}
        onChange={(e) => onChange('input', e.target.value)}
        placeholder='Enter example input'
      />
      <Input
        label='Output'
        value={example.output}
        onChange={(e) => onChange('output', e.target.value)}
        placeholder='Enter example output'
      />
      <Input
        label='Explanation'
        value={example.explanation}
        onChange={(e) => onChange('explanation', e.target.value)}
        placeholder='Enter example explanation'
        multiline
      />
      <Button onClick={onRemove} size='sm' variant='destructive'>
        Remove Example
      </Button>
    </div>
  );
}

==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\components\ProblemForm\InputField.jsx
==============================


import { useState } from "react"
import { Input } from "@/components/ui/input"
import { Textarea } from "@/components/ui/textarea"
import { cn } from "@/lib/utils"

// interface InputFieldProps {
//   label: string
//   value: string
//   onChange: (value: string) => void
//   placeholder?: string
//   multiline?: boolean
//   required?: boolean
//   className?: string
// }

export default function InputField({
  label,
  value,
  onChange,
  placeholder = "",
  multiline = false,
  required = false,
  className,
}) {
  const [isFocused, setIsFocused] = useState(false)
  const [isTouched, setIsTouched] = useState(false)

  const showError = required && isTouched && !value

  return (
    <div className={cn("space-y-2", className)}>
      <div className="flex justify-between">
        <label className="block text-sm font-medium">
          {label}
          {required && <span className="text-red-500 ml-1">*</span>}
        </label>
        {showError && <span className="text-xs text-red-500">This field is required</span>}
      </div>

      {multiline ? (
        <Textarea
          value={value}
          onChange={(e) => onChange(e.target.value)}
          placeholder={placeholder}
          className={cn("min-h-[120px]", showError && "border-red-500 focus-visible:ring-red-500")}
          onFocus={() => setIsFocused(true)}
          onBlur={() => {
            setIsFocused(false)
            setIsTouched(true)
          }}
        />
      ) : (
        <Input
          type="text"
          value={value}
          onChange={(e) => onChange(e.target.value)}
          placeholder={placeholder}
          className={cn(showError && "border-red-500 focus-visible:ring-red-500")}
          onFocus={() => setIsFocused(true)}
          onBlur={() => {
            setIsFocused(false)
            setIsTouched(true)
          }}
        />
      )}
    </div>
  )
}


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\components\ProblemForm\ProblemForm.jsx
==============================

import { useEffect, useState } from 'react';
import { Button } from '@/components/ui/button';
import { Card, CardContent } from '@/components/ui/card';
import { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';
import InputField from './InputField';
import CodeSnippet from './CodeSnippet';
import TestCase from './TestCase';
import Examples from './Examples';
import { LucideLoader2, PlusCircle, Save, Trash2 } from 'lucide-react';
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from '@/components/ui/select';
import { Badge } from '@/components/ui/badge';
import { Input } from '@/components/ui/input';
import { toast } from 'sonner';
import { useCreateProblem } from '@/hooks/apis/createProblem/useCreateProblem';
import { useNavigate } from 'react-router-dom';
import { FaCheck } from 'react-icons/fa';
import { useUpdateProblemDetails } from '@/hooks/apis/updateProblemDetails/useUpdateProblemDetails';
// import { toast } from "@/hooks/use-toast"
// import { useTheme } from "next-themes"

// Define the problem structure
// interface Problem {
//   title: string
//   description: string
//   difficulty: "EASY" | "MEDIUM" | "HARD"
//   tags: string[]
//   examples: {
//     [language: string]: {
//       input: string
//       output: string
//       explanation: string
//     }
//   }
//   constraints: string
//   testcases: {
//     input: string
//     output: string
//   }[]
//   codeSnippets: {
//     [language: string]: string
//   }
//   referenceSolutions: {
//     [language: string]: string
//   }
// }

const SUPPORTED_LANGUAGES = ['PYTHON', 'JAVASCRIPT', 'JAVA'];

export default function ProblemForm({ mode, problemInfo, isSuccessProblemInfo }) {
  // const [problemDetails, setProblemDetails] = useState({
  //   problemNumber: 42,
  //   problem: {
  //     title: 'Reverse Number For Test-2-update',
  //     description:
  //       'Given an integer n, return the number obtained by reversing its digits. Handle negative numbers appropriately.',
  //     difficulty: 'EASY',
  //     tags: ['math', 'string', 'number-theory'],
  //     examples: [
  //       {
  //         input: '-123',
  //         output: '-321',
  //         explanation: 'Reversing -123 gives -321.',
  //       },
  //       {
  //         input: '456',
  //         output: '654',
  //         explanation: 'Reversing 456 gives 654.',
  //       },
  //     ],
  //     constraints: '-10^9 ≤ n ≤ 10^9',
  //     codeSnippets: {
  //       python:
  //         'def reverse_number(n):\n    # Write your code here\n    return 0\n\nimport sys\nn = int(sys.stdin.read())\nprint(reverse_number(n))',
  //       javascript:
  //         "const fs = require('fs');\n\nfunction reverseNumber(n) {\n    // Write your code here\n    return 0;\n}\n\nconst input = fs.readFileSync(0, 'utf-8').trim();\nconst n = Number(input);\nconsole.log(reverseNumber(n));",
  //       java: 'import java.util.Scanner;\n\npublic class Main {\n    public static int reverseNumber(int n) {\n        // Write your code here\n        return 0;\n    }\n\n    public static void main(String[] args) {\n        Scanner sc = new Scanner(System.in);\n        int n = sc.nextInt();\n        System.out.println(reverseNumber(n));\n    }\n}',
  //     },
  //     referenceSolutions: {
  //       python:
  //         'import sys\nn = int(sys.stdin.read())\n\ndef reverse_number(n):\n    sign = -1 if n < 0 else 1\n    reversed_str = str(abs(n))[::-1]\n    print(sign * int(reversed_str))\n\nreverse_number(n)',
  //       javascript:
  //         "const fs = require('fs');\nconst input = fs.readFileSync(0, 'utf-8').trim();\nconst n = Number(input);\n\nfunction reverseNumber(n) {\n    const sign = n < 0 ? -1 : 1;\n    const reversed = Math.abs(n).toString().split('').reverse().join('');\n    return sign * parseInt(reversed);\n}\n\nconsole.log(reverseNumber(n));",
  //       java: 'import java.util.Scanner;\n\npublic class Main {\n    public static void main(String[] args) {\n        Scanner sc = new Scanner(System.in);\n        int n = sc.nextInt();\n        int sign = n < 0 ? -1 : 1;\n        String reversed = new StringBuilder(Integer.toString(Math.abs(n))).reverse().toString();\n        System.out.println(sign * Integer.parseInt(reversed));\n    }\n}',
  //     },
  //   },
  //   testCases: [
  //     {
  //       input: '123',
  //       expected: '321',
  //       isPublic: false,
  //     },
  //     {
  //       input: '-456',
  //       expected: '-654',
  //       isPublic: false,
  //     },
  //     {
  //       input: '1000',
  //       expected: '1',
  //       isPublic: true,
  //     },
  //     {
  //       input: '0',
  //       expected: '0',
  //       isPublic: true,
  //     },
  //   ],
  // });

  // Transform examples object to array format for rendering
  // Extract examples from the language-keyed object and convert to array

  // const [problem, setProblem] = useState({
  //   title: '',
  //   problemNumber: '',
  //   description: '',
  //   difficulty: 'EASY',
  //   tags: [],
  //   examples: [
  //     { input: '', output: '', explanation: '' }, // Start with one example
  //   ],
  //   constraints: '',
  //   testcases: [{ input: '', output: '' }],
  //   codeSnippets: {
  //     PYTHON: '',
  //     JAVASCRIPT: '',
  //     JAVA: '',
  //   },
  //   referenceSolutions: {
  //     PYTHON: '',
  //     JAVASCRIPT: '',
  //     JAVA: '',
  //   },
  // });

  console.log('problemInfo', problemInfo);


  console.log('isSuccessProblemInfo', isSuccessProblemInfo);

  const [problemDetails, setProblemDetails] = useState({
    problemNumber: problemInfo?.problemNumber || '',
    problem: {
      title: problemInfo?.title || '',
      description: problemInfo?.description || '',
      difficulty: problemInfo?.difficulty || 'EASY',
      tags: problemInfo?.tags || [],
      companyTags: problemInfo?.companyTags || [],
      examples: problemInfo?.examples?.map((example) => ({
        input: example.input || '',
        output: example.output || '',
        explanation: example.explanation || '',
      })) || [
        {
          input: '',
          output: '',
          explanation: '',
        },
      ],
      constraints: problemInfo?.constraints || '',
      hints: problemInfo?.hints || '',
      editorial: problemInfo?.editorial || '',
      codeSnippets: {
        python: problemInfo?.codeSnippets?.python || '',
        javascript: problemInfo?.codeSnippets?.javascript || '',
        java: problemInfo?.codeSnippets?.java || '',
      },
      referenceSolutions: {
        java: problemInfo?.referenceSolutions?.java || '',
        javascript: problemInfo?.referenceSolutions?.javascript || '',
        python: problemInfo?.referenceSolutions?.python || '',
      },
    },
    testCases: problemInfo?.testCases?.map((testCase) => ({
      input: testCase.input || '',
      expected: testCase.expected || '',
      isPublic: testCase.isPublic || false, // This field doesn't exist in your problemInfo, so defaulting to false
    })) || [
      {
        input: '',
        expected: '',
        isPublic: false,
      },
    ],
  });

  console.log("problemDetails", problemDetails);
  const examplesArray = problemDetails.problem.examples || [];

  const [newTag, setNewTag] = useState('');
  const [companyNewTags, setCompanyNewTags] = useState(''); // For company tags
  // const { theme } = useTheme()

  const [exampleCount, setExampleCount] = useState(1);

  // Update problemDetails field
  const updateProblem = (field, value, scope = 'problem') => {
    setProblemDetails((prev) => {
      if (scope === 'root') {
        return { ...prev, [field]: value };
      }

      return {
        ...prev,
        [scope]: {
          ...prev[scope],
          [field]: value,
        },
      };
    });
  };

  // Add a new tag
  const addTag = () => {
    if (newTag && !problemDetails.problem.tags.includes(newTag)) {
      updateProblem('tags', [...problemDetails.problem.tags, newTag]);
      setNewTag('');
    }
  };

  const addCompanyTag = () => {
    if (companyNewTags && !problemDetails.problem.companyTags.includes(companyNewTags)) {
      updateProblem('companyTags', [
        ...problemDetails.problem.companyTags,
        companyNewTags,
      ]);
      setCompanyNewTags('');
    }
  };

  // Remove a tag
  const removeTag = (tag) => {
    updateProblem(
      'tags',
      problemDetails.problem.tags.filter((t) => t !== tag)
    );
  };

  const removeCompanyTag = (tag) => {
    updateProblem(
      'companyTags',
      problemDetails.problem.companyTags.filter((t) => t !== tag)
    );
  };


  // Add a new test case
  const addTestCase = () => {
    updateProblem(
      'testCases',
      [
        ...problemDetails.testCases,
        { input: '', expected: '', isPublic: false },
      ],
      'root'
    );
  };

  // Update a test case using the correct key and root scope
  const updateTestCase = (index, field, value) => {
    const updatedTestCases = [...problemDetails.testCases];
    updatedTestCases[index] = {
      ...updatedTestCases[index],
      [field]: value,
    };

    // Use "testCases" (capital C) and specify the "root" scope
    updateProblem('testCases', updatedTestCases, 'root');
  };

  // Remove a test case
  const removeTestCase = (index) => {
    const updatedTestCases = problemDetails.testCases.filter(
      (_, i) => i !== index
    );
    updateProblem('testCases', updatedTestCases, 'root');
  };

  // Update code snippet for a language
  const updateCodeSnippet = (language, code) => {
    setProblemDetails((prev) => ({
      ...prev,
      problem: {
        ...prev.problem,
        codeSnippets: {
          ...prev.problem.codeSnippets,
          [language]: code,
        },
      },
    }));
  };

  // Update reference solution for a language
  const updateReferenceSolution = (language, code) => {
    setProblemDetails((prev) => ({
      ...prev,
      problem: {
        ...prev.problem,
        referenceSolutions: {
          ...prev.problem.referenceSolutions,
          [language]: code,
        },
      },
    }));
  };

  // Update example for a language
  const updateExample = (language, field, value) => {
    setProblemDetails((prev) => ({
      ...prev,
      examples: {
        ...prev.examples,
        [language]: {
          ...prev.examples[language],
          [field]: value,
        },
      },
    }));
  };

  const { isPending, isSuccess, error, createProblemMutation } =
    useCreateProblem();
  // console.log('problemDetails', problemDetails);

  const {isLoading, isSuccess: updateProblemSuccess, error: updateProblemError, updateProblemMutation} = useUpdateProblemDetails()

  const navigate = useNavigate();
  // Handle form submission
  const handleSubmit = async () => {
    // Validate form
    if (!problemDetails.problem.title || !problemDetails.problem.description) {
      toast.warning('Missing required fields');
      return;
    }

    // Optionally convert problemNumber to a number
    const payload = {
      problemNumber: Number(problemDetails.problemNumber),
      problem: problemDetails.problem,
      testCases: problemDetails.testCases,
    };

    // Log the payload
    // console.log('payload ', JSON.stringify(payload, null, 2));

    // Pass the correct payload to your mutation
    await createProblemMutation(payload);

    // Notify user on success
    toast.success('Your problem has been created and saved.');
  };

  const handleUpdate = async () => {
    // Validate form
    if (!problemDetails.problem.title || !problemDetails.problem.description) {
      toast.warning('Missing required fields');
      return;
    }
    const problemId = problemInfo.id;
    // console.log('problemId', problemId);
    // Optionally convert problemNumber to a number
    const payload = {
      problemNumber: Number(problemDetails.problemNumber),
      problem: problemDetails.problem,
      testCases: problemDetails.testCases,
    };

    console.log("payload ", payload);
    await updateProblemMutation({ problemId: problemId, ...payload });
    toast.success('Your problem has been updated.');

  }

  
  useEffect(() => {
    if (isSuccess) {
      setTimeout(() => {
        navigate('/problem-set');
      }, 1500);
    }
  }, [isSuccess, navigate]);

  useEffect(() => {
    if (updateProblemSuccess) {
      setTimeout(() => {
        navigate('/problem-set');
      }, 1500);
    }
  }, [updateProblemSuccess, navigate]);

  return (
    <div className='container mx-auto py-8 bg-premium-darker text-slate-50'>
      {mode == 'create' ? (
        <h1 className='text-3xl font-bold mb-6'>Create New Problem</h1>
      ) : (
        <h1 className='text-3xl font-bold mb-6'>Update Problem</h1>
      )}

      <div className='space-y-8'>
        {/* Basic Information */}
        <Card className='bg-green-900 border border-blue-800/20 text-white shadow-lg premium-border-gradient'>
          <CardContent className='pt-6'>
            {isSuccess && (
              <div className='bg-primary/15 p-3 rounded-md flex items-center gap-x-2 text-sm text-primary mb-5'>
                <FaCheck className='size-8 fill-green-500' />
                <p className='text-sm text-white'>
                  Successfully signed in. You will be redirected to the problem
                  page in a few seconds.
                  <LucideLoader2 className='animate-spin ml-2' />
                </p>
              </div>
            )}
            <h2 className='text-xl font-semibold mb-4'>Basic Information</h2>
            <div className='space-y-4'>
              <InputField
                label='Title'
                value={problemDetails.problem.title}
                onChange={(value) => updateProblem('title', value)}
                placeholder='Enter problem title'
                required
              />

              <InputField
                label='Problem Number'
                value={problemDetails.problemNumber}
                onChange={(value) =>
                  updateProblem('problemNumber', value, 'root')
                }
                placeholder='Enter problem number'
                required
              />

              <InputField
                label='Description'
                value={problemDetails.problem.description}
                onChange={(value) => updateProblem('description', value)}
                placeholder='Enter problem description'
                multiline
                required
              />

              <div className='grid grid-cols-1 md:grid-cols-2 gap-4'>
                <div>
                  <label className='block text-sm font-medium mb-1'>
                    Difficulty
                  </label>
                  <Select
                    value={problemDetails.problem.difficulty}
                    onValueChange={(value) =>
                      updateProblem('difficulty', value)
                    }
                  >
                    <SelectTrigger>
                      <SelectValue placeholder='Select difficulty' />
                    </SelectTrigger>
                    <SelectContent>
                      <SelectItem value='EASY'>Easy</SelectItem>
                      <SelectItem value='MEDIUM'>Medium</SelectItem>
                      <SelectItem value='HARD'>Hard</SelectItem>
                    </SelectContent>
                  </Select>
                </div>

                <div>
                  <label className='block text-sm font-medium mb-1'>Tags</label>
                  <div className='flex gap-2'>
                    <Input
                      value={newTag}
                      onChange={(e) => setNewTag(e.target.value)}
                      placeholder='Add a tag'
                      className='flex-1'
                      onKeyDown={(e) => {
                        if (e.key === 'Enter') {
                          e.preventDefault();
                          addTag();
                        }
                      }}
                    />
                    <Button type='button' onClick={addTag} size='sm'>
                      Add
                    </Button>
                  </div>
                  <div className='flex flex-wrap gap-2 mt-2'>
                    {problemDetails.problem.tags.map((tag) => (
                      <Badge
                        key={tag}
                        variant='secondary'
                        className='flex items-center gap-1'
                      >
                        {tag}
                        <button
                          type='button'
                          onClick={() => removeTag(tag)}
                          className='text-xs hover:text-destructive'
                        >
                          <Trash2 size={14} />
                        </button>
                      </Badge>
                    ))}
                  </div>
                </div>
              </div>
              <div>
                <label className='block text-sm font-medium mb-1'>
                  Company Tags
                </label>
                <div className='flex gap-2'>
                  <Input
                    value={companyNewTags}
                    onChange={(e) => setCompanyNewTags(e.target.value)}
                    placeholder='Add a tag'
                    className='flex-1'
                    onKeyDown={(e) => {
                      if (e.key === 'Enter') {
                        e.preventDefault();
                        addCompanyTag();
                      }
                    }}
                  />
                  <Button type='button' onClick={addCompanyTag} size='sm'>
                    Add
                  </Button>
                </div>
                <div className='flex flex-wrap gap-2 mt-2'>
                  {problemDetails.problem.companyTags.map((tag) => (
                    <Badge
                      key={tag}
                      variant='secondary'
                      className='flex items-center gap-1'
                    >
                      {tag}
                      <button
                        type='button'
                        onClick={() => removeCompanyTag(tag)}
                        className='text-xs hover:text-destructive'
                      >
                        <Trash2 size={14} />
                      </button>
                    </Badge>
                  ))}
                </div>
              </div>

              <InputField
                label='Constraints'
                value={problemDetails.problem.constraints}
                onChange={(value) => updateProblem('constraints', value)}
                placeholder='Enter problem constraints'
                multiline
              />
            </div>
          </CardContent>
        </Card>

        {/* Examples */}
        <Card className='bg-green-900 border border-blue-800/20 text-white shadow-lg premium-border-gradient'>
          <CardContent className='pt-6'>
            <div className='flex justify-between items-center mb-4'>
              <h2 className='text-xl font-semibold'>Examples</h2>
              <Button
                onClick={() => {
                  const updatedExamples = [
                    ...examplesArray,
                    { input: '', output: '', explanation: '' },
                  ];
                  updateProblem('examples', updatedExamples);
                }}
                size='sm'
                variant='outline'
                className='bg-zinc-800'
              >
                <PlusCircle size={16} className='mr-2' />
                Add Example
              </Button>
            </div>

            {examplesArray.map((example, index) => (
              <Examples
                key={index}
                example={example}
                onChange={(field, value) => {
                  const updatedExamples = [...examplesArray];
                  updatedExamples[index] = {
                    ...updatedExamples[index],
                    [field]: value,
                  };
                  updateProblem('examples', updatedExamples);
                }}
                onRemove={() => {
                  const updatedExamples = examplesArray.filter(
                    (_, i) => i !== index
                  );
                  updateProblem('examples', updatedExamples);
                }}
              />
            ))}
          </CardContent>
        </Card>

        {/* Test Cases */}
        <Card className='bg-green-900 border border-blue-800/20 text-white shadow-lg premium-border-gradient'>
          <CardContent className='pt-6'>
            <div className='flex justify-between items-center mb-4'>
              <h2 className='text-xl font-semibold'>Test Cases</h2>
              <Button
                onClick={addTestCase}
                size='sm'
                variant='outline'
                className='bg-zinc-800'
              >
                <PlusCircle size={16} className='mr-2' />
                Add Test Case
              </Button>
            </div>

            <div className='space-y-4 '>
              {problemDetails.testCases.map((testcase, index) => (
                <TestCase
                  key={index}
                  testCase={testcase}
                  index={index}
                  onChange={updateTestCase}
                  onRemove={() => removeTestCase(index)}
                />
              ))}
            </div>
          </CardContent>
        </Card>

        {/* Code Snippets */}
        <Card className='bg-green-900 border border-blue-800/20 text-white shadow-lg premium-border-gradient'>
          <CardContent className='pt-6'>
            <h2 className='text-xl font-semibold mb-4'>Code Snippets</h2>
            <Tabs defaultValue='PYTHON'>
              <TabsList className='mb-4'>
                {SUPPORTED_LANGUAGES.map((lang) => (
                  <TabsTrigger key={lang} value={lang}>
                    {lang}
                  </TabsTrigger>
                ))}
              </TabsList>

              {SUPPORTED_LANGUAGES.map((lang) => (
                <TabsContent key={lang} value={lang}>
                  <CodeSnippet
                    code={
                      problemDetails.problem.codeSnippets[lang.toLowerCase()]
                    }
                    onChange={(code) =>
                      updateCodeSnippet(lang.toLowerCase(), code)
                    }
                    language={lang.toLowerCase()}
                    label='Starter Code'
                  />
                </TabsContent>
              ))}
            </Tabs>
          </CardContent>
        </Card>

        {/* Reference Solutions */}
        <Card className='bg-green-900 border border-blue-800/20 text-white shadow-lg premium-border-gradient'>
          <CardContent className='pt-6'>
            <h2 className='text-xl font-semibold mb-4'>Reference Solutions</h2>
            <Tabs defaultValue='PYTHON'>
              <TabsList className='mb-4'>
                {SUPPORTED_LANGUAGES.map((lang) => (
                  <TabsTrigger key={lang} value={lang}>
                    {lang}
                  </TabsTrigger>
                ))}
              </TabsList>

              {SUPPORTED_LANGUAGES.map((lang) => (
                <TabsContent key={lang} value={lang}>
                  <CodeSnippet
                    code={
                      problemDetails.problem.referenceSolutions[
                        lang.toLowerCase()
                      ]
                    }
                    onChange={(code) =>
                      updateReferenceSolution(lang.toLowerCase(), code)
                    }
                    language={lang.toLowerCase()}
                    label='Reference Solution'
                  />
                </TabsContent>
              ))}
            </Tabs>
          </CardContent>
        </Card>

        {/* Submit Button */}

        <div className='flex justify-end'>
          {mode == 'create' ? (
            <Button onClick={handleSubmit} size='lg'>
              <Save size={18} className='mr-2' />
              Create Problem
            </Button>
          ) : (
            <Button onClick={handleUpdate} size='lg'>
              <Save size={18} className='mr-2' />
              Update Problem
            </Button>
          )}
        </div>
      </div>
    </div>
  );
}


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\components\ProblemForm\TestCase.jsx
==============================

import { Card, CardContent } from '@/components/ui/card';
import { Input } from '@/components/ui/input';
import { Button } from '@/components/ui/button';
import { Trash2 } from 'lucide-react';
import { Switch } from '@/components/ui/switch';
import { Label } from '@/components/ui/label';

// interface TestCaseProps {
//   testCase: {
//     input: string
//     output: string
//     isPublic: boolean
//   }
//   index: number
//   onChange: (index: number, field: string, value: string | boolean) => void
//   onRemove: (index: number) => void
//   isAdmin?: boolean
// }

export default function TestCase({
  testCase,
  index,
  onChange,
  onRemove,
  isAdmin = true,
}) {
  return (
    <Card className='bg-premium-darker border border-premium-blue text-white shadow-lg premium-border-gradient'>
      <CardContent className='p-4'>
        <div className='flex justify-between items-center mb-3'>
          <h3 className='font-medium'>Test Case #{index + 1}</h3>
          <div className='flex items-center gap-4'>
            {isAdmin && (
              <div className='flex items-center gap-2'>
                <Switch
                  id={`test-case-visibility-${index}`}
                  checked={testCase.isPublic}
                  onCheckedChange={(checked) =>
                    onChange(index, 'isPublic', checked)
                  }
                  className='data-[state=checked]:bg-green-500'
                />
                <Label
                  htmlFor={`test-case-visibility-${index}`}
                  className='text-sm font-medium'
                >
                  {testCase.isPublic ? 'Public' : 'Private'}
                </Label>
              </div>
            )}

            {index > 0 && (
              <Button
                variant='ghost'
                size='sm'
                onClick={() => onRemove(index)}
                className='h-8 px-2 text-destructive hover:text-destructive hover:bg-destructive/10'
              >
                <Trash2 size={16} />
              </Button>
            )}
          </div>
        </div>

        <div className='grid grid-cols-1 md:grid-cols-2 gap-4'>
          <div className='space-y-2'>
            <label className='block text-sm font-medium'>Input</label>
            <Input
              value={testCase.input}
              onChange={(e) => onChange(index, 'input', e.target.value)}
              placeholder='Enter test case input'
            />
          </div>

          <div className='space-y-2'>
            <label className='block text-sm font-medium'>Expected Output</label>
            <Input
              value={testCase.expected}
              onChange={(e) => onChange(index, 'expected', e.target.value)}
              placeholder='Enter expected output'
            />
          </div>
        </div>
      </CardContent>
    </Card>
  );
}


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\components\ProblemSet\AllProblem.jsx
==============================

import { useState, useEffect } from 'react';
import {
  Search,
  Filter,
  Plus,
  ArrowLeft,
  MoreVertical,
  Pencil,
  Trash2,
} from 'lucide-react';
import { Button } from '@/components/ui/button';
import { Input } from '@/components/ui/input';
import { Badge } from '@/components/ui/badge';
import { Card, CardFooter, CardHeader, CardTitle } from '@/components/ui/card';
import { Link } from 'react-router-dom';
import { useSelector } from 'react-redux';
import { useGetAllProblems } from '@/hooks/apis/getAllProblems/useGetAllProblems';
import {
  DropdownMenu,
  DropdownMenuContent,
  DropdownMenuItem,
  DropdownMenuTrigger,
} from '@/components/ui/dropdown-menu';
import {
  AlertDialog,
  AlertDialogAction,
  AlertDialogCancel,
  AlertDialogContent,
  AlertDialogDescription,
  AlertDialogFooter,
  AlertDialogHeader,
  AlertDialogTitle,
} from '@/components/ui/alert-dialog';
import { useDeleteProblem } from '@/hooks/apis/deleteProblem/useDeleteProblem';
import Navbar from './NavBar';
import { set } from 'date-fns';
// Mock data for demonstration


const topics = [
  { name: 'All Topics', icon: null },
  { name: 'Algorithms', icon: null },
  { name: 'Database', icon: null },
  { name: 'Shell', icon: null },
  { name: 'Concurrency', icon: null },
  { name: 'JavaScript', icon: null },
  { name: 'pandas', icon: null },
];

// const problems = [
//   {
//     id: 1550,
//     title: 'Three Consecutive Odds',
//     difficulty: 'Easy',
//     completion: 68.9,
//   },
//   { id: 1, title: 'Two Sum', difficulty: 'Easy', completion: 55.5 },
//   { id: 2, title: 'Add Two Numbers', difficulty: 'Medium', completion: 45.9 },
//   {
//     id: 3,
//     title: 'Longest Substring Without Repeating Characters',
//     difficulty: 'Medium',
//     completion: 36.7,
//   },
//   {
//     id: 4,
//     title: 'Median of Two Sorted Arrays',
//     difficulty: 'Hard',
//     completion: 43.5,
//   },
//   {
//     id: 5,
//     title: 'Longest Palindromic Substring',
//     difficulty: 'Medium',
//     completion: 35.6,
//   },
//   { id: 6, title: 'Zigzag Conversion', difficulty: 'Medium', completion: 51.3 },
//   { id: 7, title: 'Reverse Integer', difficulty: 'Medium', completion: 30.1 },
//   {
//     id: 8,
//     title: 'String to Integer (atoi)',
//     difficulty: 'Medium',
//     completion: 19.0,
//   },
//   {
//     id: 11,
//     title: 'Container With Most Water',
//     difficulty: 'Medium',
//     completion: 57.6,
//   },
//   { id: 12, title: 'Integer to Roman', difficulty: 'Medium', completion: 68.3 },
//   { id: 13, title: 'Roman to Integer', difficulty: 'Easy', completion: 64.6 },
//   {
//     id: 14,
//     title: 'Longest Common Prefix',
//     difficulty: 'Easy',
//     completion: 45.3,
//   },
// ];


export default function AllProblem() {
  const [problems, setProblems] = useState([]);
  const [isAdmin, setIsAdmin] = useState(false);
  const [searchQuery, setSearchQuery] = useState('');
  const [filteredProblems, setFilteredProblems] = useState(problems);
  const [selectedTopic, setSelectedTopic] = useState('All Topics');
  const [deleteConfirmOpen, setDeleteConfirmOpen] = useState(false);
  const [problemToDelete, setProblemToDelete] = useState(null);
  const [problemTopics, setProblemTopics] = useState([]);
  const [problemCategories, setProblemCategories] = useState([])

  // Add this somewhere to verify data is persisted
  const authUser = useSelector((state) => state.auth);
  console.log('Current auth state:', authUser);
  // Simulate checking if user is admin
  useEffect(() => {
    // In a real app, you would check user roles from authentication
    const checkIfAdmin = async () => {
      if (authUser?.role?.toLowerCase() === 'admin') {
        setIsAdmin(true);
      }
    };

    checkIfAdmin();
  }, []);

  const { isPending, isSuccess, error, getAllProblemsMutation } =
    useGetAllProblems();

  const { isLoading, isSuccess: deleteSuccess, error: deleteError, deleteProblemMutation } =
    useDeleteProblem();

  const getAllProblems = async () => {
    try {
      const userId = authUser?.id || null;
      const data = await getAllProblemsMutation(userId);
      console.log('Fetched all problems:', data);
      setProblems(data?.problems);
      setFilteredProblems(data?.problems);
      setProblemTopics(data?.problems?.tags || []);
      // setProblemCategories(data?.problems?.tags || [])
    } catch (error) {
      console.error('Error fetching problems:', error);
    }
  };

  useEffect(() => {
    getAllProblems();
    if (isSuccess) {
      console.log('Successfully fetched all problems');
    }
  }, []);

  console.log('isAdmin', isAdmin);

  // console.log('problems', problems);

  // Filter problems based on search query
  useEffect(() => {
    if (searchQuery.trim() === '') {
      setFilteredProblems(problems);
    } else {
      const query = searchQuery.toLowerCase();
      const filtered = problems.filter(
        (problem) =>
          problem.id.toString().includes(query) ||
          problem.title.toLowerCase().includes(query)
      );
      setFilteredProblems(filtered);
    }
  }, [searchQuery]);

  const getDifficultyColor = (difficulty) => {
    switch (difficulty) {
      case 'easy':
        return 'text-emerald-500';
      case 'medium':
        return 'text-amber-500';
      case 'hard':
        return 'text-red-500';
      default:
        return '';
    }
  };

  const [openDropdownId, setSetOpenDropdownId] = useState(null);


  const handleDeleteProblem = async (problemId) => {
    try {
      await deleteProblemMutation(problemId);

      setProblemToDelete(null);

      // After successful deletion, refresh the problems list
      await getAllProblems();
      
    } catch (error) {
      console.error('Error handling delete problem:', error);
    }
  };

  // const confirmDelete = async () => {
  //   try {
  //     // Add your delete API call here
  //     console.log('Deleting problem:', problemToDelete);

  //     await deleteProblemMutation(problemToDelete.id);

  //     // After successful deletion, refresh the problems list
  //     await getAllProblems();

  //     // Close the dialog
  //     // setDeleteConfirmOpen(false);
  //     setProblemToDelete(null);
  //   } catch (error) {
  //     console.error('Error deleting problem:', error);
  //   }
  // };



  return (
    <div className='min-h-screen bg-gray-950 text-gray-100'>
      {/* Navigation */}
      {/* <Navbar/> */}

      <div className='flex'>
        {/* Main content */}
        <main className='flex-1 p-6'>
          {/* Featured courses */}
          {/* <div className='grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8'>
            {featuredCourses.map((course, index) => (
              <Card
                key={index}
                className={`${course.color} text-white border-none overflow-hidden relative`}
              >
                <div className='absolute top-4 right-4 h-16 w-16 rounded-full opacity-20 bg-white'></div>
                <div
                  className={`absolute bottom-4 right-8 h-8 w-8 rounded-full ${course.dotColor}`}
                ></div>
                <CardHeader className='pb-2'>
                  <CardTitle className='text-lg font-medium'>
                    {course.title}
                    {course.badge && (
                      <Badge className='ml-2 bg-red-500 text-white'>
                        {course.badge}
                      </Badge>
                    )}
                  </CardTitle>
                  <p className='text-sm opacity-90'>{course.subtitle}</p>
                </CardHeader>
                <CardFooter>
                  <Button
                    variant='secondary'
                    size='sm'
                    className='text-xs bg-white/20 hover:bg-white/30 border-none'
                  >
                    {course.buttonText}
                  </Button>
                </CardFooter>
              </Card>
            ))}
          </div> */}

          {/* Problem categories */}
          {/* <div className='flex flex-wrap gap-4 mb-6'>
            {problemCategories.map((category, index) => (
              <div
                key={index}
                className='flex items-center space-x-2 bg-gray-900 px-3 py-1 rounded-full'
              >
                {console.log("category", category)}
                <span className='text-white'>{category.name}</span>
                <span className='text-gray-400 text-sm'>{category.count}</span>
              </div>
            ))}
          </div> */}

          {/* Topic filters */}
          <div className='mb-6'>
            <div className='flex flex-wrap gap-2'>
              {problemTopics.map((topic, index) => (
                <Button
                  key={index}
                  variant={selectedTopic === topic.name ? 'default' : 'outline'}
                  className={
                    selectedTopic === topic.name
                      ? 'bg-gray-700'
                      : 'bg-transparent text-gray-300 border-gray-700'
                  }
                  onClick={() => setSelectedTopic(topic.name)}
                >
                  {topic.name}
                </Button>
              ))}
            </div>
          </div>

          {/* Admin create button */}
          {isAdmin && (
            <div className='mb-6'>
              <Link to='/create-problem' state={{ mode: 'create' }}>
                <Button className='bg-green-600 hover:bg-green-700'>
                  <Plus className='mr-2 h-4 w-4' />
                  Create New Problem
                </Button>
              </Link>
            </div>
          )}

          {/* Search and filter */}
          <div className='flex items-center mb-6 gap-2'>
            <div className='relative flex-1'>
              <Search className='absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400' />
              <Input
                type='text'
                placeholder='Search questions'
                className='pl-10 bg-gray-900 border-gray-700 text-white'
                value={searchQuery}
                onChange={(e) => setSearchQuery(e.target.value)}
              />
            </div>
            {/* <Button variant='outline' className='border-gray-700'>
              <Filter className='h-4 w-4 mr-2 ' />
              <span>1</span>
            </Button> */}
            <div className='text-sm text-gray-400'>
              {filteredProblems.length} Qs
            </div>
          </div>

          {/* Problems list */}
          <div className='bg-gray-900 rounded-lg overflow-scroll h-[calc(100vh-20rem)]'>
            <div className='divide-y divide-gray-800'>
              {filteredProblems.map((problem, index) => (
                <div
                  key={index}
                  className='flex items-center p-4 hover:bg-gray-800'
                >
                  {/* Solved Status */}
                  <div className='w-6 mr-4 text-green-500'>
                    {problem.isSolved ? '✓' : ' '}
                  </div>

                  {/* Problem Title */}
                  <div className='flex-1 min-w-0'>
                    <div className='flex items-center'>
                      <span className='mr-2 text-gray-400'>
                        {problem.problemNumber}.
                      </span>
                      <Link
                        to={`/problems/${problem.id}`}
                        className='text-white hover:text-blue-400 truncate'
                      >
                        {problem.title}
                      </Link>
                    </div>
                  </div>

                  {/* Difficulty Column */}
                  <div className='w-20 mr-4 text-center'>
                    <span
                      className={`${getDifficultyColor(
                        problem.difficulty.toLowerCase()
                      )} text-sm font-medium`}
                    >
                      {problem.difficulty}
                    </span>
                  </div>

                  {/* Company Tags Column */}
                  <div className='w-48 mr-4 h-12 overflow-hidden'>
                    {problem?.companyTags && problem.companyTags.length > 0 && (
                      <div className='flex flex-wrap gap-1 justify-end h-full content-start'>
                        {problem.companyTags.map((company) => (
                          <Badge
                            key={company}
                            variant='outline'
                            className={`h-5 ${
                              company === 'Demo'
                                ? 'text-sm font-bold border-2 border-orange-400 text-orange-200 bg-gradient-to-r from-orange-600 to-red-500 shadow-lg shadow-orange-500/30 animate-pulse px-3 py-1'
                                : 'text-xs border-gray-600 text-gray-300'
                            }`}
                          >
                            {company}
                          </Badge>
                        ))}
                      </div>
                    )}
                  </div>

                  {/* Category Tags Column */}
                  <div className='w-56 mr-4 h-12 overflow-hidden'>
                    <div className='flex flex-wrap gap-1 justify-end h-full content-start'>
                      {problem.tags.map((topic) => (
                        <Badge
                          key={topic}
                          variant='outline'
                          className='text-xs border-gray-600 text-gray-300 h-5'
                        >
                          {topic}
                        </Badge>
                      ))}
                    </div>
                  </div>

                  {/* Admin Actions Column */}
                  {isAdmin && (
                    <div className='w-10 flex justify-center'>
                      <DropdownMenu
                        open={openDropdownId === problem.id}
                        onOpenChange={(open) => {
                          setSetOpenDropdownId(open ? problem.id : null);
                        }}
                      >
                        <DropdownMenuTrigger asChild>
                          <Button
                            variant='ghost'
                            size='icon'
                            className='h-8 w-8 text-gray-400 hover:text-white'
                          >
                            <MoreVertical className='h-4 w-4' />
                          </Button>
                        </DropdownMenuTrigger>
                        <DropdownMenuContent
                          align='end'
                          className='bg-gray-800 border-gray-700 text-white'
                        >
                          <DropdownMenuItem asChild>
                            <Link
                              to={`/edit-problem/${problem.id}`}
                              state={{ mode: 'update' }}
                              className='cursor-pointer hover:bg-gray-700 focus:bg-gray-700 flex items-center'
                            >
                              <Pencil className='mr-2 h-4 w-4' />
                              Update problem
                            </Link>
                          </DropdownMenuItem>
                          <DropdownMenuItem
                            className='cursor-pointer text-red-500 hover:bg-gray-700 focus:bg-gray-700'
                            onClick={(e) => {
                              e.stopPropagation();
                              setProblemToDelete(problem);
                              setDeleteConfirmOpen(true);
                              setSetOpenDropdownId(null);
                            }}
                          >
                            <Trash2 className='mr-2 h-4 w-4' />
                            Delete problem
                          </DropdownMenuItem>
                        </DropdownMenuContent>
                      </DropdownMenu>
                    </div>
                  )}
                </div>
              ))}
            </div>
          </div>
        </main>
      </div>
      {/* Delete confirmation dialog */}
      <AlertDialog open={deleteConfirmOpen} onOpenChange={setDeleteConfirmOpen}>
        <AlertDialogContent className='bg-gray-900 border-gray-700 text-white'>
          <AlertDialogHeader>
            <AlertDialogTitle>Are you sure?</AlertDialogTitle>
            <AlertDialogDescription className='text-gray-400'>
              This will permanently delete the problem "{problemToDelete?.title}
              ". This action cannot be undone.
            </AlertDialogDescription>
          </AlertDialogHeader>
          <AlertDialogFooter>
            <AlertDialogCancel
              className='bg-gray-800 text-white hover:bg-gray-700'
              onClick={() => setProblemToDelete(null)}
            >
              Cancel
            </AlertDialogCancel>
            <AlertDialogAction
              className='bg-red-600 hover:bg-red-700 text-white'
              onClick={() => {
                if (problemToDelete) {
                  handleDeleteProblem(problemToDelete.id);
                  setProblemToDelete(null);
                  setDeleteConfirmOpen(false);
                }
              }}
            >
              Delete
            </AlertDialogAction>
          </AlertDialogFooter>
        </AlertDialogContent>
      </AlertDialog>
    </div>
  );
}


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\components\ProblemSet\CodeEditor.jsx
==============================

import React, { useState, useEffect, useRef } from 'react';
import Editor from '@monaco-editor/react';
import { Skeleton } from '@/components/ui/skeleton';

export function CodeEditor({ language, onChange, codeSnippets }) {
  const [code, setCode] = useState('');
  const [isEditorReady, setIsEditorReady] = useState(false);
  const monacoRef = useRef(null);
  const editorRef = useRef(null);
  const containerRef = useRef(null);
  const lastLanguage = useRef(language);
  const isInitialLoad = useRef(true);

  // Initialize with code snippets on first load and language change
  useEffect(() => {
    // Generate a storage key based on both language and problem id
    // Extract problem ID from URL path
    const pathParts = window.location.pathname.split('/');
    const problemId = pathParts[pathParts.length - 1];
    const storageKey = `editor_code_${problemId}_${language.toLowerCase()}`;
    
    // Try to load from localStorage first
    const savedCode = localStorage.getItem(storageKey);
    
    // If we have saved code for this language and problem, use it
    if (savedCode) {
      setCode(savedCode);
      if (onChange) {
        onChange(savedCode);
      }
    } 
    // Otherwise, load from codeSnippets when language changes or on initial load
    else if (lastLanguage.current !== language || isInitialLoad.current) {
      const snippet = (codeSnippets && codeSnippets[language.toLowerCase()]) || '';
      setCode(snippet);
      if (onChange) {
        onChange(snippet);
      }
      // Save to localStorage for future use
      if (snippet) {
        localStorage.setItem(storageKey, snippet);
      }
    }
    
    lastLanguage.current = language;
    isInitialLoad.current = false;
  }, [language, codeSnippets, onChange]);

  // Handle editor mount
  const handleEditorDidMount = (editor, monaco) => {
    editorRef.current = editor;
    monacoRef.current = monaco;
    setIsEditorReady(true);

    // Configure editor settings
    editor.updateOptions({
      fontSize: 14,
      fontFamily: 'JetBrains Mono, Menlo, Monaco, Consolas, monospace',
      minimap: { enabled: false },
      scrollBeyondLastLine: false,
      automaticLayout: true,
      tabSize: 2,
      wordWrap: 'on',
      lineNumbers: 'on',
      glyphMargin: false,
      folding: true,
      lineDecorationsWidth: 10,
      lineNumbersMinChars: 3,
    });

    setTimeout(() => {
      editor.focus();
    }, 100);
  };

  // Handle code change from user editing
  const handleEditorChange = (value) => {
    const newCode = value || '';
    setCode(newCode);
    
    // Extract problem ID from URL path
    const pathParts = window.location.pathname.split('/');
    const problemId = pathParts[pathParts.length - 1];
    const storageKey = `editor_code_${problemId}_${language.toLowerCase()}`;
    
    // Save to localStorage whenever code changes
    localStorage.setItem(storageKey, newCode);
    
    if (onChange) {
      onChange(newCode);
    }
  };


  const getMonacoLanguage = (lang) => {
    switch (lang?.toLowerCase()) {
      case 'javascript':
        return 'javascript';
      case 'python':
        return 'python';
      case 'java':
        return 'java';
      case 'cpp':
        return 'cpp';
      default:
        return 'javascript';
    }
  };

  useEffect(() => {
    const handleError = (event) => {
      if (
        event.message ===
          'ResizeObserver loop completed with undelivered notifications.' ||
        event.message === 'ResizeObserver loop limit exceeded'
      ) {
        event.stopImmediatePropagation();
      }
    };
    window.addEventListener('error', handleError);
    return () => window.removeEventListener('error', handleError);
  }, []);

  return (
    <div ref={containerRef} className='h-full w-full overflow-hidden relative'>
      {!isEditorReady && (
        <div className='h-full w-full p-4 bg-zinc-900 absolute top-0 left-0 z-10'>
          <Skeleton className='h-6 w-full mb-2 bg-zinc-800' />
          <Skeleton className='h-6 w-3/4 mb-2 bg-zinc-800' />
          <Skeleton className='h-6 w-5/6 mb-2 bg-zinc-800' />
          <Skeleton className='h-6 w-2/3 mb-2 bg-zinc-800' />
        </div>
      )}
      <Editor
        height='100%'
        width='100%'
        language={getMonacoLanguage(language)}
        value={code}
        theme='vs-dark'
        onChange={handleEditorChange}
        onMount={handleEditorDidMount}
        options={{
          readOnly: false,
          minimap: { enabled: false },
          scrollBeyondLastLine: false,
          fontSize: 14,
          fontFamily: 'JetBrains Mono, Menlo, Monaco, Consolas, monospace',
          suggestOnTriggerCharacters: true,
          quickSuggestions: true,
          tabSize: 2,
          wordWrap: 'off',
          overviewRulerBorder: false,
          scrollbar: {
            vertical: 'auto',
            horizontalSliderSize: 10,
            verticalSliderSize: 10,
            horizontalScrollbarSize: 10,
            verticalScrollbarSize: 10,
            alwaysConsumeMouseWheel: false,
          },
        }}
        loading={
          <div className='flex items-center justify-center h-full'>
            Loading editor...
          </div>
        }
        className='monaco-editor-container'
      />
    </div>
  );
}

==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\components\ProblemSet\IndividualProblem.jsx
==============================

import React, { useState, useEffect } from 'react';
import { useNavigate, useParams } from 'react-router-dom';
import {
  ChevronLeft,
  ChevronRight,
  ExternalLink,
  Play,
  Send,
  Clock,
  Settings,
  Zap,
} from 'lucide-react';
import { Button } from '@/components/ui/button';
import { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from '@/components/ui/select';

import ProblemList from './ProblemList';

import ProblemDescription from './ProblemDescription';
import TestCase from './TestCase';
import { SubmissionResult } from './SubmissionResult';
import { useGetIndividualProblem } from '@/hooks/apis/getIndividualProblem/useGetIndividualProblem';
import { getJudge0LanguageId } from '@/lib/judge0LanguageId/languageUtils';
import { useExecuteProblem } from '@/hooks/apis/runCode/useExecuteCode';
import { useSubmitCode } from '@/hooks/apis/submitCode/useSubmitCode';
import { CodeEditor } from './CodeEditor';
import { useUserSubmissionSpecificProblem } from '@/hooks/apis/userSubmissionDetails/useUserSubmissionSpecificProblem';
import { useQueryClient } from '@tanstack/react-query';
import { useSelector } from 'react-redux';
import { toast } from 'sonner';

export const IndividualProblem = () => {
  const { isLoading, isSuccess, error, getIndividualProblemMutation } =
    useGetIndividualProblem();

  const {
    isPending,
    isSuccess: runSuccess,
    error: runError,
    runProblemMutation,
  } = useExecuteProblem();

  const {
    isPending: submitPending,
    isSuccess: submitSuccess,
    error: submitError,
    submitProblemMutation,
  } = useSubmitCode();

  const problemId = useParams().problemId;

  const isAuthenticated = useSelector((state) => state.auth.isAuthenticated);

  // Use TanStack Query to fetch submission history
  const {
    data: submissionHistoryData,
    isPending: isUserSubmissionPending,
    isSuccess: isUserSubmissionSuccess,
    error: isUserSubmissionError,
    refetch,
  } = useUserSubmissionSpecificProblem(problemId, isAuthenticated);

    // console.log('submissionHistoryData', submissionHistoryData); 

  // Get query client for cache invalidation
  const queryClient = useQueryClient();

  const [problemDetails, setProblemDetails] = useState({
    problemId: '',
    title: '',
    problemNumber: '',
    description: '',
    constraints: '',
    examples: [],
    codeSnippets: {},
    testcases: [],
    companyTags: [],
    difficulty: '',
    tags: [],
  });

  const [activeTab, setActiveTab] = useState('description');
  const [language, setLanguage] = useState('javascript');
  const [sidebarOpen, setSidebarOpen] = useState(true);
  const [testPanelHeight, setTestPanelHeight] = useState(400);
  const [isResizing, setIsResizing] = useState(false);
  const [isRunning, setIsRunning] = useState(false);
  const [resultTestCases, setResultTestCases] = useState([]);
  const [startY, setStartY] = useState(0);
  const [code, setCode] = useState('');
  const [submissionDetails, setSubmissionDetails] = useState(null);

  const navigate = useNavigate();

  // Test cases state
  const [testcases, setTestcases] = useState([
    { input: '100 200', output: '300' },
    { input: '-500 -600', output: '-1100' },
    { input: '0 0', output: '0' },
  ]);

  // console.log("isAuthenticated", isAuthenticated);
  

  // Load saved language preference from localStorage
  useEffect(() => {
    const savedLanguage = localStorage.getItem(`problem_${problemId}_language`);
    if (savedLanguage) {
      setLanguage(savedLanguage);
    }
  }, [problemId]);

  const getIndividualProblem = async (problemId) => {
    try {
      const response = await getIndividualProblemMutation(problemId);
      setProblemDetails({
        problemId: response.problem.id || '',
        title: response.problem.title || '',
        problemNumber: response.problem.problemNumber || '',
        description: response.problem.description || '',
        constraints: response.problem.constraints || '',
        examples: response.problem.examples || [],
        codeSnippets: response.problem.codeSnippets || {},
        testcases: response.problem.testCases || [],
        difficulty: response.problem.difficulty || '',
        companyTags: response.problem.companyTags || [],
        tags: response.problem.tags || [],
      });

      // Check if there's saved code for this problem and language
      const storageKey = `editor_code_${problemId}_${language.toLowerCase()}`;
      const savedCode = localStorage.getItem(storageKey);

      if (savedCode) {
        setCode(savedCode);
      } else {
        // Set initial code for current language if no saved code exists
        const initialCode =
          response.problem.codeSnippets[language.toLowerCase()] || '';
        setCode(initialCode);

        // Save initial code to localStorage
        if (initialCode) {
          localStorage.setItem(storageKey, initialCode);
        }
      }
    } catch (error) {
      console.error('Error fetching individual problem:', error);
    }
  };

  useEffect(() => {
    if (activeTab === 'submissions' && problemId && isAuthenticated) {
      refetch();
    }
  }, [activeTab, problemId, isAuthenticated, refetch]);

  useEffect(() => {
    getIndividualProblem(problemId);
  }, [problemId]);

  const handleCodeChange = (value) => {
    if (value !== undefined) {
      setCode(value);
    }
  };

  // Handle mouse down on the resize handle
  const handleResizeStart = (e) => {
    e.preventDefault();
    setIsResizing(true);
    setStartY(e.clientY);
  };

  // Handle test case changes
  const handleTestCaseChange = (index, field, value) => {
    const updatedTestcases = [...testcases];

    // Create a new test case if it doesn't exist
    if (!updatedTestcases[index]) {
      updatedTestcases[index] = { input: '', output: '' };
    }

    // Update the field
    updatedTestcases[index][field] = value;
    setTestcases(updatedTestcases);
  };

  // Handle test case removal
  const handleTestCaseRemove = (index) => {
    const updatedTestcases = testcases.filter((_, i) => i !== index);
    setTestcases(updatedTestcases);
  };

  // Handle mouse move for resizing
  useEffect(() => {
    const handleResize = (e) => {
      if (!isResizing) return;

      const delta = startY - e.clientY;
      const newHeight = Math.max(100, Math.min(600, testPanelHeight + delta));
      setTestPanelHeight(newHeight);
      setStartY(e.clientY);
    };

    const handleResizeEnd = () => {
      setIsResizing(false);
    };

    if (isResizing) {
      document.addEventListener('mousemove', handleResize);
      document.addEventListener('mouseup', handleResizeEnd);
    }

    return () => {
      document.removeEventListener('mousemove', handleResize);
      document.removeEventListener('mouseup', handleResizeEnd);
    };
  }, [isResizing, testPanelHeight, startY]);

  const handleLanguageChange = (value) => {
    setLanguage(value);
    localStorage.setItem(`problem_${problemId}_language`, value);

    // The code will be loaded by the CodeEditor component
  };

  const handleRunCode = async () => {
    if(!isAuthenticated) {
      toast.warning('Please login to run the code');
      return ;
    }

    const source_code = code;
    const language_id = getJudge0LanguageId(language);
    const problemId = problemDetails.problemId;

    try {
      setIsRunning(true);
      const response = await runProblemMutation({
        source_code,
        language_id,
        problemId,
      });
      setResultTestCases(response.results);
      setIsRunning(false);
    } catch (error) {
      console.error('Error executing code:', error);
      setIsRunning(false);
    }
  };

  const handleSubmitCode = async () => {
    if (!isAuthenticated) {
      toast.warning('Please login to submit the code');
      return;
    }
    const source_code = code;
    const language_id = getJudge0LanguageId(language);
    const problemId = problemDetails.problemId;

    try {
      setIsRunning(true);
      const response = await submitProblemMutation({
        source_code,
        language_id,
        problemId,
      });
      console.log('run', response);
      setSubmissionDetails(response.submission);
      setIsRunning(false);
      setActiveTab('submissions');

      queryClient.invalidateQueries(['submissionDetails', problemId]);
    } catch (error) {
      console.error('Error executing code:', error);
      setIsRunning(false);
    }
  };

  return (
    <div className='flex h-screen flex-col bg-zinc-950 text-zinc-100'>
      {/* Header */}
      <header className='flex items-center justify-between border-b border-zinc-800 px-4 py-2'>
        <div className='flex items-center gap-4'>

          <Button
            variant='ghost'
            size='sm'
            className='text-zinc-300'
            onClick={() => navigate('/problem-set')}
          >
            <ChevronLeft size={16} className='mr-1' /> Problem List
          </Button>
          {/* <div className='flex gap-1 text-zinc-500'>
            <Button variant='ghost' size='icon' className='h-7 w-7'>
              <ChevronLeft size={16} />
            </Button>
            <Button variant='ghost' size='icon' className='h-7 w-7'>
              <ChevronRight size={16} />
            </Button>
            <Button variant='ghost' size='icon' className='h-7 w-7'>
              <ExternalLink size={14} />
            </Button>
          </div> */}
        </div>

        <div className='flex items-center gap-2'>
          {!isRunning ? (
            <>
              <Button
                variant='outline'
                size='sm'
                className='gap-2 border-zinc-700 bg-zinc-800 text-zinc-300 hover:bg-zinc-700 mr-2'
                onClick={handleRunCode}
              >
                <Play size={14} />
                Run
              </Button>
              <Button
                size='sm'
                className='gap-2 bg-emerald-600 text-white hover:bg-emerald-700'
                onClick={handleSubmitCode}
              >
                <Send size={14} />
                Submit
              </Button>
            </>
          ) : (
            <button
              type='button'
              disabled
              className='flex items-center gap-2 bg-emerald-600 text-white text-sm px-4 py-2 rounded-md hover:bg-emerald-700 cursor-not-allowed opacity-80'
            >
              <svg
                className='animate-spin h-4 w-4 text-white'
                xmlns='http://www.w3.org/2000/svg'
                fill='none'
                viewBox='0 0 24 24'
              >
                <circle
                  className='opacity-25'
                  cx='12'
                  cy='12'
                  r='10'
                  stroke='currentColor'
                  strokeWidth='4'
                />
                <path
                  className='opacity-75'
                  fill='currentColor'
                  d='M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z'
                />
              </svg>
              Pending...
            </button>
          )}

          <div className='flex gap-1 text-zinc-500'>
            <Button variant='ghost' size='icon' className='h-8 w-8'>
              <Clock size={16} />
            </Button>
            <Button variant='ghost' size='icon' className='h-8 w-8'>
              <Settings size={16} />
            </Button>
          </div>
        </div>
      </header>

      {/* Main Content */}
      <div className='flex flex-1 overflow-hidden'>
        {/* Left Panel */}
        <div className='flex w-1/2 flex-col border-r border-zinc-800'>
          <Tabs
            value={activeTab}
            onValueChange={setActiveTab}
            className='flex h-full flex-col'
          >
            <TabsList className='h-10 justify-start rounded-none border-b border-zinc-800 bg-zinc-950 px-2'>
              <TabsTrigger
                value='description'
                className='data-[state=active]:bg-zinc-800 text-white'
              >
                Description
              </TabsTrigger>
              <TabsTrigger
                value='editorial'
                className='data-[state=active]:bg-zinc-800 text-white'
              >
                Editorial
              </TabsTrigger>
              <TabsTrigger
                value='solutions'
                className='data-[state=active]:bg-zinc-800 text-white'
              >
                Solutions
              </TabsTrigger>
              <TabsTrigger
                value='submissions'
                className='data-[state=active]:bg-zinc-800 text-white'
              >
                Submissions
              </TabsTrigger>
            </TabsList>
            <TabsContent
              value='description'
              className='flex-1 overflow-auto p-0'
            >
              <ProblemDescription problemDetails={problemDetails} />
            </TabsContent>
            <TabsContent value='editorial' className='flex-1 overflow-auto p-4'>
              Editorial content goes here
            </TabsContent>
            <TabsContent value='solutions' className='flex-1 overflow-auto p-4'>
              Solutions content goes here
            </TabsContent>
            <TabsContent
              value='submissions'
              className='flex-1 overflow-auto p-4'
            >
              <SubmissionResult
                submissionDetails={submissionDetails}
                submissionInProgress={submitPending}
                submissionHistory={submissionHistoryData?.submissions || []}
              />
            </TabsContent>
          </Tabs>
        </div>

        {/* Right Panel */}
        <div className='flex w-1/2 flex-col'>
          {/* Code Editor */}
          <div
            className='flex flex-col'
            style={{ height: `calc(100% - ${testPanelHeight}px)` }}
          >
            <Tabs defaultValue='code' className='flex h-full flex-col'>
              <TabsList className='h-10 justify-start rounded-none border-b border-zinc-800 bg-zinc-950 px-2'>
                <TabsTrigger
                  value='code'
                  className='data-[state=active]:bg-zinc-800'
                >
                  Code
                </TabsTrigger>
              </TabsList>
              <TabsContent value='code' className='flex-1 overflow-hidden p-0'>
                <div className='flex h-10 items-center justify-between border-b border-zinc-800 px-4'>
                  <Select value={language} onValueChange={handleLanguageChange}>
                    <SelectTrigger className='h-7 w-40 border-zinc-700 bg-zinc-800 text-sm'>
                      <SelectValue />
                    </SelectTrigger>
                    <SelectContent>
                      <SelectItem value='javascript'>JavaScript</SelectItem>
                      <SelectItem value='python'>Python</SelectItem>
                      <SelectItem value='java'>Java</SelectItem>
                      {/* <SelectItem value='cpp'>C++</SelectItem> */}
                    </SelectContent>
                  </Select>
                  <div className='flex gap-2'>
                    <Button
                      variant='ghost'
                      size='icon'
                      className='h-7 w-7 text-zinc-400'
                    >
                      <Settings size={14} />
                    </Button>
                  </div>
                </div>
                <CodeEditor
                  language={language}
                  codeSnippets={problemDetails.codeSnippets}
                  onChange={handleCodeChange}
                />
              </TabsContent>
            </Tabs>
          </div>

          {/* Resize Handle */}
          <div
            className={`h-2 bg-zinc-800 hover:bg-emerald-600 cursor-ns-resize flex items-center justify-center ${
              isResizing ? 'bg-emerald-600' : ''
            }`}
            onMouseDown={handleResizeStart}
          >
            <div className='w-10 h-1 bg-zinc-600 rounded-full'></div>
          </div>

          {/* Test Cases */}
          <div
            className='border-t border-zinc-800 flex flex-col'
            style={{ height: `${testPanelHeight}px` }}
          >
            <Tabs defaultValue='testcase' className='flex flex-col h-full'>
              <div className='flex items-center justify-between border-b border-zinc-800 bg-zinc-950'>
                <TabsList className='h-10 justify-start rounded-none border-b-0 bg-transparent px-2'>
                  <TabsTrigger
                    value='testcase'
                    className='data-[state=active]:bg-zinc-800 data-[state=active]:text-zinc-100'
                  >
                    <div className='flex items-center gap-1.5'>
                      <div className='h-3.5 w-3.5 rounded-sm bg-emerald-600'></div>
                      <span>Testcase </span>
                    </div>
                  </TabsTrigger>
                </TabsList>
              </div>
              <TabsContent
                value='testcase'
                className='flex-1 overflow-auto p-0'
              >
                <TestCase
                  testcases={problemDetails.testcases}
                  runSuccess={runSuccess}
                  resultTestCases={resultTestCases}
                  onChange={handleTestCaseChange}
                  onRemove={handleTestCaseRemove}
                  onRun={handleRunCode}
                  isRunning={isRunning}
                />
              </TabsContent>
            </Tabs>
          </div>
        </div>
      </div>
    </div>
  );
};


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\components\ProblemSet\NavBar.jsx
==============================

import { useLocation } from 'react-router-dom';
import { Link } from 'react-router-dom';
import { ArrowLeft } from 'lucide-react';

const Navbar = () => {
  const location = useLocation();

  // Function to determine if a route is active
  const isActive = (route) => location.pathname === route;

  // Navigation items configuration
  const navItems = [
    // { path: '/explore', label: 'Explore' },
    { path: '/problem-set', label: 'Problems' },
    // { path: '/discuss', label: 'Discuss' },
    { path: '/dsaSheet', label: 'DSA Sheet' },
    { path: '/discussion', label: 'Discussion' },
    { path: '/leaderboard', label: 'Leaderboard' },
  ];

  return (
    <header className='border-b border-gray-800'>
      <div className='container mx-auto px-4'>
        <div className='flex items-center h-14'>
          <Link
            to='/'
            className='mr-6 p-2 rounded-md hover:bg-gray-800 transition-colors duration-200 active:scale-95 transform'
          >
            <ArrowLeft className='h-5 w-5' />
          </Link>
          <nav className='flex space-x-2'>
            {navItems.map((item) => (
              <Link
                key={item.path}
                to={item.path}
                className={`px-4 py-2 rounded-md transition-all duration-200 active:scale-95 transform focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 ${
                  isActive(item.path)
                    ? 'text-white font-medium bg-gray-700 border-b-2 border-white hover:bg-gray-600'
                    : 'text-gray-400 hover:text-white hover:bg-gray-800'
                }`}
              >
                {item.label}
              </Link>
            ))}
          </nav>
        </div>
      </div>
    </header>
  );
};

export default Navbar;


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\components\ProblemSet\ProblemDescription.jsx
==============================

import { Heart, MessageSquare, Share2, Award } from 'lucide-react';

export default function ProblemDescription({ problemDetails }) {
  console.log('problemDetails', problemDetails);
  return (
    <div className='p-6'>
      <h1 className='text-2xl font-bold text-zinc-100'>
        {problemDetails.title}
      </h1>

      <div className='mt-4 flex flex-wrap gap-2'>
        <div className='rounded-full bg-emerald-900/30 px-3 py-1 text-sm font-medium text-emerald-400'>
          {problemDetails.difficulty}
        </div>
      </div>

      {/* Problem Tags Section */}
      {problemDetails.tags && problemDetails.tags.length > 0 && (
        <div className='mt-4'>
          <h3 className='text-sm font-medium text-zinc-400 mb-2'>Topics:</h3>
          <div className='flex flex-wrap gap-2'>
            {problemDetails.tags.map((tag, index) => (
              <span
                key={index}
                className='inline-flex items-center rounded-md bg-emerald-900/30 px-2.5 py-0.5 text-xs font-medium text-emerald-400 ring-1 ring-inset ring-emerald-400/20'
              >
                {tag}
              </span>
            ))}
          </div>
        </div>
      )}
      {problemDetails.companyTags && problemDetails.companyTags.length > 0 && (
        <div className='mt-4'>
          <h3 className='text-sm font-medium text-zinc-400 mb-2'>
            Asked by Companies:
          </h3>
          <div className='flex flex-wrap gap-2'>
            {problemDetails.companyTags.map((company, index) => (
              <span
                key={index}
                className='inline-flex items-center rounded-md bg-blue-900/30 px-2.5 py-0.5 text-xs font-medium text-blue-400 ring-1 ring-inset ring-blue-400/20'
              >
                {company}
              </span>
            ))}
          </div>
        </div>
      )}

      {/* <div className='mt-6 space-y-4 text-zinc-300'>
        <p>{problemDetails.description}</p>

        <p>
          Return{' '}
          <span className='italic'>
            the single element that appears only once
          </span>
          .
        </p>

        <p>
          Your solution must run in{' '}
          <code className='rounded bg-zinc-800 px-1 py-0.5 text-emerald-400'>
            O(log n)
          </code>{' '}
          time and{' '}
          <code className='rounded bg-zinc-800 px-1 py-0.5 text-emerald-400'>
            O(1)
          </code>{' '}
          space.
        </p>
      </div> */}

      <div className='mt-8'>
        {problemDetails.examples && problemDetails.examples.length > 0 ? (
          problemDetails.examples.map((example, idx) => (
            <div key={idx} className='mt-4'>
              <h3 className='text-md font-semibold text-zinc-100'>
                Example {idx + 1}:
              </h3>
              <div className='mt-1 rounded-md bg-zinc-900 p-4 font-mono'>
                <div>
                  <span className='text-emerald-400'>Input:</span>{' '}
                  {example.input}
                </div>
                <div>
                  <span className='text-emerald-400'>Output:</span>{' '}
                  {example.output}
                </div>
                <div>
                  <span className='text-emerald-400'>Explanation:</span>{' '}
                  {example.explanation}
                </div>
              </div>
            </div>
          ))
        ) : (
          <p className='mt-2 text-zinc-400'>No examples available.</p>
        )}
      </div>

      <div className='mt-4'>
        <h2 className='text-lg font-semibold text-zinc-100'>Constraints:</h2>
        <div className='mt-1 rounded-md bg-zinc-800 p-4'>
          <p>{problemDetails.constraints}</p>
        </div>
      </div>

      <div className='mt-8 flex items-center gap-4'>
        <button className='flex items-center gap-1 text-zinc-400 hover:text-zinc-200'>
          <Heart size={16} />
          <span>12K</span>
        </button>
        <button className='flex items-center gap-1 text-zinc-400 hover:text-zinc-200'>
          <MessageSquare size={16} />
          <span>157</span>
        </button>
        <button className='flex items-center gap-1 text-zinc-400 hover:text-zinc-200'>
          <Share2 size={16} />
        </button>
        <div className='flex items-center gap-1 text-emerald-400'>
          <Award size={16} />
          <span className='text-sm'>92 Online</span>
        </div>
      </div>
    </div>
  );
}


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\components\ProblemSet\ProblemList.jsx
==============================


import { useState } from "react"
import { Search, ArrowUpDown, Filter, Check } from "lucide-react"
import { Input } from "@/components/ui/input"
import { Button } from "@/components/ui/button"
import { cn } from "@/lib/utils"



export default function ProblemList() {
  const [searchQuery, setSearchQuery] = useState("")

  const problems = [
    { id: 1, title: "Two Sum", difficulty: "Easy", completed: true },
    { id: 2, title: "Add Two Numbers", difficulty: "Med.", completed: true },
    { id: 3, title: "Longest Substring Without Repeating Characters", difficulty: "Med.", completed: true },
    { id: 4, title: "Median of Two Sorted Arrays", difficulty: "Hard", completed: true },
    { id: 5, title: "Longest Palindromic Substring", difficulty: "Med.", completed: true },
    { id: 6, title: "Zigzag Conversion", difficulty: "Med.", completed: true },
    { id: 7, title: "Reverse Integer", difficulty: "Med.", completed: true },
    { id: 8, title: "String to Integer (atoi)", difficulty: "Med.", completed: true },
    { id: 9, title: "Palindrome Number", difficulty: "Easy", completed: false },
    { id: 10, title: "Regular Expression Matching", difficulty: "Hard", completed: false },
    { id: 11, title: "Container With Most Water", difficulty: "Med.", completed: true },
    { id: 12, title: "Integer to Roman", difficulty: "Med.", completed: true },
    { id: 13, title: "Roman to Integer", difficulty: "Easy", completed: true },
    { id: 14, title: "Longest Common Prefix", difficulty: "Easy", completed: true },
    { id: 15, title: "3Sum", difficulty: "Med.", completed: true },
    { id: 16, title: "3Sum Closest", difficulty: "Med.", completed: false },
    { id: 17, title: "Letter Combinations of a Phone Number", difficulty: "Med.", completed: true },
    { id: 18, title: "4Sum", difficulty: "Med.", completed: true },
  ]

  const filteredProblems = problems.filter(
    (problem) =>
      problem.title.toLowerCase().includes(searchQuery.toLowerCase()) || problem.id.toString().includes(searchQuery),
  )

  const getDifficultyColor = (difficulty) => {
    switch (difficulty) {
      case "Easy":
        return "text-emerald-400"
      case "Med.":
        return "text-amber-400"
      case "Hard":
        return "text-red-400"
      default:
        return "text-zinc-400"
    }
  }

  return (
    <div className="flex h-full flex-col">
      <div className="flex items-center justify-between border-b border-zinc-800 p-4">
        <h2 className="text-lg font-semibold text-zinc-100">Problem List</h2>
        <Button variant="ghost" size="icon" className="h-8 w-8 text-zinc-400">
          <Check size={18} className="text-emerald-500" />
        </Button>
      </div>

      <div className="flex items-center gap-2 border-b border-zinc-800 p-4">
        <div className="relative flex-1">
          <Search className="absolute left-2 top-1/2 h-4 w-4 -translate-y-1/2 text-zinc-500" />
          <Input
            placeholder="Search questions"
            className="h-9 border-zinc-700 bg-zinc-900 pl-8 text-sm text-zinc-300"
            value={searchQuery}
            onChange={(e) => setSearchQuery(e.target.value)}
          />
        </div>
        <Button variant="ghost" size="icon" className="h-9 w-9 rounded-full bg-zinc-800 text-zinc-400">
          <ArrowUpDown size={14} />
        </Button>
        <Button variant="ghost" size="icon" className="h-9 w-9 rounded-full bg-zinc-800 text-zinc-400">
          <Filter size={14} />
        </Button>
      </div>

      <div className="flex-1 overflow-y-auto">
        {filteredProblems.map((problem) => (
          <div key={problem.id} className="flex items-center border-b border-zinc-800/50 px-4 py-3 hover:bg-zinc-900">
            <div className="mr-2 w-5 text-emerald-500">{problem.completed && <Check size={16} />}</div>
            <div className="flex-1">
              <span className="text-zinc-300">
                {problem.id}. {problem.title}
              </span>
            </div>
            <div className={cn("text-sm font-medium", getDifficultyColor(problem.difficulty))}>
              {problem.difficulty}
            </div>
          </div>
        ))}
      </div>
    </div>
  )
}


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\components\ProblemSet\SubmissionResult.jsx
==============================

import { useState, useEffect } from 'react';
import { Button } from '@/components/ui/button';
import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';
import { Badge } from '@/components/ui/badge';
import { Progress } from '@/components/ui/progress';
import {
  Table,
  TableBody,
  TableCell,
  TableHead,
  TableHeader,
  TableRow,
} from '@/components/ui/table';
import {
  CheckCircle2,
  Clock,
  Code2,
  FileText,
  HardDrive,
  XCircle,
  ArrowLeft,
  Eye,
  BarChart3,
  Calendar,
} from 'lucide-react';

export function SubmissionResult({
  submissionDetails = null,
  submissionInProgress = false,
  submissionHistory,
}) {
  const [showResults, setShowResults] = useState(false);
  console.log('submissionDetails', submissionDetails);
  console.log('submissionHistory', submissionHistory);
  // console.log("{}", {} == submissionDetails)
  // console.log("type of submissionDetails", typeof submissionDetails);

  // When submissionDetails changes and is not null, show the results
  useEffect(() => {
    if (submissionDetails != null) {
      setShowResults(true);
    }
  }, [submissionDetails]);

  console.log('showResults', showResults);

  // Default submission history data
  const previousSubmissions = Array.isArray(submissionHistory)
    ? submissionHistory.map((submission) => ({
        status: submission.status || 'Pending',
        date: submission.date || 'Unknown',
        language: submission.language || 'N/A',
        statusColor:
          submission.status === 'Accepted'
            ? 'text-green-600'
            : submission.status === 'Wrong Answer'
            ? 'text-red-600'
            : submission.status === 'Time Limit Exceeded'
            ? 'text-amber-600'
            : 'text-gray-600',
        runtime: submission.runtime || '-',
        memory: submission.memory || '-',
      }))
    : [];


  // Only process additional data if we have submission details
  let statusInfo = {
    icon: null,
    color: 'text-gray-600',
    bgColor: 'bg-gray-50',
    badgeColor: 'bg-gray-100 text-gray-800',
    progressColor: 'bg-gray-500',
  };
  let passPercentage = 0;
  let formattedDate = '';

  if (submissionDetails) {
    // Function to determine status info based on submission status
    const getStatusInfo = (status) => {
      if (status === 'Accepted') {
        return {
          icon: <CheckCircle2 className='h-5 w-5' />,
          color: 'text-green-700', // slightly deeper green for better visibility
          bgColor: 'bg-green-100', // soft green background
          badgeColor: 'bg-green-200 text-green-800 hover:bg-green-300', // gentle transitions
          progressColor: 'bg-green-400', // consistent but not too bright
        };
      } else {
        return {
          icon: <XCircle className='h-5 w-5' />,
          color: 'text-rose-700', // using rose for a more modern red
          bgColor: 'bg-rose-100', // soft rose background
          badgeColor: 'bg-rose-200 text-rose-800 hover:bg-rose-300', // same approach
          progressColor: 'bg-rose-400', // consistent
        };
      }
    };
    

    statusInfo = getStatusInfo(submissionDetails?.status);

    // Format date
    const currentDate = new Date();
    formattedDate =
      currentDate.toLocaleDateString('en-US', {
        month: 'long',
        day: 'numeric',
        year: 'numeric',
      }) +
      ' at ' +
      currentDate.toLocaleTimeString('en-US', {
        hour: '2-digit',
        minute: '2-digit',
      });

    // Parse test cases passed
    const [passed, total] = submissionDetails?.testCasesPassed
      ?.split('/')
      .map(Number) || [0, 0];
    passPercentage = total > 0 ? (passed / total) * 100 : 0;
  }

  // Test cases data
  const testCases = [
    {
      name: 'Compilation check',
      status: 'Passed',
      message: 'Code compiled successfully!',
    },
    {
      name: 'Test Cases',
      status: 'Passed',
      message: 'Testcases Passed Successfully',
    },
    // {
    //   name: 'Test Cases (small)',
    //   status: 'Passed',
    //   message: 'Code Passed for the given test case',
    // },
    // {
    //   name: 'Test Cases (Large)',
    //   status: 'Passed',
    //   message: 'Large Testcases Passed Successfully',
    // },
  ];

  return (
    <div className='min-h-screen bg-[hsl(var(--premium-aqua)/0.7)] text-[hsl(var(--premium-rose)/0.7)] p-4 rounded-lg'>
      {/* Main Content */}
      <main className='container mx-auto px-4 py-8 space-y-6'>
        {/* Only show these cards if we have submission details */}
        {showResults && (
          <>
            <div className='flex justify-between items-center mb-6'>
              <div className='flex items-center space-x-2'>
                <Badge variant='outline' className='flex items-center gap-1'>
                  <Calendar className='h-3.5 w-3.5' />
                  {formattedDate}
                </Badge>
                <Badge variant='outline' className='flex items-center gap-1'>
                  <Code2 className='h-3.5 w-3.5' />
                  {submissionDetails?.language}
                </Badge>
              </div>
            </div>

            {/* Status Card */}
            <Card className={`${statusInfo.bgColor} border-none shadow-sm`}>
              <CardContent className='p-6'>
                <div className='flex items-center justify-between mb-6'>
                  <div className='flex items-center'>
                    <div className={`${statusInfo.color} mr-2`}>
                      {statusInfo.icon}
                    </div>
                    <h2 className={`text-2xl font-bold ${statusInfo.color}`}>
                      {submissionDetails?.status}
                    </h2>
                  </div>
                  {/* <Button variant='outline' size='sm' className='gap-1'>
                    <Eye className='h-4 w-4' />
                    View Code
                  </Button> */}
                </div>

                <div className='grid grid-cols-1 md:grid-cols-3 gap-6'>
                  {/* Test Cases */}
                  <Card className='bg-white shadow-sm'>
                    <CardHeader className='pb-2'>
                      <div className='flex items-center text-sm text-gray-500'>
                        <FileText className='h-4 w-4 mr-1' />
                        Test Cases Passed
                      </div>
                    </CardHeader>
                    <CardContent>
                      <div className='flex flex-col'>
                        <div className='flex justify-between items-center mb-2'>
                          <span className='text-2xl font-bold'>
                            {submissionDetails?.testCasesPassed}
                          </span>
                          <Badge
                            variant='outline'
                            className={statusInfo.badgeColor}
                          >
                            {Math.round(passPercentage)}%
                          </Badge>
                        </div>
                        <Progress
                          value={passPercentage}
                          className='h-2'
                          indicatorClassName={statusInfo.progressColor}
                        />
                      </div>
                    </CardContent>
                  </Card>

                  {/* Time */}
                  <Card className='bg-white shadow-sm'>
                    <CardHeader className='pb-2'>
                      <div className='flex items-center text-sm text-gray-500'>
                        <Clock className='h-4 w-4 mr-1' />
                        Time Taken
                      </div>
                    </CardHeader>
                    <CardContent>
                      <div className='flex items-end justify-between'>
                        <span className='text-2xl font-bold'>
                          {submissionDetails?.performance?.totalTime}
                        </span>
                        {/* <span className='text-sm text-gray-500'>
                          Faster than 85% of submissions
                        </span> */}
                      </div>
                    </CardContent>
                  </Card>

                  {/* Memory */}
                  <Card className='bg-white shadow-sm'>
                    <CardHeader className='pb-2'>
                      <div className='flex items-center text-sm text-gray-500'>
                        <HardDrive className='h-4 w-4 mr-1' />
                        Memory Used
                      </div>
                    </CardHeader>
                    <CardContent>
                      <div className='flex items-end justify-between'>
                        <span className='text-2xl font-bold'>
                          {submissionDetails?.performance?.totalMemory}
                        </span>
                        {/* <span className='text-sm text-gray-500'>
                          Better than 72% of submissions
                        </span> */}
                      </div>
                    </CardContent>
                  </Card>
                </div>
              </CardContent>
            </Card>

            {/* Test Cases Details */}
            <Card className='bg-[hsl(var(--premium-aqua)/0.5)] text-[hsl(var(--premium-rose)/0.5)] p-4 mt-6 rounded-lg'>
              <CardHeader>
                <CardTitle className='text-lg'>Test Results</CardTitle>
              </CardHeader>
              <CardContent className='space-y-4'>
                {testCases.map((test, index) => (
                  <div
                    key={index}
                    className='border rounded-lg p-4 transition-all hover:bg-gray-50'
                  >
                    <div className='flex justify-between items-center'>
                      <div className='flex items-center'>
                        {test.status === 'Passed' ? (
                          <CheckCircle2 className='h-5 w-5 text-green-600 mr-2' />
                        ) : (
                          <XCircle className='h-5 w-5 text-red-600 mr-2' />
                        )}
                        <span className='font-medium'>{test.name}</span>
                      </div>
                      <Badge
                        variant={
                          test.status === 'Passed' ? 'success' : 'destructive'
                        }
                      >
                        {test.status}
                      </Badge>
                    </div>
                    <div className='mt-2 ml-7 text-sm text-gray-600'>
                      {test.message}
                    </div>
                  </div>
                ))}
              </CardContent>
            </Card>
          </>
        )}

        {/* Always show submission history */}
        <Card className='bg-[hsl(var(--premium-aqua)/0.6)] text-[hsl(var(--premium-rose)/0.6)] p-4 rounded-lg'>
          <CardHeader className='flex flex-row items-center justify-between'>
            <CardTitle className='text-lg'>Submission History</CardTitle>
            {submissionInProgress && (
              <Badge variant='outline' className='bg-blue-100 text-blue-800'>
                Submission in progress...
              </Badge>
            )}
          </CardHeader>
          <CardContent>
            <Table>
              <TableHeader>
                <TableRow>
                  <TableHead>Status</TableHead>
                  <TableHead>Date</TableHead>
                  <TableHead>Language</TableHead>
                  <TableHead>Runtime</TableHead>
                  <TableHead>Memory</TableHead>
                  <TableHead className='text-right'>Actions</TableHead>
                </TableRow>
              </TableHeader>
              <TableBody>
                {previousSubmissions.map((submission, index) => (
                  <TableRow key={index}>
                    <TableCell>
                      <div className='flex items-center'>
                        {submission.status === 'Accepted' ? (
                          <CheckCircle2 className='h-4 w-4 text-green-600 mr-2' />
                        ) : submission.status === 'Wrong Answer' ? (
                          <XCircle className='h-4 w-4 text-red-600 mr-2' />
                        ) : submission.status === 'Time Limit Exceeded' ? (
                          <Clock className='h-4 w-4 text-amber-600 mr-2' />
                        ) : (
                          <Clock className='h-4 w-4 text-gray-400 mr-2 animate-spin' />
                        )}
                        <span className={submission.statusColor}>
                          {submission.status}
                        </span>
                      </div>
                    </TableCell>
                    <TableCell>{submission.date}</TableCell>
                    <TableCell>{submission.language}</TableCell>
                    <TableCell>{submission.runtime}</TableCell>
                    <TableCell>{submission.memory}</TableCell>
                    <TableCell className='text-right'>
                      <div className='flex justify-end gap-2'>
                        <Button
                          variant='ghost'
                          size='icon'
                          className='h-8 w-8'
                          disabled={!submissionDetails && index === 0}
                        >
                          <Eye className='h-4 w-4' />
                        </Button>
                        <Button
                          variant='ghost'
                          size='icon'
                          className='h-8 w-8'
                          disabled={!submissionDetails && index === 0}
                        >
                          <BarChart3 className='h-4 w-4' />
                        </Button>
                      </div>
                    </TableCell>
                  </TableRow>
                ))}
              </TableBody>
            </Table>
          </CardContent>
        </Card>
      </main>
    </div>
  );
}


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\components\ProblemSet\TestCase.jsx
==============================

import { useState, useEffect, useRef } from 'react';
import { Card, CardContent } from '@/components/ui/card';
import { Input } from '@/components/ui/input';
import { Button } from '@/components/ui/button';
import { Trash2, RefreshCw, Check, X, Clock, Database } from 'lucide-react';
import { cn } from '@/lib/utils';

export default function TestCase({
  testcases = [],
  resultTestCases = [], // use this prop for result data
  runSuccess,
  onChange,
  onRemove,
  onRun,
  isRunning = false,
  results = [],
}) {
  const [activeCase, setActiveCase] = useState(0);
  const [showResults, setShowResults] = useState(false);
  // Cache the initial number of test cases on first mount
  const initialTestCaseCount = useRef(testcases.length);

  console.log('resultTestCases', resultTestCases);

  // Reset active case when testcases change
  useEffect(() => {
    if (testcases && testcases.length > 0) {
      if (activeCase >= testcases.length) {
        setActiveCase(0);
      }
    } else {
      setActiveCase(0);
    }
  }, [testcases, activeCase]);

  // Show results when they become available
  useEffect(() => {
    setShowResults(runSuccess && resultTestCases && resultTestCases.length > 0);
  }, [runSuccess, resultTestCases]);

  const handleRunCode = () => {
    if (onRun) {
      onRun();
    }
  };

  const addNewCase = () => {
    if (!testcases) return;

    const newIndex = testcases.length;
    if (onChange) {
      onChange(newIndex, 'input', '');
      onChange(newIndex, 'output', '');
      setActiveCase(newIndex);
    }
  };

  // Safely get the active test case with fallback to empty object
  const activeTestCase =
    testcases && testcases.length > 0 && activeCase < testcases.length
      ? testcases[activeCase]
      : { input: '', output: '' };

  // Get the active result from resultTestCases
  const getActiveResult = () => {
    if (!showResults || !resultTestCases || resultTestCases.length === 0) {
      return null;
    }

    // Locate the result that matches the current active case (assuming testCase numbers are 1-indexed)
    const testCase = resultTestCases.find(
      (tc) => tc.testCase === activeCase + 1
    );

    if (!testCase) return null;

    return {
      status: testCase.passed ? 'accepted' : 'wrong',
      output: testCase.stdout || '',
      runtime: testCase.time || '',
      memory: testCase.memory || '',
      expected: testCase.expected || '',
    };
  };

  const activeResult = getActiveResult();

  const getStatusColor = (status) => {
    if (!status) return '';
    return status === 'accepted' ? 'text-emerald-500' : 'text-red-500';
  };

  // Get status badge using resultTestCases
  const getTestCaseStatus = (index) => {
    if (!showResults || !resultTestCases || resultTestCases.length === 0) {
      return null;
    }
    const testCase = resultTestCases.find((tc) => tc.testCase === index + 1);
    if (!testCase) return null;
    return testCase.passed ? 'accepted' : 'wrong';
  };

  // Determine if the active test case is a user-added (new) case
  const isUserAdded = activeCase >= initialTestCaseCount.current;

  if (!testcases || testcases.length === 0) {
    return (
      <div className='flex flex-col h-full bg-premium-darker text-white'>
        <div className='p-4 flex flex-col h-full'>
          <Card className='bg-premium-darker border border-premium-blue shadow-lg premium-border-gradient flex-1'>
            <CardContent className='p-4 flex items-center justify-center'>
              <div className='text-center'>
                <p className='text-zinc-400 mb-4'>No test cases available</p>
                <Button
                  variant='outline'
                  onClick={() => {
                    if (onChange) {
                      onChange(0, 'input', '');
                      onChange(0, 'output', '');
                    }
                  }}
                  className='border-premium-blue text-premium-blue hover:bg-premium-blue/10'
                >
                  Add Test Case
                </Button>
              </div>
            </CardContent>
          </Card>
        </div>
      </div>
    );
  }

  return (
    <div className='flex flex-col h-full bg-premium-darker text-white'>
      <div className='p-4 flex flex-col h-full'>
        <div className='flex items-center justify-between mb-4'>
          <div className='flex items-center gap-2'>
            <div className='flex items-center gap-1 text-zinc-400'>
              <div className='h-5 w-5 min-w-5 flex items-center justify-center'>
                {showResults &&
                  activeResult &&
                  activeResult.status === 'wrong' && (
                    <X size={16} className='text-red-500' />
                  )}
                {showResults &&
                  activeResult &&
                  activeResult.status === 'accepted' && (
                    <Check size={16} className='text-emerald-500' />
                  )}
              </div>
              <span>Test Case</span>
            </div>
          </div>
          <Button
            variant='ghost'
            size='icon'
            className='h-8 w-8 text-zinc-400 hover:text-white'
            onClick={handleRunCode}
            disabled={isRunning}
          >
            <RefreshCw size={16} className={isRunning ? 'animate-spin' : ''} />
          </Button>
        </div>

        <div className='flex gap-2 mb-4 overflow-x-auto pb-1'>
          {testcases.map((testcase, index) => {
            const status = getTestCaseStatus(index);
            const hasIcon = showResults && status;

            return (
              <Button
                key={index}
                variant={activeCase === index ? 'default' : 'outline'}
                size='sm'
                className={cn(
                  'h-8 relative premium-button',
                  activeCase === index
                    ? 'bg-premium-blue text-white border-premium-blue'
                    : 'bg-transparent text-zinc-400 border-zinc-800 hover:border-premium-blue',
                  hasIcon ? 'pr-6' : ''
                )}
                onClick={() => setActiveCase(index)}
              >
                <span>Case {index + 1}</span>
                {hasIcon && (
                  <div
                    className={cn(
                      'absolute right-1 top-1 flex items-center justify-center',
                      'h-4 w-4'
                    )}
                  >
                    {status === 'wrong' && (
                      <X size={14} className='text-red-500' />
                    )}
                    {status === 'accepted' && (
                      <Check size={14} className='text-emerald-500' />
                    )}
                  </div>
                )}
              </Button>
            );
          })}
          {/* <Button
            variant='ghost'
            size='sm'
            className='h-8 text-zinc-400 hover:text-white'
            onClick={addNewCase}
          >
            +
          </Button> */}
        </div>

        <Card className='bg-premium-darker border border-premium-blue shadow-lg border-gray-700 flex-1 overflow-auto'>
          <CardContent className='p-4 space-y-4'>
            {showResults && activeResult && activeResult.status && (
              <div className='flex items-center justify-between mb-2'>
                <div
                  className={cn(
                    'text-lg font-medium',
                    getStatusColor(activeResult.status)
                  )}
                >
                  {activeResult.status === 'wrong'
                    ? 'Wrong Answer'
                    : 'Accepted'}
                </div>
                {activeResult.runtime && (
                  <div className='flex items-center gap-4 text-sm text-zinc-400'>
                    <div className='flex items-center gap-1'>
                      <Clock size={14} />
                      <span>{activeResult.runtime}</span>
                    </div>
                    <div className='flex items-center gap-1'>
                      <Database size={14} />
                      <span>{activeResult.memory}</span>
                    </div>
                  </div>
                )}
              </div>
            )}

            <div className='space-y-2'>
              <label className='block text-sm font-medium text-amber-100'>
                Input
              </label>
              <Input
                value={activeTestCase.input || ''}
                onChange={(e) =>
                  onChange && onChange(activeCase, 'input', e.target.value)
                }
                placeholder='Enter test case input'
                className='bg-zinc-900 border-zinc-700 text-white'
              />
            </div>

            <div className='space-y-2 text-amber-100'>
              <label className='block text-sm font-medium'>
                Expected Output
              </label>
              <Input
                value={activeTestCase.expected || ''}
                onChange={(e) =>
                  onChange && onChange(activeCase, 'output', e.target.value)
                }
                placeholder='Enter expected output'
                className='bg-zinc-900 border-zinc-700 text-white'
              />
            </div>

            {showResults && activeResult && activeResult.status === 'wrong' && (
              <div className='grid grid-cols-2 gap-4 mt-4'>
                <div className='space-y-2'>
                  <label className='block text-sm font-medium text-amber-100'>
                    Your Output
                  </label>
                  <div className='rounded bg-zinc-900 p-3 font-mono text-sm text-zinc-300 border border-zinc-800'>
                    {activeResult.output || 'No output'}
                  </div>
                </div>
                <div className='space-y-2'>
                  <label className='block text-sm font-medium'>
                    Expected Output
                  </label>
                  <div className='rounded bg-zinc-900 p-3 font-mono text-sm text-zinc-300 border border-zinc-800'>
                    {activeResult.expected ||
                      activeTestCase.output ||
                      'No expected output'}
                  </div>
                </div>
              </div>
            )}

            {showResults &&
              activeResult &&
              activeResult.status === 'accepted' && (
                <div className='space-y-2 mt-4'>
                  <label className='block text-sm font-medium text-amber-100'>
                    Output
                  </label>
                  <div className='rounded bg-zinc-900 p-3 font-mono text-sm text-zinc-300 border border-zinc-800'>
                    {activeResult.output || 'No output'}
                  </div>
                </div>
              )}

            {/* {onRemove && (
              <div className='flex justify-end mt-4'>
                <Button
                  variant='ghost'
                  size='sm'
                  onClick={() => {
                    onRemove(activeCase);
                    setActiveCase(Math.max(0, activeCase - 1));
                  }}
                  disabled={!isUserAdded}
                  className='h-8 px-2 text-destructive hover:text-destructive hover:bg-destructive/10'
                >
                  <Trash2 size={16} className='mr-1' />
                  Remove Test Case
                </Button>
              </div>
            )} */}
          </CardContent>
        </Card>
      </div>
    </div>
  );
}


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\components\ProblemSet\TestResult.jsx
==============================

import { useState } from 'react';
import { Button } from '@/components/ui/button';
import { Check } from 'lucide-react';

export default function TestResult() {
  const [activeCase, setActiveCase] = useState(1);
  const [testResults, setTestResults] = useState([
    {
      id: 1,
      status: 'Accepted',
      runtime: '0 ms',
      input: '[1,1,2,3,3,4,4,8,8]',
      output: '2',
      expected: '2',
    },
    {
      id: 2,
      status: 'Accepted',
      runtime: '0 ms',
      input: '[3,3,7,7,10,11,11]',
      output: '10',
      expected: '10',
    },
  ]);

  return (
    <div className='flex flex-col h-full p-4 overflow-auto'>
      <div className='flex items-center gap-2 mb-4'>
        <div className='text-emerald-500 font-medium flex items-center gap-1.5'>
          <Check size={16} />
          <span>Accepted</span>
        </div>
        <div className='text-zinc-400 text-sm'>
          Runtime: {testResults.find((r) => r.id === activeCase)?.runtime}
        </div>
      </div>

      <div className='flex flex-wrap gap-2 mb-4'>
        {testResults.map((result) => (
          <Button
            key={result.id}
            variant={activeCase === result.id ? 'outline' : 'ghost'}
            size='sm'
            className={`h-8 ${
              activeCase === result.id
                ? 'border-zinc-700 bg-zinc-800 text-zinc-300'
                : 'text-zinc-400'
            }`}
            onClick={() => setActiveCase(result.id)}
          >
            <div className='h-2 w-2 rounded-full bg-emerald-500 mr-2'></div>
            Case {result.id}
          </Button>
        ))}
      </div>

      <div className='space-y-4 flex-1'>
        <div>
          <div className='text-sm text-zinc-500 mb-1'>Input</div>
          <div className='rounded bg-zinc-900 p-3 font-mono text-sm'>
            <div className='text-zinc-500'>nums =</div>
            <div className='text-zinc-300'>
              {testResults.find((r) => r.id === activeCase)?.input}
            </div>
          </div>
        </div>

        <div>
          <div className='text-sm text-zinc-500 mb-1'>Output</div>
          <div className='rounded bg-zinc-900 p-3 font-mono text-sm text-zinc-300'>
            {testResults.find((r) => r.id === activeCase)?.output}
          </div>
        </div>

        <div>
          <div className='text-sm text-zinc-500 mb-1'>Expected</div>
          <div className='rounded bg-zinc-900 p-3 font-mono text-sm text-zinc-300'>
            {testResults.find((r) => r.id === activeCase)?.expected}
          </div>
        </div>
      </div>
    </div>
  );
}


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\components\ProblemSheet\IndividualProblemSheetDetails.jsx
==============================

import { useEffect, useState } from 'react';
import { Button } from '@/components/ui/button';
import { Input } from '@/components/ui/input';
import {
  Card,
  CardContent,
  CardDescription,
  CardHeader,
  CardTitle,
} from '@/components/ui/card';
import { Badge } from '@/components/ui/badge';
import { Progress } from '@/components/ui/progress';
import { Avatar, AvatarFallback, AvatarImage } from '@/components/ui/avatar';
import {
  Table,
  TableBody,
  TableCell,
  TableHead,
  TableHeader,
  TableRow,
} from '@/components/ui/table';
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from '@/components/ui/select';
import {
  Dialog,
  DialogContent,
  DialogDescription,
  DialogFooter,
  DialogHeader,
  DialogTitle,
  DialogTrigger,
} from '@/components/ui/dialog';
import { Label } from '@/components/ui/label';
import {
  ArrowLeft,
  Search,
  Plus,
  CheckCircle2,
  Circle,
  Calendar,
  User,
  BookOpen,
  Target,
  Clock,
  Edit,
  Share2,
  ExternalLink,
  Code,
  Minus,
} from 'lucide-react';
import { Link, useNavigate, useParams } from 'react-router-dom';
import { useGetIndividualSheetDetails } from '@/hooks/apis/ProblemSheets/useGetIndividualSheetDetails';
import { SkeletonCard } from '@/Pages/SkeletonPage/SkeletonCard';
import { useGetAllProblems } from '@/hooks/apis/getAllProblems/useGetAllProblems';
import { useSelector } from 'react-redux';
import {
  AlertDialog,
  AlertDialogContent,
  AlertDialogDescription,
  AlertDialogFooter,
  AlertDialogAction,
  AlertDialogCancel,
  AlertDialogHeader,
  AlertDialogTitle,
  AlertDialogTrigger,
} from '../ui/alert-dialog';
import { useUpdateProblemsInSheet } from '@/hooks/apis/ProblemSheets/useUpdateProblemsInSheet';
// Mock data based on your structure

export default function IndividualProblemSheetDetails({ params }) {
  const [sheetData, setSheetData] = useState([]);
  const [searchQuery, setSearchQuery] = useState('');
  const [difficultyFilter, setDifficultyFilter] = useState('all');
  const [tagFilter, setTagFilter] = useState('all');
  const [completionFilter, setCompletionFilter] = useState('all');
  const [addProblemOpen, setAddProblemOpen] = useState(false);
  const [isAdmin, setIsAdmin] = useState(false); // Toggle for demo
  const [dialogSearchQuery, setDialogSearchQuery] = useState('');
  const [dialogDifficultyFilter, setDialogDifficultyFilter] = useState('all');
  const [isLoading, setIsLoading] = useState(false);
  const [sheetProblems, setSheetProblems] = useState([]);

  const navigate = useNavigate();

  const getDifficultyColor = (difficulty) => {
    switch (difficulty.toLowerCase()) {
      case 'easy':
        return 'bg-green-100 text-green-800 border-green-200';
      case 'medium':
        return 'bg-yellow-100 text-yellow-800 border-yellow-200';
      case 'hard':
        return 'bg-red-100 text-red-800 border-red-200';
      default:
        return 'bg-gray-100 text-gray-800 border-gray-200';
    }
  };

  const {
    isLoading: sheetDetailsLoading,
    isSuccess,
    error,
    getIndividualSheetDetailsMutation,
  } = useGetIndividualSheetDetails();

  const {
    isPending,
    isSuccess: getAllProblemSuccess,
    error: getAllProblemError,
    getAllProblemsMutation,
  } = useGetAllProblems();

  const {
    isLoading: isUpdateLoading,
    isSucess,
    error: updateError,
    updateProblemsInSheetMutation,
  } = useUpdateProblemsInSheet();



  console.log('isSuccess', isSuccess);

  const [problems, setProblems] = useState([]);
  //   const [filteredProblems, setFilteredProblems] = useState(problems);

  console.log('problems', problems);

  const authUser = useSelector((state) => state.auth);
  const { sheetId } = useParams();

  console.log('sheetId', sheetId);

  const fetchSheetDetails = async () => {
    try {
      const data = await getIndividualSheetDetailsMutation(sheetId);
      setSheetData(data?.sdeSheet);
    } catch (error) {
      console.error('Error fetching sheet details:', error);
    }
  };

  useEffect(() => {
    // Fetch sheet details when component mounts or sheetId changes
    fetchSheetDetails();
  }, [sheetId]);

  console.log('Sheet Data:', sheetData);

  const getAllProblems = async () => {
    try {
      const userId = authUser?.id || null;
      const data = await getAllProblemsMutation(userId);
      console.log('Fetched all problems:', data);
      setProblems(data.problems);
      //   setFilteredProblems(data.problems);
    } catch (error) {
      console.error('Error fetching problems:', error);
    }
  };

  console.log('problems', problems);

  useEffect(() => {
    if (authUser?.role === 'ADMIN') {
      setIsAdmin(true);
    }
    getAllProblems();
    if (isSuccess) {
      console.log('Successfully fetched all problems');
    }
  }, []);

  // Updated filtering function
  const filteredProblems = sheetData?.problems?.filter((problemItem) => {
    const problem = problemItem.problem;

    // Search filter - check title and tags
    const matchesSearch =
      problem.title.toLowerCase().includes(searchQuery.toLowerCase()) ||
      problem.tags.some((tag) =>
        tag.toLowerCase().includes(searchQuery.toLowerCase())
      );

    // Difficulty filter
    const matchesDifficulty =
      difficultyFilter === 'all' ||
      problem.difficulty.toLowerCase() === difficultyFilter.toLowerCase();

    // Tag filter
    const matchesTag = tagFilter === 'all' || problem.tags.includes(tagFilter);

    // Completion filter - check if problemItem has completed property
    const isCompleted = problemItem.completed || false; // Default to false if not present
    const matchesCompletion =
      completionFilter === 'all' ||
      (completionFilter === 'completed' && isCompleted) ||
      (completionFilter === 'pending' && !isCompleted);

    return (
      matchesSearch && matchesDifficulty && matchesTag && matchesCompletion
    );
  });

  const completedCount = sheetData?.problems?.filter(
    (item) => item.completed || false
  ).length;
  const progressPercentage =
    sheetData.totalProblems > 0
      ? (completedCount / sheetData.totalProblems) * 100
      : 0;

  console.log('filteredProblems', filteredProblems);

  const toggleProblemCompletion = (problemId) => {
    setSheetData((prev) => ({
      ...prev,
      problems: prev.problems.map((p) =>
        p.id === problemId ? { ...p, completed: !p.completed } : p
      ),
    }));
  };

  const handleAddProblemClick = () => {
    // setAddProblemOpen(true);
  };

  // Check if a problem is already in the sheet
  const isProblemInSheet = (problemId) => {
    return sheetData.problems.some(
      (sheetProblem) => sheetProblem.problemId === problemId
    );
  };

  // Add problem to sheet with proper validation
  const addProblemToSheet = async (problem) => {
    // Check if problem is already in sheet
    if (isProblemInSheet(problem.id)) {
      alert('This problem is already in the sheet!');
      return;
    }

    setIsLoading(true);
    try {
      // Simulate API call delay
      await new Promise((resolve) => setTimeout(resolve, 500));

      const newSheetProblem = {
        id: `temp-${Date.now()}-${Math.random()}`,
        sheetId: sheetData.id,
        problemId: problem.id,
        createdAt: new Date().toISOString(),
        updatedAt: new Date().toISOString(),
        problem: problem,
        completed: false,
      };

      setSheetData((prev) => {
        const updatedTags = [...new Set([...prev.allTags, ...problem.tags])];
        const updatedDifficulties = [
          ...new Set([...prev.allDifficulties, problem.difficulty]),
        ];

        return {
          ...prev,
          problems: [...prev.problems, newSheetProblem],
          totalProblems: prev.totalProblems + 1,
          allTags: updatedTags,
          allDifficulties: updatedDifficulties,
        };
      });

      console.log(`Added problem "${problem.title}" to sheet`);
    } catch (error) {
      console.error('Error adding problem to sheet:', error);
      // alert('Failed to add problem to sheet. Please try again.');
    } finally {
      setIsLoading(false);
    }
  };

  // Remove problem from sheet with proper validation
  const removeProblemFromSheet = async (problemId) => {
    // Check if problem exists in sheet
    if (!isProblemInSheet(problemId)) {
      alert('This problem is not in the sheet!');
      return;
    }

    setIsLoading(true);
    try {
      // Simulate API call delay
      await new Promise((resolve) => setTimeout(resolve, 500));

      setSheetData((prev) => {
        const updatedProblems = prev.problems.filter(
          (sp) => sp.problemId !== problemId
        );

        // Recalculate tags and difficulties from remaining problems
        const remainingTags = [
          ...new Set(updatedProblems.flatMap((p) => p.problem.tags)),
        ];
        const remainingDifficulties = [
          ...new Set(updatedProblems.map((p) => p.problem.difficulty)),
        ];

        return {
          ...prev,
          problems: updatedProblems,
          totalProblems: updatedProblems.length,
          allTags: remainingTags,
          allDifficulties: remainingDifficulties,
        };
      });

      console.log(`Removed problem with ID ${problemId} from sheet`);
    } catch (error) {
      console.error('Error removing problem from sheet:', error);
      alert('Failed to remove problem from sheet. Please try again.');
    } finally {
      setIsLoading(false);
    }
  };

  const handleUpdateProblems = async () => {
    setIsLoading(true);
    try {
      setAddProblemOpen(false);

      let sheetProblemsId = sheetData.problems.map(
        (problem) => problem.problem.id
      );
      console.log('sheetProblemsId', sheetProblemsId);

      // Call the mutation properly
      await updateProblemsInSheetMutation({
        sheetId: sheetData.id,
        problemIds: sheetProblemsId,
      });

      console.log('Updated problems in sheet successfully!');
    } catch (error) {
      console.error('Error updating problems in sheet:', error);
    } finally {
      setIsLoading(false);
    }
  };
  

  // Filter problems in dialog (excluding problems already in sheet for "Add" view)
  const filteredDialogProblems = problems.filter((problem) => {
    const matchesSearch =
      problem.title.toLowerCase().includes(dialogSearchQuery.toLowerCase()) ||
      problem.tags.some((tag) =>
        tag.toLowerCase().includes(dialogSearchQuery.toLowerCase())
      );

    const matchesDifficulty =
      dialogDifficultyFilter === 'all' ||
      problem.difficulty.toLowerCase() === dialogDifficultyFilter.toLowerCase();

    return matchesSearch && matchesDifficulty;
  });







  return (
    <div
      className='min-h-screen bg-gradient-to-br from-premium-midnight to-premium-cyan-dark
'
    >
      {isSuccess ? (
        <>
          <div
            className='bg-gradient-to-r from-premium-shadow to-premium-purple
 border-b border-gray-200'
          >
            <div className='max-w-7xl mx-auto px-4 sm:px-6 lg:px-8'>
              <div className='flex justify-between items-center h-16'>
                <div className='flex items-center space-x-4'>
                  <Button
                    className='bg-blue-600 hover:bg-blue-700'
                    onClick={() => navigate(-1)}
                  >
                    <ArrowLeft className='h-4 w-4 mr-2' />
                    Back
                  </Button>
                </div>

                <div className='flex items-center space-x-4'>
                  {/* <Button variant='outline' size='sm'>
                    <Share2 className='h-4 w-4 mr-2' />
                    Share
                  </Button> */}
                  {isAdmin && (
                    <Dialog
                      open={addProblemOpen}
                      onOpenChange={setAddProblemOpen}
                    >
                      <DialogTrigger asChild>
                        <Button
                          className='bg-blue-600 hover:bg-blue-700'
                          onClick={handleAddProblemClick}
                        >
                          <Plus className='h-4 w-4 mr-2' />
                          Add Problem
                        </Button>
                      </DialogTrigger>
                      <DialogContent className='w-full sm:max-w-3xl max-h-[calc(100vh-4rem)] overflow-y-auto px-6 py-8'>
                        <DialogHeader>
                          <DialogTitle>Add New Problem</DialogTitle>
                          <DialogDescription>
                            Add a new problem to this sheet
                          </DialogDescription>
                        </DialogHeader>

                        {/* Problems List */}
                        <div className='mt-4'>
                          <div className='bg-white rounded-lg border max-h-96 overflow-y-auto'>
                            <Table>
                              <TableHeader className='sticky top-0 bg-white border-b'>
                                <TableRow>
                                  <TableHead className='w-16'>#</TableHead>
                                  <TableHead>Title</TableHead>
                                  <TableHead className='w-24'>
                                    Difficulty
                                  </TableHead>
                                  <TableHead className='w-32'>Status</TableHead>
                                  <TableHead className='w-32'>Action</TableHead>
                                </TableRow>
                              </TableHeader>
                              <TableBody>
                                {filteredDialogProblems.length > 0 ? (
                                  filteredDialogProblems.map((problem) => {
                                    const isInSheet = isProblemInSheet(
                                      problem.id
                                    );
                                    return (
                                      <TableRow
                                        key={problem.id}
                                        className=''
                                      >
                                        <TableCell className='font-medium'>
                                          {problem.problemNumber}
                                        </TableCell>
                                        <TableCell>
                                          <div className='flex flex-col'>
                                            <span className='font-medium'>
                                              {problem.title}
                                            </span>
                                            <div className='flex flex-wrap gap-1 mt-1'>
                                              {problem.tags
                                                .slice(0, 3)
                                                .map((tag) => (
                                                  <Badge
                                                    key={tag}
                                                    variant='outline'
                                                    className='text-xs'
                                                  >
                                                    {tag}
                                                  </Badge>
                                                ))}
                                              {problem.tags.length > 3 && (
                                                <Badge
                                                  variant='outline'
                                                  className='text-xs'
                                                >
                                                  +{problem.tags.length - 3}
                                                </Badge>
                                              )}
                                            </div>
                                          </div>
                                        </TableCell>
                                        <TableCell>
                                          <Badge
                                            className={getDifficultyColor(
                                              problem.difficulty
                                            )}
                                          >
                                            {problem.difficulty}
                                          </Badge>
                                        </TableCell>
                                        <TableCell>
                                          {isInSheet ? (
                                            <Badge
                                              variant='secondary'
                                              className='bg-green-100 text-green-800'
                                            >
                                              In Sheet
                                            </Badge>
                                          ) : (
                                            <Badge variant='outline'>
                                              Available
                                            </Badge>
                                          )}
                                        </TableCell>
                                        <TableCell>
                                          {isInSheet ? (
                                            <AlertDialog>
                                              <AlertDialogTrigger asChild>
                                                <Button
                                                  variant='destructive'
                                                  size='sm'
                                                  disabled={isLoading}
                                                >
                                                  <Minus className='h-4 w-4 mr-1' />
                                                  Remove
                                                </Button>
                                              </AlertDialogTrigger>
                                              <AlertDialogContent>
                                                <AlertDialogHeader>
                                                  <AlertDialogTitle>
                                                    Remove Problem
                                                  </AlertDialogTitle>
                                                  <AlertDialogDescription>
                                                    Are you sure you want to
                                                    remove "{problem.title}"
                                                    from this sheet? This action
                                                    cannot be undone.
                                                  </AlertDialogDescription>
                                                </AlertDialogHeader>
                                                <AlertDialogFooter>
                                                  <AlertDialogCancel>
                                                    Cancel
                                                  </AlertDialogCancel>
                                                  <AlertDialogAction
                                                    onClick={() =>
                                                      removeProblemFromSheet(
                                                        problem.id
                                                      )
                                                    }
                                                    className='bg-red-600 hover:bg-red-700'
                                                  >
                                                    Remove
                                                  </AlertDialogAction>
                                                </AlertDialogFooter>
                                              </AlertDialogContent>
                                            </AlertDialog>
                                          ) : (
                                            <Button
                                              variant='default'
                                              size='sm'
                                              onClick={() =>
                                                addProblemToSheet(problem)
                                              }
                                              disabled={isLoading}
                                              className='bg-green-600 hover:bg-green-700'
                                            >
                                              <Plus className='h-4 w-4 mr-1' />
                                              Add
                                            </Button>
                                          )}
                                        </TableCell>
                                      </TableRow>
                                    );
                                  })
                                ) : (
                                  <TableRow>
                                    <TableCell
                                      colSpan={5}
                                      className='text-center py-8 text-gray-500'
                                    >
                                      No problems found matching your filters.
                                    </TableCell>
                                  </TableRow>
                                )}
                              </TableBody>
                            </Table>
                          </div>
                        </div>

                        <DialogFooter>
                          <Button
                            variant='outline'
                            onClick={handleUpdateProblems}
                          >
                            Save Changes
                          </Button>
                        </DialogFooter>
                      </DialogContent>
                    </Dialog>
                  )}
                </div>
              </div>
            </div>
          </div>

          {/* Main Content */}
          <main className=' max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8'>
            {/* Sheet Header */}
            <div className='mb-8'>
              <Card className='bg-[hsl(var(--premium-rose))] border border-pink-300 text-white p-4 rounded-lg'>
                <CardHeader>
                  <div className='flex items-start justify-between'>
                    <div className='flex-1'>
                      <CardTitle className='text-2xl mb-2'>
                        {sheetData.name}
                      </CardTitle>
                      <CardDescription className='text-base mb-4'>
                        {sheetData.description}
                      </CardDescription>

                      <div className='flex items-center space-x-6 text-sm text-gray-600'>
                        <div className='flex items-center space-x-2'>
                          <Avatar className='h-6 w-6'>
                            <AvatarImage
                              src={sheetData.user.image || '/placeholder.svg'}
                            />
                            <AvatarFallback>
                              {sheetData.user.name.charAt(0).toUpperCase()}
                            </AvatarFallback>
                          </Avatar>
                          <span>{sheetData.user.name}</span>
                          <span className='text-gray-400'>
                            @{sheetData.user.username}
                          </span>
                        </div>
                        <div className='flex items-center'>
                          <Calendar className='h-4 w-4 mr-1' />
                          Created{' '}
                          {new Date(sheetData.createdAt).toLocaleDateString()}
                        </div>
                      </div>
                    </div>

                    {/* {isAdmin && (
                      <Button variant='outline' size='sm' className='text-blue-600'>
                        <Edit className='h-4 w-4 mr-2' />
                        Edit Sheet
                      </Button>
                    )} */}
                  </div>
                </CardHeader>

                <CardContent>
                  <div className='grid grid-cols-1 md:grid-cols-4 gap-6'>
                    {/* Progress Card */}
                    <div className='bg-blue-50 p-4 rounded-lg'>
                      <div className='flex items-center justify-between mb-2'>
                        <span className='text-sm font-medium text-blue-700'>
                          Progress
                        </span>
                        <Target className='h-4 w-4 text-blue-600' />
                      </div>
                      <div className='text-2xl font-bold text-blue-900 mb-2'>
                        {completedCount}/{sheetData.totalProblems}
                      </div>
                      <Progress value={progressPercentage} className='h-2' />
                      <div className='text-xs text-blue-600 mt-1'>
                        {Math.round(progressPercentage)}% Complete
                      </div>
                    </div>

                    {/* Total Problems */}
                    <div className='bg-green-50 p-4 rounded-lg'>
                      <div className='flex items-center justify-between mb-2'>
                        <span className='text-sm font-medium text-green-700'>
                          Total Problems
                        </span>
                        <BookOpen className='h-4 w-4 text-green-600' />
                      </div>
                      <div className='text-2xl font-bold text-green-900'>
                        {sheetData.totalProblems}
                      </div>
                    </div>

                    {/* Difficulties */}
                    <div className='bg-purple-50 p-4 rounded-lg'>
                      <div className='flex items-center justify-between mb-2'>
                        <span className='text-sm font-medium text-purple-700'>
                          Difficulties
                        </span>
                        <Clock className='h-4 w-4 text-purple-600' />
                      </div>
                      <div className='flex flex-wrap gap-1'>
                        {sheetData.allDifficulties &&
                        sheetData.allDifficulties.length > 0 ? (
                          sheetData.allDifficulties.map((difficulty) => (
                            <Badge
                              key={difficulty}
                              variant='secondary'
                              className='text-xs'
                            >
                              {difficulty}
                            </Badge>
                          ))
                        ) : (
                          <span className='text-xs text-purple-600'>
                            No difficulties
                          </span>
                        )}
                      </div>
                    </div>

                    {/* Tags */}
                    <div className='bg-orange-50 p-4 rounded-lg'>
                      <div className='flex items-center justify-between mb-2'>
                        <span className='text-sm font-medium text-orange-700'>
                          Topics
                        </span>
                        <User className='h-4 w-4 text-orange-600' />
                      </div>
                      <div className='flex flex-wrap gap-1'>
                        {sheetData.allTags && sheetData.allTags.length > 0 ? (
                          <>
                            {sheetData.allTags.slice(0, 3).map((tag) => (
                              <Badge
                                key={tag}
                                variant='secondary'
                                className='text-xs'
                              >
                                {tag}
                              </Badge>
                            ))}
                            {sheetData.allTags.length > 3 && (
                              <Badge variant='secondary' className='text-xs'>
                                +{sheetData.allTags.length - 3}
                              </Badge>
                            )}
                          </>
                        ) : (
                          <span className='text-xs text-orange-600'>
                            No topics
                          </span>
                        )}
                      </div>
                    </div>
                  </div>
                </CardContent>
              </Card>
            </div>

            {/* Filters */}
            <div className='mb-6'>
              <Card className='bg-[hsl(var(--premium-rose))] text-white p-4 rounded-xl'>
                <CardContent className='p-4'>
                  <div className='flex flex-col sm:flex-row gap-4'>
                    <div className='relative flex-1'>
                      <Search className='absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4' />
                      <Input
                        placeholder='Search problems...'
                        value={searchQuery}
                        onChange={(e) => setSearchQuery(e.target.value)}
                        className='pl-10'
                      />
                    </div>

                    <Select
                      value={difficultyFilter}
                      onValueChange={setDifficultyFilter}
                    >
                      <SelectTrigger className='w-40'>
                        <SelectValue placeholder='Difficulty' />
                      </SelectTrigger>
                      <SelectContent>
                        <SelectItem value='all'>All Difficulties</SelectItem>
                        <SelectItem value='easy'>Easy</SelectItem>
                        <SelectItem value='medium'>Medium</SelectItem>
                        <SelectItem value='hard'>Hard</SelectItem>
                      </SelectContent>
                    </Select>

                    <Select value={tagFilter} onValueChange={setTagFilter}>
                      <SelectTrigger className='w-40'>
                        <SelectValue placeholder='Topic' />
                      </SelectTrigger>
                      <SelectContent>
                        <SelectItem value='all'>All Topics</SelectItem>
                        {sheetData.allTags &&
                          sheetData.allTags.map((tag) => (
                            <SelectItem key={tag} value={tag}>
                              {tag}
                            </SelectItem>
                          ))}
                      </SelectContent>
                    </Select>

                    <Select
                      value={completionFilter}
                      onValueChange={setCompletionFilter}
                    >
                      <SelectTrigger className='w-40'>
                        <SelectValue placeholder='Status' />
                      </SelectTrigger>
                      <SelectContent>
                        <SelectItem value='all'>All Status</SelectItem>
                        <SelectItem value='completed'>Completed</SelectItem>
                        <SelectItem value='pending'>Pending</SelectItem>
                      </SelectContent>
                    </Select>
                  </div>
                </CardContent>
              </Card>
            </div>

            {/* Problems Table */}
            <Card className='bg-[hsl(var(--premium-rose))] text-white p-4 rounded-xl shadow-lg'>
              <CardHeader>
                <CardTitle>Problems ({filteredProblems.length})</CardTitle>
              </CardHeader>
              <CardContent>
                <Table>
                  <TableHeader>
                    <TableRow>
                      <TableHead className='w-12'>Status</TableHead>
                      <TableHead className='w-16'>#</TableHead>
                      <TableHead>Title</TableHead>
                      <TableHead className='w-24'>Difficulty</TableHead>
                      <TableHead>Tags</TableHead>
                      <TableHead className='w-24'>Actions</TableHead>
                    </TableRow>
                  </TableHeader>
                  <TableBody>
                    {filteredProblems.length > 0 ? (
                      filteredProblems.map((problemItem) => (
                        <TableRow
                          key={problemItem.id}
                          className=''
                        >
                          <TableCell>
                            <Button
                              variant='ghost'
                              size='sm'
                              onClick={() =>
                                toggleProblemCompletion(problemItem.id)
                              }
                              className='p-0 h-6 w-6'
                            >
                              {problemItem.completed ? (
                                <CheckCircle2 className='h-5 w-5 text-green-600' />
                              ) : (
                                <Circle className='h-5 w-5 text-gray-400' />
                              )}
                            </Button>
                          </TableCell>
                          <TableCell className='font-medium'>
                            {problemItem.problem.problemNumber}
                          </TableCell>
                          <TableCell>
                            <div className='flex items-center space-x-2'>
                              <span
                                className={
                                  problemItem.completed
                                    ? 'line-through text-gray-500'
                                    : ''
                                }
                              >
                                {problemItem.problem.title}
                              </span>
                            </div>
                          </TableCell>
                          <TableCell>
                            <Badge
                              className={getDifficultyColor(
                                problemItem.problem.difficulty
                              )}
                            >
                              {problemItem.problem.difficulty}
                            </Badge>
                          </TableCell>
                          <TableCell>
                            <div className='flex flex-wrap gap-1 '>
                              {problemItem.problem.tags &&
                              problemItem.problem.tags.length > 0 ? (
                                <>
                                  {problemItem.problem.tags
                                    .slice(0, 2)
                                    .map((tag) => (
                                      <Badge
                                        key={tag}
                                        variant='outline'
                                        className='text-xs text-gray-950 bg-blue-400'
                                      >
                                        {tag}
                                      </Badge>
                                    ))}
                                  {problemItem.problem.tags.length > 2 && (
                                    <Badge
                                      variant='outline'
                                      className='text-xs'
                                    >
                                      +{problemItem.problem.tags.length - 2}
                                    </Badge>
                                  )}
                                </>
                              ) : (
                                <span className='text-xs text-gray-400'>
                                  No tags
                                </span>
                              )}
                            </div>
                          </TableCell>
                          <TableCell>
                            <Button variant='ghost' size='sm' onClick={() => navigate(`/problems/${problemItem.problem.id}`)}>
                              <ExternalLink className='h-4 w-4' />
                            </Button>
                          </TableCell>
                        </TableRow>
                      ))
                    ) : (
                      <TableRow>
                        <TableCell
                          colSpan={6}
                          className='text-center py-8 text-gray-500'
                        >
                          No problems found matching your filters.
                        </TableCell>
                      </TableRow>
                    )}
                  </TableBody>
                </Table>
              </CardContent>
            </Card>
          </main>
        </>
      ) : (
        <>
          <SkeletonCard />
        </>
      )}
      {/* Header */}
    </div>
  );
}


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\components\ProblemSheet\ProblemSheet.jsx
==============================

import { use, useEffect, useMemo, useState } from 'react';
import { Button } from '@/components/ui/button';
import { Input } from '@/components/ui/input';
import {
  Card,
  CardContent,
  CardDescription,
  CardFooter,
  CardHeader,
  CardTitle,
} from '@/components/ui/card';
import { Badge } from '@/components/ui/badge';
import {
  Dialog,
  DialogContent,
  DialogDescription,
  DialogFooter,
  DialogHeader,
  DialogTitle,
  DialogTrigger,
} from '@/components/ui/dialog';
import { Label } from '@/components/ui/label';
import { Textarea } from '@/components/ui/textarea';
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from '@/components/ui/select';
import { Progress } from '@/components/ui/progress';
import { Avatar, AvatarFallback, AvatarImage } from '@/components/ui/avatar';
import {
  DropdownMenu,
  DropdownMenuContent,
  DropdownMenuItem,
  DropdownMenuLabel,
  DropdownMenuSeparator,
  DropdownMenuTrigger,
} from '@/components/ui/dropdown-menu';
import {
  Plus,
  Search,
  Filter,
  BookOpen,
  Clock,
  Star,
  MoreVertical,
  Edit,
  Trash2,
  Eye,
  Code,
  Target,
  TrendingUp,
  Calendar,
  User,
  Settings,
  LogOut,
} from 'lucide-react';
import { useGetAllSheetDetails } from '@/hooks/apis/ProblemSheets/useGetAllSheetDetails';
import { set } from 'date-fns';
import { SkeletonCard } from '@/Pages/SkeletonPage/SkeletonCard';
import { useCreateSheet } from '@/hooks/apis/ProblemSheets/useCreateSheet';
import {
  AlertDialog,
  AlertDialogAction,
  AlertDialogCancel,
  AlertDialogContent,
  AlertDialogDescription,
  AlertDialogFooter,
  AlertDialogHeader,
  AlertDialogTitle,
} from '../ui/alert-dialog';
import { useDeleteSheet } from '@/hooks/apis/ProblemSheets/useDeleteSheet';
import { useNavigate } from 'react-router-dom';
import { useSelector } from 'react-redux';

export default function ProblemSheet() {
  const [isAdmin, setIsAdmin] = useState(false);
  const [searchQuery, setSearchQuery] = useState('');
  const [selectedSheet, setSelectedSheet] = useState(null);
  const [createSheetOpen, setCreateSheetOpen] = useState(false);
  const [addProblemOpen, setAddProblemOpen] = useState(false);
  const [viewMode, setViewMode] = useState('grid');

  const [sheetDetails, setSheetDetails] = useState([]);

  const [dropdownOpen, setDropdownOpen] = useState(false);
  const [openDropdownId, setOpenDropdownId] = useState(null);

  const [sheetData, setSheetData] = useState({
    name: '',
    description: '',
  });

  const [deleteConfirmOpen, setDeleteConfirmOpen] = useState(false);
  const [sheetToDelete, setSheetToDelete] = useState(null);

  const navigate = useNavigate();

  const authUser = useSelector((state) => state.auth);

  console.log('isAdmin:', isAdmin);
  console.log('authUser:', authUser);

  const handleInputChange = (field, value) => {
    setSheetData((prev) => ({
      ...prev,
      [field]: value,
    }));
  };

  const { isLoading, isSuccess, error, getAllSheetDetailsMutation } =
    useGetAllSheetDetails();

  const {
    isPending,
    isSuccess: createSheetSuccess,
    error: createSheetError,
    createSheetMutation,
  } = useCreateSheet();

  const {
    isLoading: deleteSheetLoading,
    isSucess: deleteSheetSuccess,
    error: deleteSheetError,
    deleteSheetMutation,
  } = useDeleteSheet();

  const fetchSheetDetails = async () => {
    try {
      const userId = authUser?.id || null;
      const data = await getAllSheetDetailsMutation();
      console.log('Fetched sheet details:', data);
      setSheetDetails(data.sdeSheets || []);
    } catch (error) {
      console.error('Error fetching sheet details:', error);
    }
  };

  useEffect(() => {
    if (authUser?.role === 'ADMIN') {
      setIsAdmin(true);
    }
    fetchSheetDetails();
  }, []);

  const createSheet = async () => {
    try {
      console.log('sheetData:', sheetData);
      const data = await createSheetMutation(sheetData);
      console.log('Successfully created sheet:', data);
      // Always update sheetDetails regardless of createSheetSuccess
      await fetchSheetDetails();
    } catch (error) {
      console.error('Error creating sheet:', error);
    }
  };

  const handleDeleteSheet = async (sheetId) => {
    try {
      console.log('sheetId:', sheetId);
      await deleteSheetMutation(sheetId);
      setSheetToDelete(null);
      await fetchSheetDetails();
    } catch (error) {
      console.error('Error deleting sheet:', error);
      return;
    }
  };

  console.log('createSheetSuccess', createSheetSuccess);

  const getDifficultyColor = (difficulty) => {
    switch (difficulty.toLowerCase()) {
      case 'easy':
        return 'bg-green-100 text-green-800';
      case 'medium':
        return 'bg-yellow-100 text-yellow-800';
      case 'hard':
        return 'bg-red-100 text-red-800';
      default:
        return 'bg-gray-100 text-gray-800';
    }
  };

  // Updated filter function for sheetDetails array
  // Updated filter function for sheetDetails array with error handling
  const filteredSheets = useMemo(() => {
    return sheetDetails.filter((sheet) => {
      if (!sheet) return false;

      const name = sheet.name || '';
      const description = sheet.description || '';
      const tags = sheet.allTags || [];
      const query = (searchQuery || '').toLowerCase();

      return (
        name.toLowerCase().includes(query) ||
        description.toLowerCase().includes(query) ||
        tags.some((tag) => (tag || '').toLowerCase().includes(query))
      );
    });
  }, [sheetDetails, searchQuery]);

  console.log('Filtered Sheets:', filteredSheets);

  console.log('sheetDetails:', sheetDetails);

  console.log('isSuccess:', isSuccess);
  // console.log("isLoading:", isLoading);

  const handleCreateSheet = async () => {
    // Logic to create a new sheet
    // console.log('Creating new sheet...');
    await createSheet();
    setCreateSheetOpen(false);
    setSheetData({
      name: '',
      description: '',
    });
  };

  return (
    <div className='min-h-screen  bg-premium-darker '>
      {isSuccess ? (
        <>
          {/* Header */}
          {isAdmin && (
            <header className='bg-[hsl(var(--premium-aqua))] text-[hsl(var(--premium-rose))] p-4 rounded-lg border-b border-gray-200 sticky top-0 z-50'>
              <div className='max-w-7xl mx-auto px-4 sm:px-6 lg:px-8'>
                <div className='flex justify-between items-center h-16'>
                  <div className='flex items-center space-x-4'>
                    <Dialog
                      open={createSheetOpen}
                      onOpenChange={setCreateSheetOpen}
                    >
                      <DialogTrigger asChild>
                        <Button className='bg-blue-600 hover:bg-blue-700'>
                          <Plus className='h-4 w-4 mr-2' />
                          Create Sheet
                        </Button>
                      </DialogTrigger>
                      <DialogContent className='sm:max-w-[525px]'>
                        <DialogHeader>
                          <DialogTitle>Create New SDE Sheet</DialogTitle>
                          <DialogDescription>
                            Create a new problem sheet for interview preparation
                          </DialogDescription>
                        </DialogHeader>
                        <div className='grid gap-4 py-4'>
                          <div className='grid gap-2'>
                            <Label htmlFor='title'>Title</Label>
                            <Input
                              id='title'
                              placeholder='Enter sheet title'
                              value={sheetData.name}
                              onChange={(e) =>
                                handleInputChange('name', e.target.value)
                              }
                            />
                          </div>
                          <div className='grid gap-2'>
                            <Label htmlFor='description'>Description</Label>
                            <Textarea
                              id='description'
                              placeholder='Describe your sheet'
                              value={sheetData.description}
                              onChange={(e) =>
                                handleInputChange('description', e.target.value)
                              }
                            />
                          </div>
                          {/* <div className='grid gap-2'>
                            <Label htmlFor='difficulty'>Difficulty Level</Label>
                            <Select>
                              <SelectTrigger>
                                <SelectValue placeholder='Select difficulty' />
                              </SelectTrigger>
                              <SelectContent>
                                <SelectItem value='easy'>Easy</SelectItem>
                                <SelectItem value='medium'>Medium</SelectItem>
                                <SelectItem value='hard'>Hard</SelectItem>
                                <SelectItem value='mixed'>Mixed</SelectItem>
                              </SelectContent>
                            </Select>
                          </div> */}
                          {/* <div className='grid gap-2'>
                            <Label htmlFor='tags'>Tags (comma separated)</Label>
                            <Input
                              id='tags'
                              placeholder='Arrays, Strings, Trees...'
                            />
                          </div> */}
                        </div>
                        <DialogFooter>
                          <Button
                            type='submit'
                            onClick={handleCreateSheet}
                            className='bg-blue-600 hover:bg-blue-700'
                          >
                            Create Sheet
                          </Button>
                        </DialogFooter>
                      </DialogContent>
                    </Dialog>
                  </div>
                </div>
              </div>
            </header>
          )}

          <main className='max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 '>
            {/* Stats Cards */}
            <div className='grid grid-cols-1 md:grid-cols-4 gap-6 mb-8 '>
              <Card className='bg-gradient-to-br from-[#1c1230] via-[#2a1843] to-[#22113a] p-4 rounded text-white'>
                <CardContent className='p-6'>
                  <div className='flex items-center'>
                    <BookOpen className='h-8 w-8 text-blue-600' />
                    <div className='ml-4'>
                      <p className='text-sm font-medium text-pink-500'>
                        Total Sheets
                      </p>
                      <p className='text-2xl font-bold text-teal-700'>
                        {sheetDetails.length}
                      </p>
                    </div>
                  </div>
                </CardContent>
              </Card>

              <Card className='bg-gradient-to-br from-[#1c1230] via-[#2a1843] to-[#22113a] p-4 rounded text-white'>
                <CardContent className='p-6'>
                  <div className='flex items-center'>
                    <Target className='h-8 w-8 text-green-600' />
                    <div className='ml-4'>
                      <p className='text-sm font-medium text-pink-500'>
                        Total Problems
                      </p>
                      <p className='text-2xl font-bold text-teal-700'>
                        {sheetDetails.reduce(
                          (total, sheet) => total + sheet.totalProblems,
                          0
                        )}
                      </p>
                    </div>
                  </div>
                </CardContent>
              </Card>

              {/* <Card>
                <CardContent className='p-6'>
                  <div className='flex items-center'>
                    <TrendingUp className='h-8 w-8 text-purple-600' />
                    <div className='ml-4'>
                      <p className='text-sm font-medium text-gray-600'>
                        Success Rate
                      </p>
                      <p className='text-2xl font-bold text-gray-900'>78%</p>
                    </div>
                  </div>
                </CardContent>
              </Card>

              <Card>
                <CardContent className='p-6'>
                  <div className='flex items-center'>
                    <Clock className='h-8 w-8 text-orange-600' />
                    <div className='ml-4'>
                      <p className='text-sm font-medium text-gray-600'>
                        Study Streak
                      </p>
                      <p className='text-2xl font-bold text-gray-900'>
                        12 days
                      </p>
                    </div>
                  </div>
                </CardContent>
              </Card> */}
            </div>

            {/* Search and Filters */}
            <div className='flex flex-col sm:flex-row gap-4 mb-6'>
              <div className='relative flex-1'>
                <Search className='absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4' />
                <Input
                  placeholder='Search sheets by title, description, or tags...'
                  value={searchQuery}
                  onChange={(e) => setSearchQuery(e.target.value)}
                  className='pl-10'
                />
              </div>
              <div className='flex gap-2'>
                <Button variant='outline' size='sm' className='text-blue-600'>
                  <Filter className='h-4 w-4 mr-2 ' />
                  Filter
                </Button>
                <Select
                  value={viewMode}
                  onValueChange={(value) => setViewMode(value)}
                >
                  <SelectTrigger className='w-32'>
                    <SelectValue />
                  </SelectTrigger>
                  <SelectContent>
                    <SelectItem value='grid'>Grid View</SelectItem>
                    <SelectItem value='list'>List View</SelectItem>
                  </SelectContent>
                </Select>
              </div>
            </div>

            {/* Sheets Grid/List */}
            <div
              className={
                viewMode === 'grid'
                  ? 'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6'
                  : 'space-y-4'
              }
            >
              {filteredSheets.map((sheet) => (
                <Card
                  key={sheet.id}
                  className='bg-gradient-to-r from-[#1a153b] to-[#22114c] p-4 rounded text-white'
                  onClick={() => navigate(`/dsaSheet/${sheet.id}`)}
                >
                  <CardHeader>
                    <div className='flex items-start justify-between'>
                      <div className='flex-1'>
                        <CardTitle className='text-lg mb-2'>
                          {sheet.name}
                        </CardTitle>
                        <CardDescription className='text-sm text-shadow-sky-400 line-clamp-2'>
                          {sheet.description}
                        </CardDescription>
                      </div>
                      {isAdmin && (
                        <DropdownMenu
                          open={openDropdownId === sheet.id}
                          onOpenChange={(open) => {
                            if (open) {
                              setOpenDropdownId(sheet.id);
                            } else {
                              setOpenDropdownId(null);
                            }
                          }}
                        >
                          <DropdownMenuTrigger asChild>
                            <Button
                              variant='ghost'
                              size='sm'
                              onClick={(e) => e.stopPropagation()}
                            >
                              <MoreVertical className='h-4 w-4' />
                            </Button>
                          </DropdownMenuTrigger>
                          <DropdownMenuContent align='end'>
                            {/* <DropdownMenuItem>
                              <Eye className='mr-2 h-4 w-4' />
                              View Details
                            </DropdownMenuItem> */}
                            {/* <DropdownMenuItem>
                              <Edit className='mr-2 h-4 w-4' />
                              Edit Sheet
                            </DropdownMenuItem> */}
                            {/* <DropdownMenuItem
                              onClick={() => {
                                setDropdownOpen(false); // manually close dropdown
                                setTimeout(() => setAddProblemOpen(true), 50);
                              }}
                              className='text-blue-600'
                            >
                              <Plus className='mr-2 h-4 w-4' />
                              Add Problem
                            </DropdownMenuItem> */}
                            {/* <DropdownMenuSeparator /> */}
                            <DropdownMenuItem
                              className='text-red-600'
                              onClick={(e) => {
                                e.stopPropagation();
                                setSheetToDelete(sheet);
                                setDeleteConfirmOpen(true);
                                setOpenDropdownId(null); // Close dropdown
                              }}
                            >
                              <Trash2 className='mr-2 h-4 w-4' />
                              Delete
                            </DropdownMenuItem>
                          </DropdownMenuContent>
                        </DropdownMenu>
                      )}
                    </div>

                    <div className='flex items-center space-x-2 mt-3'>
                      <Avatar className='h-6 w-6'>
                        <AvatarImage
                          src={sheet.user.image || '/placeholder.svg'}
                        />
                        <AvatarFallback>{sheet.user.name[0]}</AvatarFallback>
                      </Avatar>
                      <span className='text-sm text-orange-50'>
                        {sheet.user.name}
                      </span>
                    </div>
                  </CardHeader>

                  <CardContent>
                    <div className='space-y-4'>
                      {/* Progress - using totalProblems since we don't have completedProblems */}
                      <div className='space-y-4'>
                        <div>
                          <div className='flex justify-between text-xs text-gray-300 mb-2'>
                            <span>Total Problems</span>
                            <span>{sheet.totalProblems}</span>
                          </div>

                          {/* <div className='w-full bg-gray-700/60 rounded h-2 overflow-hidden'>
                            <div
                              className={`h-full transition-all duration-300 ${
                                sheet.totalProblems > 0
                                  ? 'bg-gradient-to-r from-emerald-400 to-cyan-400 shadow-lg shadow-emerald-400/30'
                                  : 'bg-red-400'
                              }`}
                              style={{
                                width: `${sheet.totalProblems > 0 ? 50 : 0}%`,
                              }}
                            />
                          </div> */}
                        </div>
                      </div>

                      {/* Tags */}
                      <div className='flex flex-wrap gap-1'>
                        {sheet.allTags.slice(0, 3).map((tag) => (
                          <Badge
                            key={tag}
                            variant='secondary'
                            className='text-xs'
                          >
                            {tag}
                          </Badge>
                        ))}
                        {sheet.allTags.length > 3 && (
                          <Badge variant='secondary' className='text-xs'>
                            +{sheet.allTags.length - 3}
                          </Badge>
                        )}
                      </div>

                      {/* Difficulty - showing all difficulties from the sheet */}
                      <div className='flex flex-wrap gap-1'>
                        {sheet.allDifficulties.map((difficulty, index) => (
                          <Badge
                            key={index}
                            className={getDifficultyColor(difficulty)}
                          >
                            {difficulty}
                          </Badge>
                        ))}
                        {sheet.allDifficulties.length === 0 && (
                          <Badge variant='outline' className='text-yellow-50'>
                            No Problems
                          </Badge>
                        )}
                      </div>
                    </div>
                  </CardContent>

                  <CardFooter className='pt-0'>
                    <div className='flex items-center justify-between w-full text-sm text-gray-500'>
                      <div className='flex items-center space-x-4'>
                        <div className='flex items-center'>
                          <Star className='h-4 w-4 mr-1' />0{' '}
                          {/* Default value since not in data */}
                        </div>
                        <div className='flex items-center'>
                          <Eye className='h-4 w-4 mr-1' />0{' '}
                          {/* Default value since not in data */}
                        </div>
                      </div>
                      <div className='flex items-center'>
                        <Calendar className='h-4 w-4 mr-1' />
                        {new Date(sheet.createdAt).toLocaleDateString()}
                      </div>
                    </div>
                  </CardFooter>
                </Card>
              ))}
            </div>

            {/* Add Problem Dialog */}
            <Dialog open={addProblemOpen} onOpenChange={setAddProblemOpen}>
              <DialogContent className='sm:max-w-[525px]'>
                <DialogHeader>
                  <DialogTitle>Add New Problem</DialogTitle>
                  <DialogDescription>
                    Add a new problem to the selected sheet
                  </DialogDescription>
                </DialogHeader>
                <div className='grid gap-4 py-4'>
                  <div className='grid gap-2'>
                    <Label htmlFor='problem-title'>Problem Title</Label>
                    <Input
                      id='problem-title'
                      placeholder='Enter problem title'
                    />
                  </div>
                  <div className='grid gap-2'>
                    <Label htmlFor='problem-link'>Problem Link</Label>
                    <Input
                      id='problem-link'
                      placeholder='https://leetcode.com/problems/...'
                    />
                  </div>
                  <div className='grid gap-2'>
                    <Label htmlFor='problem-difficulty'>Difficulty</Label>
                    <Select>
                      <SelectTrigger>
                        <SelectValue placeholder='Select difficulty' />
                      </SelectTrigger>
                      <SelectContent>
                        <SelectItem value='easy'>Easy</SelectItem>
                        <SelectItem value='medium'>Medium</SelectItem>
                        <SelectItem value='hard'>Hard</SelectItem>
                      </SelectContent>
                    </Select>
                  </div>
                  <div className='grid gap-2'>
                    <Label htmlFor='problem-category'>Category</Label>
                    <Select>
                      <SelectTrigger>
                        <SelectValue placeholder='Select category' />
                      </SelectTrigger>
                      <SelectContent>
                        <SelectItem value='arrays'>Arrays</SelectItem>
                        <SelectItem value='strings'>Strings</SelectItem>
                        <SelectItem value='trees'>Trees</SelectItem>
                        <SelectItem value='graphs'>Graphs</SelectItem>
                        <SelectItem value='dp'>Dynamic Programming</SelectItem>
                      </SelectContent>
                    </Select>
                  </div>
                  <div className='grid gap-2'>
                    <Label htmlFor='problem-notes'>Notes (Optional)</Label>
                    <Textarea
                      id='problem-notes'
                      placeholder='Add any notes or hints'
                    />
                  </div>
                </div>
                <DialogFooter>
                  <Button
                    type='submit'
                    onClick={() => setAddProblemOpen(false)}
                  >
                    Add Problem
                  </Button>
                </DialogFooter>
              </DialogContent>
            </Dialog>

            <AlertDialog
              open={deleteConfirmOpen}
              onOpenChange={setDeleteConfirmOpen}
            >
              <AlertDialogContent>
                <AlertDialogHeader>
                  <AlertDialogTitle>Are you sure?</AlertDialogTitle>
                  <AlertDialogDescription>
                    This action cannot be undone. This will permanently delete
                    the sheet
                    {sheetToDelete?.name && ` "${sheetToDelete.name}"`} and all
                    of its problems.
                  </AlertDialogDescription>
                </AlertDialogHeader>
                <AlertDialogFooter>
                  <AlertDialogCancel onClick={() => setSheetToDelete(null)}>
                    Cancel
                  </AlertDialogCancel>
                  <AlertDialogAction
                    onClick={() => {
                      if (sheetToDelete) {
                        handleDeleteSheet(sheetToDelete.id);
                        setSheetToDelete(null);
                        setDeleteConfirmOpen(false);
                      }
                    }}
                    className='bg-red-600 hover:bg-red-700'
                  >
                    Delete
                  </AlertDialogAction>
                </AlertDialogFooter>
              </AlertDialogContent>
            </AlertDialog>
          </main>
        </>
      ) : (
        <>
          <SkeletonCard />
        </>
      )}
    </div>
  );
}


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\components\Profile\ProblemProgressChart.jsx
==============================


import {
  Card,
  CardContent,
  CardDescription,
  CardHeader,
  CardTitle,
} from '@/components/ui/card';
import { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';

// Mock data for different categories and difficulties
const categoryData = [
  { name: 'Array', solved: 45, total: 60, easy: 20, medium: 20, hard: 5 },
  { name: 'String', solved: 32, total: 45, easy: 15, medium: 12, hard: 5 },
  { name: 'Hash Table', solved: 28, total: 35, easy: 12, medium: 13, hard: 3 },
  {
    name: 'Dynamic Programming',
    solved: 18,
    total: 40,
    easy: 5,
    medium: 10,
    hard: 3,
  },
  { name: 'Tree', solved: 25, total: 35, easy: 10, medium: 12, hard: 3 },
  { name: 'Graph', solved: 15, total: 30, easy: 3, medium: 8, hard: 4 },
  {
    name: 'Binary Search',
    solved: 22,
    total: 25,
    easy: 8,
    medium: 12,
    hard: 2,
  },
  { name: 'Two Pointers', solved: 20, total: 25, easy: 12, medium: 7, hard: 1 },
  {
    name: 'Sliding Window',
    solved: 16,
    total: 20,
    easy: 6,
    medium: 8,
    hard: 2,
  },
  { name: 'Backtracking', solved: 12, total: 25, easy: 2, medium: 7, hard: 3 },
];

const difficultyData = {
  easy: { solved: 89, total: 880, color: 'bg-green-500' },
  medium: { solved: 127, total: 1852, color: 'bg-yellow-500' },
  hard: { solved: 31, total: 839, color: 'bg-red-500' },
};

const totalSolved = 247;
const totalProblems = 3571;

export function ProblemProgressChart() {
  return (
    <Card className='col-span-full'>
      <CardHeader>
        <CardTitle>Problem Solving Progress</CardTitle>
        <CardDescription>
          Comprehensive view of your progress across all categories and
          difficulties
        </CardDescription>
      </CardHeader>
      <CardContent>
        <Tabs defaultValue='overview' className='w-full'>
          <TabsList className='mb-6'>
            <TabsTrigger value='overview'>Overview</TabsTrigger>
            <TabsTrigger value='categories'>Categories</TabsTrigger>
            <TabsTrigger value='difficulties'>Difficulties</TabsTrigger>
          </TabsList>

          <TabsContent value='overview' className='space-y-6'>
            <div className='grid grid-cols-1 lg:grid-cols-3 gap-6'>
              {/* Overall Progress Circle */}
              <div className='flex flex-col items-center justify-center'>
                <div className='relative w-48 h-48'>
                  <svg
                    className='w-48 h-48 transform -rotate-90'
                    viewBox='0 0 200 200'
                  >
                    <circle
                      cx='100'
                      cy='100'
                      r='80'
                      stroke='currentColor'
                      strokeWidth='16'
                      fill='transparent'
                      className='text-muted'
                    />
                    <circle
                      cx='100'
                      cy='100'
                      r='80'
                      stroke='currentColor'
                      strokeWidth='16'
                      fill='transparent'
                      strokeDasharray={`${
                        (totalSolved / totalProblems) * 502
                      } 502`}
                      className='text-primary transition-all duration-1000'
                      strokeLinecap='round'
                    />
                  </svg>
                  <div className='absolute inset-0 flex flex-col items-center justify-center'>
                    <span className='text-4xl font-bold'>{totalSolved}</span>
                    <span className='text-lg text-muted-foreground'>
                      /{totalProblems}
                    </span>
                    <span className='text-sm text-muted-foreground'>
                      Problems Solved
                    </span>
                  </div>
                </div>
                <div className='mt-4 text-center'>
                  <div className='text-3xl font-bold text-primary'>
                    {((totalSolved / totalProblems) * 100).toFixed(1)}%
                  </div>
                  <div className='text-sm text-muted-foreground'>
                    Overall Progress
                  </div>
                </div>
              </div>

              {/* Difficulty Breakdown */}
              <div className='space-y-4'>
                <h3 className='text-lg font-semibold'>By Difficulty</h3>
                {Object.entries(difficultyData).map(([difficulty, data]) => (
                  <div key={difficulty} className='space-y-2'>
                    <div className='flex justify-between items-center'>
                      <span className='capitalize font-medium'>
                        {difficulty}
                      </span>
                      <span className='text-sm font-semibold'>
                        {data.solved}/{data.total}
                      </span>
                    </div>
                    <div className='h-3 bg-muted rounded-full overflow-hidden'>
                      <div
                        className={`${data.color} h-full rounded-full transition-all duration-500`}
                        style={{
                          width: `${(data.solved / data.total) * 100}%`,
                        }}
                      ></div>
                    </div>
                    <div className='text-xs text-muted-foreground'>
                      {((data.solved / data.total) * 100).toFixed(1)}% completed
                    </div>
                  </div>
                ))}
              </div>

              {/* Quick Stats */}
              <div className='space-y-4'>
                <h3 className='text-lg font-semibold'>Quick Stats</h3>
                <div className='grid grid-cols-2 gap-4'>
                  <div className='text-center p-3 bg-muted/50 rounded-lg'>
                    <div className='text-2xl font-bold text-green-600'>
                      {difficultyData.easy.solved}
                    </div>
                    <div className='text-xs text-muted-foreground'>
                      Easy Solved
                    </div>
                  </div>
                  <div className='text-center p-3 bg-muted/50 rounded-lg'>
                    <div className='text-2xl font-bold text-yellow-600'>
                      {difficultyData.medium.solved}
                    </div>
                    <div className='text-xs text-muted-foreground'>
                      Medium Solved
                    </div>
                  </div>
                  <div className='text-center p-3 bg-muted/50 rounded-lg'>
                    <div className='text-2xl font-bold text-red-600'>
                      {difficultyData.hard.solved}
                    </div>
                    <div className='text-xs text-muted-foreground'>
                      Hard Solved
                    </div>
                  </div>
                  <div className='text-center p-3 bg-muted/50 rounded-lg'>
                    <div className='text-2xl font-bold text-blue-600'>
                      {categoryData.length}
                    </div>
                    <div className='text-xs text-muted-foreground'>
                      Categories
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </TabsContent>

          <TabsContent value='categories' className='space-y-4'>
            <div className='grid gap-4'>
              {categoryData.map((category, index) => (
                <div key={category.name} className='p-4 border rounded-lg'>
                  <div className='flex justify-between items-center mb-3'>
                    <h4 className='font-semibold'>{category.name}</h4>
                    <span className='text-sm font-medium'>
                      {category.solved}/{category.total}
                    </span>
                  </div>

                  {/* Overall progress for category */}
                  <div className='mb-3'>
                    <div className='h-2 bg-muted rounded-full overflow-hidden'>
                      <div
                        className='bg-primary h-full rounded-full transition-all duration-500'
                        style={{
                          width: `${(category.solved / category.total) * 100}%`,
                        }}
                      ></div>
                    </div>
                    <div className='text-xs text-muted-foreground mt-1'>
                      {((category.solved / category.total) * 100).toFixed(1)}%
                      completed
                    </div>
                  </div>

                  {/* Difficulty breakdown */}
                  <div className='grid grid-cols-3 gap-2 text-xs'>
                    <div className='text-center'>
                      <div className='text-green-600 font-medium'>
                        {category.easy}
                      </div>
                      <div className='text-muted-foreground'>Easy</div>
                    </div>
                    <div className='text-center'>
                      <div className='text-yellow-600 font-medium'>
                        {category.medium}
                      </div>
                      <div className='text-muted-foreground'>Medium</div>
                    </div>
                    <div className='text-center'>
                      <div className='text-red-600 font-medium'>
                        {category.hard}
                      </div>
                      <div className='text-muted-foreground'>Hard</div>
                    </div>
                  </div>
                </div>
              ))}
            </div>
          </TabsContent>

          <TabsContent value='difficulties' className='space-y-6'>
            <div className='grid grid-cols-1 md:grid-cols-3 gap-6'>
              {Object.entries(difficultyData).map(([difficulty, data]) => (
                <Card key={difficulty}>
                  <CardHeader className='pb-3'>
                    <CardTitle className='capitalize'>{difficulty}</CardTitle>
                    <CardDescription>
                      {data.solved} out of {data.total} problems
                    </CardDescription>
                  </CardHeader>
                  <CardContent>
                    <div className='flex flex-col items-center'>
                      <div className='relative w-32 h-32 mb-4'>
                        <svg
                          className='w-32 h-32 transform -rotate-90'
                          viewBox='0 0 120 120'
                        >
                          <circle
                            cx='60'
                            cy='60'
                            r='45'
                            stroke='currentColor'
                            strokeWidth='8'
                            fill='transparent'
                            className='text-muted'
                          />
                          <circle
                            cx='60'
                            cy='60'
                            r='45'
                            stroke='currentColor'
                            strokeWidth='8'
                            fill='transparent'
                            strokeDasharray={`${
                              (data.solved / data.total) * 283
                            } 283`}
                            className={
                              difficulty === 'easy'
                                ? 'text-green-500'
                                : difficulty === 'medium'
                                ? 'text-yellow-500'
                                : 'text-red-500'
                            }
                            strokeLinecap='round'
                          />
                        </svg>
                        <div className='absolute inset-0 flex flex-col items-center justify-center'>
                          <span className='text-xl font-bold'>
                            {data.solved}
                          </span>
                          <span className='text-xs text-muted-foreground'>
                            /{data.total}
                          </span>
                        </div>
                      </div>
                      <div className='text-center'>
                        <div className='text-2xl font-bold'>
                          {((data.solved / data.total) * 100).toFixed(1)}%
                        </div>
                        <div className='text-sm text-muted-foreground'>
                          Completed
                        </div>
                      </div>
                    </div>
                  </CardContent>
                </Card>
              ))}
            </div>

            {/* Stacked Bar Chart */}
            <Card>
              <CardHeader>
                <CardTitle>Difficulty Distribution</CardTitle>
                <CardDescription>
                  Visual comparison of progress across all difficulty levels
                </CardDescription>
              </CardHeader>
              <CardContent>
                <div className='space-y-4'>
                  <div className='h-12 bg-muted rounded-lg overflow-hidden flex'>
                    <div
                      className='bg-green-500 flex items-center justify-center text-white text-sm font-medium'
                      style={{
                        width: `${
                          (difficultyData.easy.solved / totalSolved) * 100
                        }%`,
                      }}
                    >
                      Easy: {difficultyData.easy.solved}
                    </div>
                    <div
                      className='bg-yellow-500 flex items-center justify-center text-white text-sm font-medium'
                      style={{
                        width: `${
                          (difficultyData.medium.solved / totalSolved) * 100
                        }%`,
                      }}
                    >
                      Medium: {difficultyData.medium.solved}
                    </div>
                    <div
                      className='bg-red-500 flex items-center justify-center text-white text-sm font-medium'
                      style={{
                        width: `${
                          (difficultyData.hard.solved / totalSolved) * 100
                        }%`,
                      }}
                    >
                      Hard: {difficultyData.hard.solved}
                    </div>
                  </div>
                  <div className='grid grid-cols-3 gap-4 text-center text-sm'>
                    <div>
                      <div className='font-medium text-green-600'>
                        {(
                          (difficultyData.easy.solved / totalSolved) *
                          100
                        ).toFixed(1)}
                        %
                      </div>
                      <div className='text-muted-foreground'>
                        of solved problems
                      </div>
                    </div>
                    <div>
                      <div className='font-medium text-yellow-600'>
                        {(
                          (difficultyData.medium.solved / totalSolved) *
                          100
                        ).toFixed(1)}
                        %
                      </div>
                      <div className='text-muted-foreground'>
                        of solved problems
                      </div>
                    </div>
                    <div>
                      <div className='font-medium text-red-600'>
                        {(
                          (difficultyData.hard.solved / totalSolved) *
                          100
                        ).toFixed(1)}
                        %
                      </div>
                      <div className='text-muted-foreground'>
                        of solved problems
                      </div>
                    </div>
                  </div>
                </div>
              </CardContent>
            </Card>
          </TabsContent>
        </Tabs>
      </CardContent>
    </Card>
  );
}


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\components\Profile\Profile.jsx
==============================

import React, { useEffect, useState } from 'react'
import { useSelector } from 'react-redux';
import { UserProfile } from './UserProfile';
import { useGetUsersAllSubmissions } from '@/hooks/apis/getUsersAllSubmission/useGetUsersAllSubmissions';
import { useGetUserDetails } from '@/hooks/apis/auth/useGetUserDetails';

export const Profile = () => {
    const { user } = useSelector((state) => state.auth);
    console.log('User:', user);

    const [usersDetails, setUsersDetails] = useState({});

    const [userSubmissionDetails, setUserSubmissionDetails] = useState({});

    const [userProblemStats, setUserProblemStats] = useState({});

    const { isLoading, isSuccess, error, getUserAllSubmissionsMutation } = useGetUsersAllSubmissions();

    const {
      isLoading: isLoadingUser,
      isSuccess: isSuccessUser,
      error: errorUser,
       getUserDetailsMutation,
    } = useGetUserDetails();

    const fetchUsersAllSubmissions = async () => {
      try {
        const response = await getUserAllSubmissionsMutation();
        console.log('User Submissions:', response);
        setUserSubmissionDetails(response?.submissions);
        setUserProblemStats(response?.stats);
      } catch (error) {
        console.log("error while fetching user submissions", error);
      }
    }

    const fetchUserDetails = async () => {
      try {
        const response = await getUserDetailsMutation();
        console.log('User Details:', response);
        setUsersDetails(response?.user);
      } catch (error) {
        console.log("error while fetching user details", error);
      }
    }

    useEffect(() => {
      if (user) {
        fetchUsersAllSubmissions();
        fetchUserDetails();
      }
    }, [])
  return (
    <div className='container py-10'>
      <h1 className='text-3xl font-bold mb-8'>Your Profile</h1>
      <UserProfile
        userSubmissionDetails={userSubmissionDetails}
        usersDetails={usersDetails}
        userProblemStats={userProblemStats}
      />
    </div>
  );
}


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\components\Profile\SolvedProblems.jsx
==============================

import { useState } from 'react';
import {
  Card,
  CardContent,
  CardDescription,
  CardHeader,
  CardTitle,
} from '@/components/ui/card';
import { Badge } from '@/components/ui/badge';
import { Input } from '@/components/ui/input';
import { Button } from '@/components/ui/button';
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from '@/components/ui/select';
import { Search, Filter, CheckCircle2, XCircle } from 'lucide-react';

export function SolvedProblems({ userSubmissions }) {
  console.log('userSubmissions', userSubmissions);
  const [searchTerm, setSearchTerm] = useState('');
  const [difficultyFilter, setDifficultyFilter] = useState('all');
  const [statusFilter, setStatusFilter] = useState('all');
  const [languageFilter, setLanguageFilter] = useState('all');

  // Extract unique values for filters
  const difficulties = [
    'all',
    ...new Set(userSubmissions?.map((sub) => sub.problemDifficulty)),
  ];
  const statuses = [
    'all',
    ...new Set(userSubmissions?.map((sub) => sub.status)),
  ];
  const languages = [
    'all',
    ...new Set(userSubmissions?.map((sub) => sub.language)),
  ];

  // Filter submissions based on search and filters
  const filteredSubmissions = userSubmissions?.filter((submission) => {
    const matchesSearch =
      submission.problemName.toLowerCase().includes(searchTerm.toLowerCase()) ||
      (submission.tags &&
        submission.tags.some((tag) =>
          tag.toLowerCase().includes(searchTerm.toLowerCase())
        ));
    const matchesDifficulty =
      difficultyFilter === 'all' ||
      submission.problemDifficulty === difficultyFilter;
    const matchesStatus =
      statusFilter === 'all' || submission.status === statusFilter;
    const matchesLanguage =
      languageFilter === 'all' || submission.language === languageFilter;

    return (
      matchesSearch && matchesDifficulty && matchesStatus && matchesLanguage
    );
  });

  // Function to get badge variant based on status
  const getStatusVariant = (status) => {
    if (status === 'Accepted') return 'success';
    if (status === 'Wrong Answer') return 'destructive';
    return 'outline';
  };

  // Function to get badge variant based on difficulty
  const getDifficultyVariant = (difficulty) => {
    if (difficulty === 'EASY') return 'success';
    if (difficulty === 'MEDIUM') return 'warning';
    if (difficulty === 'HARD') return 'destructive';
    return 'outline';
  };

  // Function to get status icon
  const StatusIcon = ({ status }) => {
    if (status === 'Accepted') {
      return <CheckCircle2 className='h-5 w-5 text-green-500' />;
    }
    return <XCircle className='h-5 w-5 text-red-500' />;
  };

  return (
    <Card className='bg-cyan-50'>
      <CardHeader>
        <CardTitle>Solved Problems</CardTitle>
        <CardDescription>Track your problem-solving journey</CardDescription>
      </CardHeader>
      <CardContent>
        <div className='flex flex-col md:flex-row gap-4 mb-6'>
          <div className='relative flex-1'>
            <Search className='absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground' />
            <Input
              placeholder='Search problems or tags...'
              className='pl-8'
              value={searchTerm}
              onChange={(e) => setSearchTerm(e.target.value)}
            />
          </div>
          <div className='flex flex-wrap gap-2'>
            <Select
              value={difficultyFilter}
              onValueChange={setDifficultyFilter}
            >
              <SelectTrigger className='w-[130px]'>
                <Filter className='mr-2 h-4 w-4' />
                <SelectValue placeholder='Difficulty' />
              </SelectTrigger>
              <SelectContent>
                {difficulties.map((difficulty) => (
                  <SelectItem key={difficulty} value={difficulty}>
                    {difficulty === 'all' ? 'All Difficulties' : difficulty}
                  </SelectItem>
                ))}
              </SelectContent>
            </Select>

            <Select value={statusFilter} onValueChange={setStatusFilter}>
              <SelectTrigger className='w-[130px]'>
                <Filter className='mr-2 h-4 w-4' />
                <SelectValue placeholder='Status' />
              </SelectTrigger>
              <SelectContent>
                {statuses.map((status) => (
                  <SelectItem key={status} value={status}>
                    {status === 'all' ? 'All Statuses' : status}
                  </SelectItem>
                ))}
              </SelectContent>
            </Select>

            <Select value={languageFilter} onValueChange={setLanguageFilter}>
              <SelectTrigger className='w-[130px]'>
                <Filter className='mr-2 h-4 w-4' />
                <SelectValue placeholder='Language' />
              </SelectTrigger>
              <SelectContent>
                {languages.map((language) => (
                  <SelectItem key={language} value={language}>
                    {language === 'all' ? 'All Languages' : language}
                  </SelectItem>
                ))}
              </SelectContent>
            </Select>
          </div>
        </div>

        <div className='space-y-4'>
          {filteredSubmissions?.length > 0 ? (
            filteredSubmissions?.map((submission) => (
              <div
                key={submission.id}
                className='flex flex-col md:flex-row justify-between p-4 border rounded-lg hover:bg-muted/50 transition-colors'
              >
                <div className='flex-1'>
                  <div className='flex items-center gap-2'>
                    <StatusIcon status={submission.status} />
                    <h3 className='font-medium'>{submission.problemName}</h3>
                    <Badge
                      variant={getDifficultyVariant(
                        submission.problemDifficulty
                      )}
                    >
                      {submission.problemDifficulty}
                    </Badge>
                    <Badge variant={getStatusVariant(submission.status)}>
                      {submission.status}
                    </Badge>
                  </div>
                  <div className='mt-2 flex flex-wrap gap-2'>
                    {submission.tags &&
                      submission.tags.map((tag) => (
                        <Badge key={tag} variant='outline'>
                          {tag}
                        </Badge>
                      ))}
                  </div>
                </div>
                <div className='flex flex-col md:items-end mt-2 md:mt-0 text-sm text-muted-foreground'>
                  <div>Submitted on {submission.date}</div>
                  <div>Language: {submission.language}</div>
                  <div>Runtime: {submission.runtime}</div>
                  <div>Memory: {submission.memory}</div>
                </div>
              </div>
            ))
          ) : (
            <div className='text-center py-10 text-muted-foreground'>
              No submissions found matching your filters.
            </div>
          )}
        </div>

        {/* {filteredSubmissions?.length > 0 && (
          <div className='flex justify-center mt-6'>
            <Button variant='outline'>Load More</Button>
          </div>
        )} */}
      </CardContent>
    </Card>
  );
}


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\components\Profile\UserDetails.jsx
==============================

import { useState, useEffect } from 'react';
import { zodResolver } from '@hookform/resolvers/zod';
import { useForm } from 'react-hook-form';
import { z } from 'zod';
import { Button } from '@/components/ui/button';
import {
  Card,
  CardContent,
  CardDescription,
  CardHeader,
  CardTitle,
} from '@/components/ui/card';
import {
  Form,
  FormControl,
  FormDescription,
  FormField,
  FormItem,
  FormLabel,
  FormMessage,
} from '@/components/ui/form';
import { Input } from '@/components/ui/input';
import { Textarea } from '@/components/ui/textarea';
import { Avatar, AvatarFallback, AvatarImage } from '@/components/ui/avatar';
import { Badge } from '@/components/ui/badge';
import { toast } from 'sonner';
import { format } from 'date-fns';

const userFormSchema = z.object({
  name: z.string().min(2, {
    message: 'Name must be at least 2 characters.',
  }),
  email: z.string().email({
    message: 'Please enter a valid email address.',
  }),
  bio: z.string().max(160).optional(),
  username: z.string().min(2, {
    message: 'Username must be at least 2 characters.',
  }),
});

export function UserDetails({ usersDetails }) {
  const [isEditing, setIsEditing] = useState(false);
  const [user, setUser] = useState(null);

  useEffect(() => {
    if (usersDetails) {
      const createdAt = new Date(usersDetails.createdAt);
      const isValidDate = !isNaN(createdAt);

      const day = isValidDate ? format(createdAt, 'dd') : 'Unknown';
      const month = isValidDate ? format(createdAt, 'MMM') : 'Unknown';
      const year = isValidDate ? format(createdAt, 'yyyy') : 'Unknown';

      setUser({
        ...usersDetails,
        bio: usersDetails.bio || '',
        avatarUrl: usersDetails.image || '/placeholder.svg',
        level: usersDetails.role || 'Member',
        joinDate: isValidDate ? `${day} ${month} ${year}` : 'Unknown', // "17 May 2025"
        badges: ['Active Member'],
        createdDay: day,
        createdMonth: month,
        createdYear: year,
      });
    }
  }, [usersDetails]);
  

  const form = useForm({
    resolver: zodResolver(userFormSchema),
    defaultValues: {
      name: usersDetails?.name || '',
      email: usersDetails?.email || '',
      bio: '',
      username: usersDetails?.username || '',
    },
  });

  function onSubmit(values) {
    setUser((prev) => ({
      ...prev,
      ...values,
    }));
    setIsEditing(false);
    toast.success('Your profile has been updated successfully');
  }

  if (!user) return null;

  return (
    <Card className='bg-gradient-to-r from-[#fef08a] via-[#84cc16] to-[#16a34a]'>
      <CardHeader>
        <div className='flex flex-col md:flex-row gap-4 items-start md:items-center justify-between'>
          <div className='flex items-center gap-4'>
            <Avatar className='h-20 w-20'>
              <AvatarImage src={user.avatarUrl} alt={user.name} />
              <AvatarFallback>
                {user.name?.substring(0, 2)?.toUpperCase()}
              </AvatarFallback>
            </Avatar>
            <div>
              <CardTitle>{user.name}</CardTitle>
              <CardDescription>@{user.username}</CardDescription>
              <div className='flex flex-wrap gap-2 mt-2'>
                {user.badges?.map((badge) => (
                  <Badge key={badge} variant='secondary'>
                    {badge}
                  </Badge>
                ))}
              </div>
            </div>
          </div>
          <div className='flex flex-col items-end'>
            <div className='text-sm  text-shadow-cyan-800'>
              Member since {user.joinDate}
            </div>
            <div className='mt-1'>
              <Badge variant='outline' className='font-semibold'>
                {user.level}
              </Badge>
            </div>
          </div>
        </div>
      </CardHeader>
      <CardContent>
        {isEditing ? (
          <Form {...form}>
            <form onSubmit={form.handleSubmit(onSubmit)} className='space-y-4'>
              <FormField
                control={form.control}
                name='name'
                render={({ field }) => (
                  <FormItem>
                    <FormLabel>Name</FormLabel>
                    <FormControl>
                      <Input placeholder='Your name' {...field} />
                    </FormControl>
                    <FormMessage />
                  </FormItem>
                )}
              />
              <FormField
                control={form.control}
                name='username'
                render={({ field }) => (
                  <FormItem>
                    <FormLabel>Username</FormLabel>
                    <FormControl>
                      <Input placeholder='Username' {...field} />
                    </FormControl>
                    <FormMessage />
                  </FormItem>
                )}
              />
              <FormField
                control={form.control}
                name='email'
                render={({ field }) => (
                  <FormItem>
                    <FormLabel>Email</FormLabel>
                    <FormControl>
                      <Input placeholder='Email' {...field} />
                    </FormControl>
                    <FormMessage />
                  </FormItem>
                )}
              />
              <FormField
                control={form.control}
                name='bio'
                render={({ field }) => (
                  <FormItem>
                    <FormLabel>Bio</FormLabel>
                    <FormControl>
                      <Textarea
                        placeholder='Tell us a little bit about yourself'
                        className='resize-none'
                        {...field}
                      />
                    </FormControl>
                    <FormDescription>
                      You can <span className='font-medium'>@mention</span>{' '}
                      other users and organizations.
                    </FormDescription>
                    <FormMessage />
                  </FormItem>
                )}
              />
              <div className='flex justify-end gap-2'>
                <Button
                  variant='outline'
                  type='button'
                  onClick={() => setIsEditing(false)}
                >
                  Cancel
                </Button>
                <Button type='submit'>Save Changes</Button>
              </div>
            </form>
          </Form>
        ) : (
          <div className='space-y-4'>
            <div>
              <h3 className='text-sm font-medium'>Email</h3>
              <p className='text-sm text-blue-950 mt-1'>{user.email}</p>
            </div>
            {user.bio && (
              <div>
                <h3 className='text-sm font-medium'>Bio</h3>
                <p className='text-sm text-orange-600 mt-1'>{user.bio}</p>
              </div>
            )}
            {/* <div className='flex justify-end'>
              <Button
                onClick={() => {
                  form.reset({
                    name: user.name || '',
                    username: user.username || '',
                    email: user.email || '',
                    bio: user.bio || '',
                  });
                  setIsEditing(true);
                }}
              >
                Edit Profile
              </Button>
            </div> */}
          </div>
        )}
      </CardContent>
    </Card>
  );
}


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\components\Profile\UserProfile.jsx
==============================

import { useState } from 'react';
import { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';
import { UserDetails } from './UserDetails';
import { UserStats } from './UserStats';
import { SolvedProblems } from './SolvedProblems';

export function UserProfile({
  userSubmissionDetails,
  usersDetails,
  userProblemStats,
}) {
  const [activeTab, setActiveTab] = useState('details');

  // console.log("userProblemStats", userProblemStats);

  return (
    <Tabs
      defaultValue='details'
      className='w-full'
      onValueChange={setActiveTab}
    >
      <TabsList className='grid w-full grid-cols-3 bg-emerald-500'>
        <TabsTrigger
          value='details'
          className={
            activeTab === 'details'
              ? 'custom-active-tab'
              : 'bg-emerald-300 text-gray-700'
          }
        >
          Profile Details
        </TabsTrigger>
        <TabsTrigger
          value='stats'
          className={
            activeTab === 'stats'
              ? 'custom-active-tab'
              : 'bg-emerald-300 text-gray-700'
          }
        >
          Stats & Progress
        </TabsTrigger>
        <TabsTrigger
          value='problems'
          className={
            activeTab === 'problems'
              ? 'custom-active-tab'
              : 'bg-emerald-300 text-gray-700'
          }
        >
          Solved Problems
        </TabsTrigger>
      </TabsList>
      <TabsContent value='details' className='mt-6'>
        <UserDetails usersDetails={usersDetails} />
      </TabsContent>
      <TabsContent value='stats' className='mt-6'>
        <UserStats userProblemStats={userProblemStats} />
      </TabsContent>
      <TabsContent value='problems' className='mt-6'>
        <SolvedProblems userSubmissions={userSubmissionDetails} />
      </TabsContent>
    </Tabs>
  );
}


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\components\Profile\UserStats.jsx
==============================

import {
  Card,
  CardContent,
  CardDescription,
  CardHeader,
  CardTitle,
} from '@/components/ui/card';
import { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';

import CalendarHeatmap from 'react-calendar-heatmap';
import 'react-calendar-heatmap/dist/styles.css';
import { subDays, format, set } from 'date-fns';
import { CheckCircle, Flame, Clock } from 'lucide-react';
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from '@/components/ui/select';
import { Button } from '@/components/ui/button';
import { Tooltip } from 'react-tooltip';
import { useGetUserHeatMapData } from '@/hooks/apis/userStats/useGetUSerHeatMapData';
import { useEffect, useState } from 'react';
import { ChevronLeft, ChevronRight } from 'lucide-react';
import { ProblemProgressChart } from './ProblemProgressChart';
import { useGetUserProgressData } from '@/hooks/apis/userStats/useGetUserSubmissionProgress';
import { useGetUserSolvedStats } from '@/hooks/apis/userStats/useGetUserSolvedStats';
import { SkeletonCard } from '@/Pages/SkeletonPage/SkeletonCard';

// Mock data - in a real app, this would come from your backend
const dailyProgress = [
  { day: 'Mon', problems: 5, hours: 2.5 },
  { day: 'Tue', problems: 3, hours: 1.5 },
  { day: 'Wed', problems: 7, hours: 3.2 },
  { day: 'Thu', problems: 2, hours: 1.0 },
  { day: 'Fri', problems: 6, hours: 2.8 },
  { day: 'Sat', problems: 4, hours: 2.0 },
  { day: 'Sun', problems: 8, hours: 4.5 },
];

// Generate mock data for different time periods
function generateWeeklyData(weekOffset = 0) {
  const baseDate = new Date();
  baseDate.setDate(baseDate.getDate() - weekOffset * 7);

  const weekData = [];
  const days = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'];

  for (let i = 0; i < 7; i++) {
    const date = new Date(baseDate);
    date.setDate(date.getDate() - (6 - i));

    weekData.push({
      day: days[i],
      date: date.toISOString().split('T')[0],
      problems: Math.floor(Math.random() * 10) + 1,
      hours: Number.parseFloat((Math.random() * 4 + 0.5).toFixed(1)),
    });
  }

  return weekData;
}

function generateMonthlyData(monthOffset = 0) {
  const baseDate = new Date();
  baseDate.setMonth(baseDate.getMonth() - monthOffset);
  baseDate.setDate(1);

  const monthData = [];
  const daysInMonth = new Date(
    baseDate.getFullYear(),
    baseDate.getMonth() + 1,
    0
  ).getDate();

  for (let i = 1; i <= daysInMonth; i++) {
    const date = new Date(baseDate.getFullYear(), baseDate.getMonth(), i);
    monthData.push({
      day: i.toString(),
      date: date.toISOString().split('T')[0],
      problems: Math.floor(Math.random() * 8) + 1,
      hours: Number.parseFloat((Math.random() * 3 + 0.5).toFixed(1)),
    });
  }

  return monthData;
}

export function UserStats({ userProblemStats }) {
  // Calculate the maximum value for scaling the chart

  const [heatMapData, setHeatMapData] = useState([]);

  const [viewType, setViewType] = useState('week');

  const [selectedPeriod, setSelectedPeriod] = useState(0); // 0 = current, 1 = previous, etc.

  const [userProgressDetails, setUserProgressDetails] = useState([]);

  const [userSolvedStatsDetails, setUserSolvedStatsDetails] = useState({});

  console.log("userProblemStats", userProblemStats);

  const { totalProblemsAvailable, solvedProblemCount } = userProblemStats;

  console.log("totalProblemsAvailable", totalProblemsAvailable);
  console.log("solvedProblemCount", solvedProblemCount);

  // const maxProblems = Math.max(...dailyProgress.map((day) => day.problems));
  // const currentData =
  //   viewType === 'week'
  //     ? generateWeeklyData(selectedPeriod)
  //     : generateMonthlyData(selectedPeriod);
  // const maxHours = Math.max(...currentData.map((day) => day.hours));

  const { data, isPending, isSuccess, error, refetch } =
    useGetUserHeatMapData();

  const {
    data: userProgressData,
    isPending: isProgressPending,
    isSuccess: isProgressSuccess,
    error: progressError,
    refetch: refetchProgress,
  } = useGetUserProgressData();

  const {
    data: userSolvedStatsData,
    isPending: isSolvedStatsPending,
    isSuccess: isSolvedStatsSuccess,
    error: solvedStatsError,
    refetch: refetchSolvedStats,
  } = useGetUserSolvedStats();

  useEffect(() => {
    if (userSolvedStatsData) {
      setUserSolvedStatsDetails(userSolvedStatsData?.data);
    }
  }, [userSolvedStatsData]);

  // console.log("data", heatmapData);

  useEffect(() => {
    if (data) {
      setHeatMapData(data.heatmap);
    }
  }, [data]);

  useEffect(() => {
    if (userProgressData) {
      setUserProgressDetails(userProgressData.data);
    }
  }, [userProgressData]);

  // console.log("isPending", isPending);
  // console.log("isSuccess", isSuccess);
  // console.log("error", error);
  // console.log("refetch", refetch);

  // const heatmapData = generateHeatmapValues();

  // Calculate stats for current period
  // const totalProblems = currentData.reduce((sum, day) => sum + day.problems, 0);
  // const totalHours = Number.parseFloat(
  //   currentData.reduce((sum, day) => sum + day.hours, 0).toFixed(1)
  // );
  // const avgProblems =
  //   Math.round((totalProblems / currentData.length) * 10) / 10;
  // const avgHours = Number.parseFloat(
  //   (totalHours / currentData.length).toFixed(1)
  // );

  // debugger;

  console.log('userProgressDetails', userProgressDetails);
  const daysPerPage = viewType === 'week' ? 7 : 30;
  const startIndex = selectedPeriod * daysPerPage;
  const endIndex = startIndex + daysPerPage;
  const currentData = userProgressDetails.slice(startIndex, endIndex);

  // Stats
  const totalProblems = currentData.reduce((acc, d) => acc + d.problems, 0);
  const avgProblems =
    currentData.length > 0 ? Math.round(totalProblems / currentData.length) : 0;
  const maxProblems = Math.max(...currentData.map((d) => d.problems), 0);
  const activeDays = currentData.filter((d) => d.problems > 0).length;

  // Step 1: Create a Set of active days
  const activeDaysSet = new Set(
    currentData.filter((d) => d.problems > 0).map((d) => d.date)
  );

  // Step 2: Calculate max consecutive streak
  let maxStreak = 0;

  let currentStreak = 0;

  for (const day of currentData) {
    if (day.problems > 0) {
      currentStreak += 1;
    } else {
      break; // streak breaks at first zero
    }
  }

  // Step 1: Sort descending (latest first)

  // console.log('isProgressPending', isProgressPending);

  const getPeriodLabel = () => {
    const baseDate = new Date();
    if (viewType === 'week') {
      baseDate.setDate(baseDate.getDate() - selectedPeriod * 7);
      const startOfWeek = new Date(baseDate);
      startOfWeek.setDate(baseDate.getDate() - baseDate.getDay() + 1);
      const endOfWeek = new Date(startOfWeek);
      endOfWeek.setDate(startOfWeek.getDate() + 6);

      return `${startOfWeek.toLocaleDateString('en-US', {
        month: 'short',
        day: 'numeric',
      })} - ${endOfWeek.toLocaleDateString('en-US', {
        month: 'short',
        day: 'numeric',
      })}`;
    } else {
      baseDate.setMonth(baseDate.getMonth() - selectedPeriod);
      return baseDate.toLocaleDateString('en-US', {
        month: 'long',
        year: 'numeric',
      });
    }
  };

  // Example data object (replace with your dynamic data)
  const stats = userSolvedStatsDetails;

  // Difficulty data prepared for JSX
  const difficultyLevels = ['EASY', 'MEDIUM', 'HARD'];
  const difficultyColors = {
    EASY: { bg: 'bg-green-500', text: 'text-green-600' },
    MEDIUM: { bg: 'bg-yellow-500', text: 'text-yellow-600' },
    HARD: { bg: 'bg-red-500', text: 'text-red-600' },
  };

  const difficultyData =
    stats && stats.difficultyStats && stats.totalDifficultyCounts
      ? difficultyLevels.map((level) => {
          const solved = stats.difficultyStats[level] ?? 0;
          const total = stats.totalDifficultyCounts[level] ?? 1; // avoid div by zero
          const percentage = ((solved / total) * 100).toFixed(1);

          return {
            level,
            solved,
            total,
            percentage,
            bgColor: difficultyColors[level].bg,
            textColor: difficultyColors[level].text,
            label: level.charAt(0) + level.slice(1).toLowerCase(),
          };
        })
      : [];

  // Tag colors for consistent color assignment
  const tagColors = [
    'bg-blue-500',
    'bg-purple-500',
    'bg-indigo-500',
    'bg-green-500',
    'bg-orange-500',
    'bg-pink-500',
    'bg-teal-500',
    'bg-yellow-400',
  ];

  // Only build tagData if stats.totalTagCounts exists; otherwise, return an empty array.
  const tagData = stats?.totalTagCounts
    ? Object.entries(stats.totalTagCounts)
        .map(([tag, total]) => {
          const solved = stats.tagStats?.[tag] || 0;
          // If total is 0 (or undefined), we use '0.0' as the percentage.
          const percentage = total
            ? ((solved / total) * 100).toFixed(1)
            : '0.0';

          // Deterministic color based on tag string char codes
          const colorIndex =
            tag.split('').reduce((acc, c) => acc + c.charCodeAt(0), 0) %
            tagColors.length;
          const color = tagColors[colorIndex];

          return { tag, solved, total, percentage, color };
        })
        .sort((a, b) => b.solved - a.solved)
        .slice(0, 10)
    : [];

  if (isPending || isProgressPending || isSolvedStatsPending)
    return <div><SkeletonCard/></div>;

  return (
    <div className='grid gap-6'>
      {!isProgressPending ? (
        <Card className='bg-gradient-to-r from-[#dfe2fe] via-[#b1cbfa] to-[#8e98f5]'>
          <CardHeader>
            <div className='flex flex-col md:flex-row justify-between items-start md:items-center gap-4'>
              <div>
                <CardTitle>Daily Progress</CardTitle>
                <CardDescription>
                  Your problem-solving activity over time
                </CardDescription>
              </div>

              {/* Period Selection Controls */}
              <div className='flex items-center gap-2'>
                <Select
                  value={viewType}
                  onValueChange={(value) => {
                    setViewType(value);
                    setSelectedPeriod(0);
                  }}
                >
                  <SelectTrigger className='w-[100px]'>
                    <SelectValue />
                  </SelectTrigger>
                  <SelectContent>
                    <SelectItem value='week'>Week</SelectItem>
                    <SelectItem value='month'>Month</SelectItem>
                  </SelectContent>
                </Select>

                <div className='flex items-center gap-1'>
                  <Button
                    variant='outline'
                    size='sm'
                    onClick={() => setSelectedPeriod((prev) => prev + 1)}
                  >
                    <ChevronLeft className='h-4 w-4' />
                  </Button>

                  <div className='px-3 py-1 text-sm font-medium min-w-[140px] text-center'>
                    {getPeriodLabel()}
                  </div>

                  <Button
                    variant='outline'
                    size='sm'
                    onClick={() =>
                      setSelectedPeriod((prev) => Math.max(0, prev - 1))
                    }
                    disabled={selectedPeriod === 0}
                  >
                    <ChevronRight className='h-4 w-4' />
                  </Button>
                </div>
              </div>
            </div>
          </CardHeader>
          <CardContent>
            <Tabs defaultValue='problems'>
              <TabsList className='mb-4'>
                <TabsTrigger value='problems'>Total Submissions</TabsTrigger>
                {/* <TabsTrigger value='hours'>Hours Spent</TabsTrigger> */}
              </TabsList>
              <TabsContent value='problems'>
                <div className='h-[250px] flex items-end justify-between gap-1'>
                  {[...currentData].reverse().map((day, index) => (
                    <div
                      key={index}
                      className='flex flex-col items-center gap-2 flex-1 min-w-0'
                    >
                      <div className='text-xs font-medium text-center'>
                        {day.problems}
                      </div>
                      <div
                        className='bg-primary/90 w-full max-w-[40px] rounded-t-md transition-all duration-500 ease-in-out hover:bg-primary cursor-pointer'
                        style={{
                          height: `${
                            maxProblems === 0
                              ? 0
                              : (day.problems / maxProblems) * 180
                          }px`,
                        }}
                        title={`${day.problems} problems on ${day.date}`}
                      ></div>
                      <div className='text-xs font-medium text-center'>
                        {viewType === 'week'
                          ? day.day
                          : new Date(day.date).toLocaleDateString('en-IN', {
                              day: '2-digit',
                              month: 'short',
                              year: 'numeric',
                            })}
                      </div>
                    </div>
                  ))}
                </div>

                {/* Problems Stats */}
                <div className='mt-6 grid grid-cols-2 md:grid-cols-4 gap-4 pt-4 border-t'>
                  <div className='text-center'>
                    <div className='text-2xl font-bold text-primary'>
                      {solvedProblemCount}
                    </div>
                    <div className='text-sm text-muted-foreground'>
                      Total Problems
                    </div>
                  </div>
                  <div className='text-center'>
                    <div className='text-2xl font-bold text-green-600'>
                      {avgProblems}
                    </div>
                    <div className='text-sm text-muted-foreground'>
                      Daily Average
                    </div>
                  </div>
                  <div className='text-center'>
                    <div className='text-2xl font-bold text-blue-600'>
                      {maxProblems}
                    </div>
                    <div className='text-sm text-muted-foreground'>
                      Best Day
                    </div>
                  </div>
                  <div className='text-center'>
                    <div className='text-2xl font-bold text-purple-600'>
                      {activeDays}
                    </div>
                    <div className='text-sm text-muted-foreground'>
                      Active Days
                    </div>
                  </div>
                </div>
              </TabsContent>
            </Tabs>
          </CardContent>
        </Card>
      ) : (
        <div>
          <SkeletonCard />
        </div>
      )}

      <div className='grid grid-cols-1 md:grid-cols-2 xl:grid-cols-2 gap-6'>
        <Card className='bg-gradient-to-r from-[#dfe2fe] via-[#b1cbfa] to-[#8e98f5]'>
          <CardHeader>
            <CardTitle>
              {viewType === 'week' ? 'Weekly' : 'Monthly'} Summary
            </CardTitle>
            <CardDescription>
              Your performance for {getPeriodLabel()}
            </CardDescription>
          </CardHeader>
          <CardContent>
            <dl className='grid grid-cols-2 gap-4 text-sm'>
              <div>
                <dt className='font-medium text-muted-foreground'>
                  Total Problems
                </dt>
                <dd className='text-2xl font-bold'>{solvedProblemCount}</dd>
              </div>
              {/* <div>
                <dt className='font-medium text-muted-foreground'>
                  Total Hours
                </dt>
                <dd className='text-2xl font-bold'>{totalHours.toFixed(1)}h</dd>
              </div> */}
              <div>
                <dt className='font-medium text-muted-foreground'>
                  Daily Average
                </dt>
                <dd className='text-2xl font-bold'>{avgProblems}</dd>
              </div>
              {/* <div>
                <dt className='font-medium text-muted-foreground'>
                  Efficiency
                </dt>
                <dd className='text-2xl font-bold'>
                  {(totalProblems / totalHours).toFixed(1)}
                </dd>
              </div> */}
            </dl>
          </CardContent>
        </Card>

        <Card className='bg-gradient-to-r from-[#dfe2fe] via-[#b1cbfa] to-[#8e98f5]'>
          <CardHeader>
            <CardTitle>🏆 Achievement Progress</CardTitle>
            <CardDescription>Track your learning journey</CardDescription>
          </CardHeader>
          <CardContent>
            <div className='space-y-4'>
              <div>
                <div className='flex justify-between text-sm mb-1'>
                  <span className='font-medium flex items-center gap-1'>
                    <CheckCircle className='h-4 w-4 text-blue-500' />
                    Problems Solved ({solvedProblemCount}/
                    {totalProblemsAvailable})
                  </span>
                  <span className='text-muted-foreground'>
                    {Math.min(
                      100,
                      Math.round(
                        (solvedProblemCount / totalProblemsAvailable) * 100
                      )
                    )}
                    %
                  </span>
                </div>
                <div className='relative h-2 bg-muted rounded-full overflow-hidden'>
                  <div
                    className='bg-primary h-full rounded-full transition-all duration-300'
                    style={{
                      width: `${Math.min(
                        100,
                        (solvedProblemCount / totalProblemsAvailable) * 100
                      )}%`,
                    }}
                  ></div>
                </div>
              </div>
              <div>
                {/* <div className='flex justify-between text-sm mb-1'>
                  <span className='font-medium'>
                    Time Master ({totalHours}h/100h)
                  </span>
                  <span className='text-muted-foreground'>
                    {Math.min(100, Math.round((totalHours / 100) * 100))}%
                  </span>
                </div> */}
                {/* <div className='h-2 bg-muted rounded-full overflow-hidden'>
                  <div
                    className='bg-primary h-full rounded-full'
                    style={{
                      width: `${Math.min(100, (totalHours / 100) * 100)}%`,
                    }}
                  ></div>
                </div> */}
              </div>
              <div>
                <div className='flex justify-between text-sm mb-1'>
                  <span className='font-medium'>
                    Current Streak ({currentStreak} days)
                  </span>
                </div>
                <div className='h-2 bg-muted rounded-full overflow-hidden'>
                  <div
                    className='bg-yellow-500 h-full rounded-full'
                    style={{
                      width: `${(Math.min(currentStreak, 30) * 100) / 30}%`,
                    }} // assuming 30-day goal
                  ></div>
                </div>
              </div>
            </div>
          </CardContent>
        </Card>
      </div>

      <Card className='bg-gradient-to-r from-[#dfe2fe] via-[#b1cbfa] to-[#8e98f5]'>
        <CardHeader>
          <CardTitle>Problem Solving Overview</CardTitle>
          <CardDescription>
            Your progress across all problems, categories, and difficulties
          </CardDescription>
        </CardHeader>
        <CardContent>
          <div className='grid grid-cols-1 lg:grid-cols-2 gap-6'>
            {/* Overall Progress Donut Chart */}
            <div className='flex flex-col items-center'>
              <div className='relative w-40 h-40 mb-4'>
                <svg
                  className='w-40 h-40 transform -rotate-90'
                  viewBox='0 0 160 160'
                >
                  <circle
                    cx='80'
                    cy='80'
                    r='60'
                    stroke='currentColor'
                    strokeWidth='12'
                    fill='transparent'
                    className='text-muted'
                  />
                  <circle
                    cx='80'
                    cy='80'
                    r='60'
                    stroke='currentColor'
                    strokeWidth='12'
                    fill='transparent'
                    strokeDasharray={`${
                      (solvedProblemCount / totalProblemsAvailable) * 377
                    } 377`}
                    className='text-primary transition-all duration-1000'
                  />
                </svg>
                <div className='absolute inset-0 flex flex-col items-center justify-center'>
                  <span className='text-3xl font-bold'>
                    {solvedProblemCount}
                  </span>
                  <span className='text-sm text-muted-foreground'>
                    /{totalProblemsAvailable}
                  </span>
                  <span className='text-xs text-muted-foreground'>Solved</span>
                </div>
              </div>
              <div className='text-center'>
                <div className='text-2xl font-bold text-primary'>
                  {(
                    (solvedProblemCount / totalProblemsAvailable) *
                    100
                  ).toFixed(1)}
                  %
                </div>
                <div className='text-sm text-muted-foreground'>
                  Overall Progress
                </div>
              </div>
            </div>
            {/* Difficulty Section */}
            <div>
              <h4 className='font-semibold mb-3'>By Difficulty</h4>
              <div className='space-y-3'>
                {difficultyData.map(
                  ({
                    level,
                    solved,
                    total,
                    percentage,
                    bgColor,
                    textColor,
                    label,
                  }) => (
                    <div key={level}>
                      <div className={`flex justify-between text-sm mb-1`}>
                        <span className={`${textColor} font-semibold`}>
                          {label}
                        </span>
                        <span className='font-medium'>
                          {solved}/{total}
                        </span>
                      </div>
                      <div className='h-2 bg-muted rounded-full overflow-hidden'>
                        <div
                          className={`${bgColor} h-full rounded-full`}
                          style={{ width: `${percentage}%` }}
                        ></div>
                      </div>
                    </div>
                  )
                )}
              </div>
            </div>
          </div>
          {/* Category and Difficulty Stats */}
          <div className='space-y-4'>
            {/* Tags Section */}
            <div>
              <h4 className='font-semibold mb-3'>Top Categories</h4>
              <div className='space-y-2'>
                {tagData.map(({ tag, solved, total, percentage, color }) => (
                  <div key={tag} className='flex items-center gap-3'>
                    <div className='w-16 text-xs font-medium truncate'>
                      {tag}
                    </div>
                    <div className='flex-1 h-4 bg-muted rounded-full overflow-hidden'>
                      <div
                        className={`${color} h-full rounded-full transition-all duration-500`}
                        style={{ width: `${percentage}%` }}
                        title={`${solved} solved out of ${total}`}
                      ></div>
                    </div>
                    <div className='text-xs font-medium w-12 text-right'>
                      {solved}/{total}
                    </div>
                  </div>
                ))}
              </div>
            </div>
          </div>
        </CardContent>
      </Card>

      <Card className='bg-gradient-to-r from-[#dfe2fe] via-[#b1cbfa] to-[#8e98f5]'>
        <CardHeader>
          <CardTitle>Contribution Heatmap</CardTitle>
          <CardDescription>Daily activity (past 1 year)</CardDescription>
        </CardHeader>
        <CardContent>
          <CalendarHeatmap
            startDate={subDays(new Date(), 364)}
            endDate={new Date()}
            values={heatMapData}
            classForValue={(value) => {
              if (!value || value.count === 0) return 'color-empty';
              if (value.count >= 5) return 'color-github-4';
              if (value.count >= 3) return 'color-github-3';
              if (value.count >= 2) return 'color-github-2';
              return 'color-github-1';
            }}
            tooltipDataAttrs={(value) =>
              value.date
                ? {
                    'data-tooltip-id': 'heatmap-tooltip',
                    'data-tooltip-content': `${value.date}: ${value.count} problems`,
                  }
                : {}
            }
            showWeekdayLabels
            className='text-black'
          />
          <Tooltip id='heatmap-tooltip' />
        </CardContent>
      </Card>

      {/* <ProblemProgressChart /> */}
    </div>
  );
}


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\components\ui\alert-dialog.jsx
==============================

import * as React from "react"
import * as AlertDialogPrimitive from "@radix-ui/react-alert-dialog"

import { cn } from "@/lib/utils"
import { buttonVariants } from "@/components/ui/button"

function AlertDialog({
  ...props
}) {
  return <AlertDialogPrimitive.Root data-slot="alert-dialog" {...props} />;
}

function AlertDialogTrigger({
  ...props
}) {
  return (<AlertDialogPrimitive.Trigger data-slot="alert-dialog-trigger" {...props} />);
}

function AlertDialogPortal({
  ...props
}) {
  return (<AlertDialogPrimitive.Portal data-slot="alert-dialog-portal" {...props} />);
}

function AlertDialogOverlay({
  className,
  ...props
}) {
  return (
    (<AlertDialogPrimitive.Overlay
      data-slot="alert-dialog-overlay"
      className={cn(
        "data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",
        className
      )}
      {...props} />)
  );
}

function AlertDialogContent({
  className,
  ...props
}) {
  return (
    (<AlertDialogPortal>
      <AlertDialogOverlay />
      <AlertDialogPrimitive.Content
        data-slot="alert-dialog-content"
        className={cn(
          "bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",
          className
        )}
        {...props} />
    </AlertDialogPortal>)
  );
}

function AlertDialogHeader({
  className,
  ...props
}) {
  return (
    (<div
      data-slot="alert-dialog-header"
      className={cn("flex flex-col gap-2 text-center sm:text-left", className)}
      {...props} />)
  );
}

function AlertDialogFooter({
  className,
  ...props
}) {
  return (
    (<div
      data-slot="alert-dialog-footer"
      className={cn("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end", className)}
      {...props} />)
  );
}

function AlertDialogTitle({
  className,
  ...props
}) {
  return (
    (<AlertDialogPrimitive.Title
      data-slot="alert-dialog-title"
      className={cn("text-lg font-semibold", className)}
      {...props} />)
  );
}

function AlertDialogDescription({
  className,
  ...props
}) {
  return (
    (<AlertDialogPrimitive.Description
      data-slot="alert-dialog-description"
      className={cn("text-muted-foreground text-sm", className)}
      {...props} />)
  );
}

function AlertDialogAction({
  className,
  ...props
}) {
  return (<AlertDialogPrimitive.Action className={cn(buttonVariants(), className)} {...props} />);
}

function AlertDialogCancel({
  className,
  ...props
}) {
  return (
    (<AlertDialogPrimitive.Cancel
      className={cn(buttonVariants({ variant: "outline" }), className)}
      {...props} />)
  );
}

export {
  AlertDialog,
  AlertDialogPortal,
  AlertDialogOverlay,
  AlertDialogTrigger,
  AlertDialogContent,
  AlertDialogHeader,
  AlertDialogFooter,
  AlertDialogTitle,
  AlertDialogDescription,
  AlertDialogAction,
  AlertDialogCancel,
}


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\components\ui\alert.jsx
==============================

import * as React from "react"
import { cva } from "class-variance-authority";

import { cn } from "@/lib/utils"

const alertVariants = cva(
  "relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",
  {
    variants: {
      variant: {
        default: "bg-card text-card-foreground",
        destructive:
          "text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90",
      },
    },
    defaultVariants: {
      variant: "default",
    },
  }
)

function Alert({
  className,
  variant,
  ...props
}) {
  return (
    (<div
      data-slot="alert"
      role="alert"
      className={cn(alertVariants({ variant }), className)}
      {...props} />)
  );
}

function AlertTitle({
  className,
  ...props
}) {
  return (
    (<div
      data-slot="alert-title"
      className={cn("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight", className)}
      {...props} />)
  );
}

function AlertDescription({
  className,
  ...props
}) {
  return (
    (<div
      data-slot="alert-description"
      className={cn(
        "text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",
        className
      )}
      {...props} />)
  );
}

export { Alert, AlertTitle, AlertDescription }


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\components\ui\avatar.jsx
==============================

import * as React from "react"
import * as AvatarPrimitive from "@radix-ui/react-avatar"

import { cn } from "@/lib/utils"

function Avatar({
  className,
  ...props
}) {
  return (
    (<AvatarPrimitive.Root
      data-slot="avatar"
      className={cn("relative flex size-8 shrink-0 overflow-hidden rounded-full", className)}
      {...props} />)
  );
}

function AvatarImage({
  className,
  ...props
}) {
  return (
    (<AvatarPrimitive.Image
      data-slot="avatar-image"
      className={cn("aspect-square size-full", className)}
      {...props} />)
  );
}

function AvatarFallback({
  className,
  ...props
}) {
  return (
    (<AvatarPrimitive.Fallback
      data-slot="avatar-fallback"
      className={cn(
        "bg-muted flex size-full items-center justify-center rounded-full",
        className
      )}
      {...props} />)
  );
}

export { Avatar, AvatarImage, AvatarFallback }


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\components\ui\badge.jsx
==============================

import * as React from "react"
import { Slot } from "@radix-ui/react-slot"
import { cva } from "class-variance-authority";

import { cn } from "@/lib/utils"

const badgeVariants = cva(
  "inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",
  {
    variants: {
      variant: {
        default:
          "border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",
        secondary:
          "border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",
        destructive:
          "border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",
        outline:
          "text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground",
      },
    },
    defaultVariants: {
      variant: "default",
    },
  }
)

function Badge({
  className,
  variant,
  asChild = false,
  ...props
}) {
  const Comp = asChild ? Slot : "span"

  return (
    (<Comp
      data-slot="badge"
      className={cn(badgeVariants({ variant }), className)}
      {...props} />)
  );
}

export { Badge, badgeVariants }


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\components\ui\button.jsx
==============================

import * as React from "react"
import { Slot } from "@radix-ui/react-slot"
import { cva } from "class-variance-authority";

import { cn } from "@/lib/utils"

const buttonVariants = cva(
  "inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",
  {
    variants: {
      variant: {
        default:
          "bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",
        destructive:
          "bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",
        outline:
          "border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",
        secondary:
          "bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",
        ghost:
          "hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",
        link: "text-primary underline-offset-4 hover:underline",
      },
      size: {
        default: "h-9 px-4 py-2 has-[>svg]:px-3",
        sm: "h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",
        lg: "h-10 rounded-md px-6 has-[>svg]:px-4",
        icon: "size-9",
      },
    },
    defaultVariants: {
      variant: "default",
      size: "default",
    },
  }
)

function Button({
  className,
  variant,
  size,
  asChild = false,
  ...props
}) {
  const Comp = asChild ? Slot : "button"

  return (
    (<Comp
      data-slot="button"
      className={cn(buttonVariants({ variant, size, className }))}
      {...props} />)
  );
}

export { Button, buttonVariants }


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\components\ui\card.jsx
==============================

import * as React from "react"

import { cn } from "@/lib/utils"

function Card({
  className,
  ...props
}) {
  return (
    (<div
      data-slot="card"
      className={cn(
        "bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",
        className
      )}
      {...props} />)
  );
}

function CardHeader({
  className,
  ...props
}) {
  return (
    (<div
      data-slot="card-header"
      className={cn(
        "@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",
        className
      )}
      {...props} />)
  );
}

function CardTitle({
  className,
  ...props
}) {
  return (
    (<div
      data-slot="card-title"
      className={cn("leading-none font-semibold", className)}
      {...props} />)
  );
}

function CardDescription({
  className,
  ...props
}) {
  return (
    (<div
      data-slot="card-description"
      className={cn("text-muted-foreground text-sm", className)}
      {...props} />)
  );
}

function CardAction({
  className,
  ...props
}) {
  return (
    (<div
      data-slot="card-action"
      className={cn(
        "col-start-2 row-span-2 row-start-1 self-start justify-self-end",
        className
      )}
      {...props} />)
  );
}

function CardContent({
  className,
  ...props
}) {
  return (<div data-slot="card-content" className={cn("px-6", className)} {...props} />);
}

function CardFooter({
  className,
  ...props
}) {
  return (
    (<div
      data-slot="card-footer"
      className={cn("flex items-center px-6 [.border-t]:pt-6", className)}
      {...props} />)
  );
}

export {
  Card,
  CardHeader,
  CardFooter,
  CardTitle,
  CardAction,
  CardDescription,
  CardContent,
}


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\components\ui\checkbox.jsx
==============================

import * as React from "react"
import * as CheckboxPrimitive from "@radix-ui/react-checkbox"
import { CheckIcon } from "lucide-react"

import { cn } from "@/lib/utils"

function Checkbox({
  className,
  ...props
}) {
  return (
    (<CheckboxPrimitive.Root
      data-slot="checkbox"
      className={cn(
        "peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",
        className
      )}
      {...props}>
      <CheckboxPrimitive.Indicator
        data-slot="checkbox-indicator"
        className="flex items-center justify-center text-current transition-none">
        <CheckIcon className="size-3.5" />
      </CheckboxPrimitive.Indicator>
    </CheckboxPrimitive.Root>)
  );
}

export { Checkbox }


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\components\ui\dialog.jsx
==============================

import * as React from "react"
import * as DialogPrimitive from "@radix-ui/react-dialog"
import { XIcon } from "lucide-react"

import { cn } from "@/lib/utils"

function Dialog({
  ...props
}) {
  return <DialogPrimitive.Root data-slot="dialog" {...props} />;
}

function DialogTrigger({
  ...props
}) {
  return <DialogPrimitive.Trigger data-slot="dialog-trigger" {...props} />;
}

function DialogPortal({
  ...props
}) {
  return <DialogPrimitive.Portal data-slot="dialog-portal" {...props} />;
}

function DialogClose({
  ...props
}) {
  return <DialogPrimitive.Close data-slot="dialog-close" {...props} />;
}

function DialogOverlay({
  className,
  ...props
}) {
  return (
    (<DialogPrimitive.Overlay
      data-slot="dialog-overlay"
      className={cn(
        "data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",
        className
      )}
      {...props} />)
  );
}

function DialogContent({
  className,
  children,
  ...props
}) {
  return (
    (<DialogPortal data-slot="dialog-portal">
      <DialogOverlay />
      <DialogPrimitive.Content
        data-slot="dialog-content"
        className={cn(
          "bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",
          className
        )}
        {...props}>
        {children}
        <DialogPrimitive.Close
          className="ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4">
          <XIcon />
          <span className="sr-only">Close</span>
        </DialogPrimitive.Close>
      </DialogPrimitive.Content>
    </DialogPortal>)
  );
}

function DialogHeader({
  className,
  ...props
}) {
  return (
    (<div
      data-slot="dialog-header"
      className={cn("flex flex-col gap-2 text-center sm:text-left", className)}
      {...props} />)
  );
}

function DialogFooter({
  className,
  ...props
}) {
  return (
    (<div
      data-slot="dialog-footer"
      className={cn("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end", className)}
      {...props} />)
  );
}

function DialogTitle({
  className,
  ...props
}) {
  return (
    (<DialogPrimitive.Title
      data-slot="dialog-title"
      className={cn("text-lg leading-none font-semibold", className)}
      {...props} />)
  );
}

function DialogDescription({
  className,
  ...props
}) {
  return (
    (<DialogPrimitive.Description
      data-slot="dialog-description"
      className={cn("text-muted-foreground text-sm", className)}
      {...props} />)
  );
}

export {
  Dialog,
  DialogClose,
  DialogContent,
  DialogDescription,
  DialogFooter,
  DialogHeader,
  DialogOverlay,
  DialogPortal,
  DialogTitle,
  DialogTrigger,
}


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\components\ui\dropdown-menu.jsx
==============================

import * as React from "react"
import * as DropdownMenuPrimitive from "@radix-ui/react-dropdown-menu"
import { CheckIcon, ChevronRightIcon, CircleIcon } from "lucide-react"

import { cn } from "@/lib/utils"

function DropdownMenu({
  ...props
}) {
  return <DropdownMenuPrimitive.Root data-slot="dropdown-menu" {...props} />;
}

function DropdownMenuPortal({
  ...props
}) {
  return (<DropdownMenuPrimitive.Portal data-slot="dropdown-menu-portal" {...props} />);
}

function DropdownMenuTrigger({
  ...props
}) {
  return (<DropdownMenuPrimitive.Trigger data-slot="dropdown-menu-trigger" {...props} />);
}

function DropdownMenuContent({
  className,
  sideOffset = 4,
  ...props
}) {
  return (
    (<DropdownMenuPrimitive.Portal>
      <DropdownMenuPrimitive.Content
        data-slot="dropdown-menu-content"
        sideOffset={sideOffset}
        className={cn(
          "bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",
          className
        )}
        {...props} />
    </DropdownMenuPrimitive.Portal>)
  );
}

function DropdownMenuGroup({
  ...props
}) {
  return (<DropdownMenuPrimitive.Group data-slot="dropdown-menu-group" {...props} />);
}

function DropdownMenuItem({
  className,
  inset,
  variant = "default",
  ...props
}) {
  return (
    (<DropdownMenuPrimitive.Item
      data-slot="dropdown-menu-item"
      data-inset={inset}
      data-variant={variant}
      className={cn(
        "focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className
      )}
      {...props} />)
  );
}

function DropdownMenuCheckboxItem({
  className,
  children,
  checked,
  ...props
}) {
  return (
    (<DropdownMenuPrimitive.CheckboxItem
      data-slot="dropdown-menu-checkbox-item"
      className={cn(
        "focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-sm py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className
      )}
      checked={checked}
      {...props}>
      <span
        className="pointer-events-none absolute left-2 flex size-3.5 items-center justify-center">
        <DropdownMenuPrimitive.ItemIndicator>
          <CheckIcon className="size-4" />
        </DropdownMenuPrimitive.ItemIndicator>
      </span>
      {children}
    </DropdownMenuPrimitive.CheckboxItem>)
  );
}

function DropdownMenuRadioGroup({
  ...props
}) {
  return (<DropdownMenuPrimitive.RadioGroup data-slot="dropdown-menu-radio-group" {...props} />);
}

function DropdownMenuRadioItem({
  className,
  children,
  ...props
}) {
  return (
    (<DropdownMenuPrimitive.RadioItem
      data-slot="dropdown-menu-radio-item"
      className={cn(
        "focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-sm py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className
      )}
      {...props}>
      <span
        className="pointer-events-none absolute left-2 flex size-3.5 items-center justify-center">
        <DropdownMenuPrimitive.ItemIndicator>
          <CircleIcon className="size-2 fill-current" />
        </DropdownMenuPrimitive.ItemIndicator>
      </span>
      {children}
    </DropdownMenuPrimitive.RadioItem>)
  );
}

function DropdownMenuLabel({
  className,
  inset,
  ...props
}) {
  return (
    (<DropdownMenuPrimitive.Label
      data-slot="dropdown-menu-label"
      data-inset={inset}
      className={cn("px-2 py-1.5 text-sm font-medium data-[inset]:pl-8", className)}
      {...props} />)
  );
}

function DropdownMenuSeparator({
  className,
  ...props
}) {
  return (
    (<DropdownMenuPrimitive.Separator
      data-slot="dropdown-menu-separator"
      className={cn("bg-border -mx-1 my-1 h-px", className)}
      {...props} />)
  );
}

function DropdownMenuShortcut({
  className,
  ...props
}) {
  return (
    (<span
      data-slot="dropdown-menu-shortcut"
      className={cn("text-muted-foreground ml-auto text-xs tracking-widest", className)}
      {...props} />)
  );
}

function DropdownMenuSub({
  ...props
}) {
  return <DropdownMenuPrimitive.Sub data-slot="dropdown-menu-sub" {...props} />;
}

function DropdownMenuSubTrigger({
  className,
  inset,
  children,
  ...props
}) {
  return (
    (<DropdownMenuPrimitive.SubTrigger
      data-slot="dropdown-menu-sub-trigger"
      data-inset={inset}
      className={cn(
        "focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground flex cursor-default items-center rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[inset]:pl-8",
        className
      )}
      {...props}>
      {children}
      <ChevronRightIcon className="ml-auto size-4" />
    </DropdownMenuPrimitive.SubTrigger>)
  );
}

function DropdownMenuSubContent({
  className,
  ...props
}) {
  return (
    (<DropdownMenuPrimitive.SubContent
      data-slot="dropdown-menu-sub-content"
      className={cn(
        "bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-hidden rounded-md border p-1 shadow-lg",
        className
      )}
      {...props} />)
  );
}

export {
  DropdownMenu,
  DropdownMenuPortal,
  DropdownMenuTrigger,
  DropdownMenuContent,
  DropdownMenuGroup,
  DropdownMenuLabel,
  DropdownMenuItem,
  DropdownMenuCheckboxItem,
  DropdownMenuRadioGroup,
  DropdownMenuRadioItem,
  DropdownMenuSeparator,
  DropdownMenuShortcut,
  DropdownMenuSub,
  DropdownMenuSubTrigger,
  DropdownMenuSubContent,
}


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\components\ui\form.jsx
==============================

import * as React from "react"
import { Slot } from "@radix-ui/react-slot"
import { Controller, FormProvider, useFormContext, useFormState } from "react-hook-form";

import { cn } from "@/lib/utils"
import { Label } from "@/components/ui/label"

const Form = FormProvider

const FormFieldContext = React.createContext({})

const FormField = (
  {
    ...props
  }
) => {
  return (
    (<FormFieldContext.Provider value={{ name: props.name }}>
      <Controller {...props} />
    </FormFieldContext.Provider>)
  );
}

const useFormField = () => {
  const fieldContext = React.useContext(FormFieldContext)
  const itemContext = React.useContext(FormItemContext)
  const { getFieldState } = useFormContext()
  const formState = useFormState({ name: fieldContext.name })
  const fieldState = getFieldState(fieldContext.name, formState)

  if (!fieldContext) {
    throw new Error("useFormField should be used within <FormField>")
  }

  const { id } = itemContext

  return {
    id,
    name: fieldContext.name,
    formItemId: `${id}-form-item`,
    formDescriptionId: `${id}-form-item-description`,
    formMessageId: `${id}-form-item-message`,
    ...fieldState,
  }
}

const FormItemContext = React.createContext({})

function FormItem({
  className,
  ...props
}) {
  const id = React.useId()

  return (
    (<FormItemContext.Provider value={{ id }}>
      <div data-slot="form-item" className={cn("grid gap-2", className)} {...props} />
    </FormItemContext.Provider>)
  );
}

function FormLabel({
  className,
  ...props
}) {
  const { error, formItemId } = useFormField()

  return (
    (<Label
      data-slot="form-label"
      data-error={!!error}
      className={cn("data-[error=true]:text-destructive", className)}
      htmlFor={formItemId}
      {...props} />)
  );
}

function FormControl({
  ...props
}) {
  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()

  return (
    (<Slot
      data-slot="form-control"
      id={formItemId}
      aria-describedby={
        !error
          ? `${formDescriptionId}`
          : `${formDescriptionId} ${formMessageId}`
      }
      aria-invalid={!!error}
      {...props} />)
  );
}

function FormDescription({
  className,
  ...props
}) {
  const { formDescriptionId } = useFormField()

  return (
    (<p
      data-slot="form-description"
      id={formDescriptionId}
      className={cn("text-muted-foreground text-sm", className)}
      {...props} />)
  );
}

function FormMessage({
  className,
  ...props
}) {
  const { error, formMessageId } = useFormField()
  const body = error ? String(error?.message ?? "") : props.children

  if (!body) {
    return null
  }

  return (
    (<p
      data-slot="form-message"
      id={formMessageId}
      className={cn("text-destructive text-sm", className)}
      {...props}>
      {body}
    </p>)
  );
}

export {
  useFormField,
  Form,
  FormItem,
  FormLabel,
  FormControl,
  FormDescription,
  FormMessage,
  FormField,
}


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\components\ui\input.jsx
==============================

import * as React from "react"

import { cn } from "@/lib/utils"

function Input({
  className,
  type,
  ...props
}) {
  return (
    (<input
      type={type}
      data-slot="input"
      className={cn(
        "file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",
        "focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]",
        "aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",
        className
      )}
      {...props} />)
  );
}

export { Input }


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\components\ui\label.jsx
==============================

import * as React from "react"
import * as LabelPrimitive from "@radix-ui/react-label"

import { cn } from "@/lib/utils"

function Label({
  className,
  ...props
}) {
  return (
    (<LabelPrimitive.Root
      data-slot="label"
      className={cn(
        "flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",
        className
      )}
      {...props} />)
  );
}

export { Label }


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\components\ui\progress.jsx
==============================

import * as React from "react"
import * as ProgressPrimitive from "@radix-ui/react-progress"

import { cn } from "@/lib/utils"

function Progress({
  className,
  value,
  ...props
}) {
  return (
    (<ProgressPrimitive.Root
      data-slot="progress"
      className={cn(
        "bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",
        className
      )}
      {...props}>
      <ProgressPrimitive.Indicator
        data-slot="progress-indicator"
        className="bg-primary h-full w-full flex-1 transition-all"
        style={{ transform: `translateX(-${100 - (value || 0)}%)` }} />
    </ProgressPrimitive.Root>)
  );
}

export { Progress }


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\components\ui\select.jsx
==============================

import * as React from "react"
import * as SelectPrimitive from "@radix-ui/react-select"
import { CheckIcon, ChevronDownIcon, ChevronUpIcon } from "lucide-react"

import { cn } from "@/lib/utils"

function Select({
  ...props
}) {
  return <SelectPrimitive.Root data-slot="select" {...props} />;
}

function SelectGroup({
  ...props
}) {
  return <SelectPrimitive.Group data-slot="select-group" {...props} />;
}

function SelectValue({
  ...props
}) {
  return <SelectPrimitive.Value data-slot="select-value" {...props} />;
}

function SelectTrigger({
  className,
  size = "default",
  children,
  ...props
}) {
  return (
    (<SelectPrimitive.Trigger
      data-slot="select-trigger"
      data-size={size}
      className={cn(
        "border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className
      )}
      {...props}>
      {children}
      <SelectPrimitive.Icon asChild>
        <ChevronDownIcon className="size-4 opacity-50" />
      </SelectPrimitive.Icon>
    </SelectPrimitive.Trigger>)
  );
}

function SelectContent({
  className,
  children,
  position = "popper",
  ...props
}) {
  return (
    (<SelectPrimitive.Portal>
      <SelectPrimitive.Content
        data-slot="select-content"
        className={cn(
          "bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",
          position === "popper" &&
            "data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",
          className
        )}
        position={position}
        {...props}>
        <SelectScrollUpButton />
        <SelectPrimitive.Viewport
          className={cn("p-1", position === "popper" &&
            "h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1")}>
          {children}
        </SelectPrimitive.Viewport>
        <SelectScrollDownButton />
      </SelectPrimitive.Content>
    </SelectPrimitive.Portal>)
  );
}

function SelectLabel({
  className,
  ...props
}) {
  return (
    (<SelectPrimitive.Label
      data-slot="select-label"
      className={cn("text-muted-foreground px-2 py-1.5 text-xs", className)}
      {...props} />)
  );
}

function SelectItem({
  className,
  children,
  ...props
}) {
  return (
    (<SelectPrimitive.Item
      data-slot="select-item"
      className={cn(
        "focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",
        className
      )}
      {...props}>
      <span className="absolute right-2 flex size-3.5 items-center justify-center">
        <SelectPrimitive.ItemIndicator>
          <CheckIcon className="size-4" />
        </SelectPrimitive.ItemIndicator>
      </span>
      <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>
    </SelectPrimitive.Item>)
  );
}

function SelectSeparator({
  className,
  ...props
}) {
  return (
    (<SelectPrimitive.Separator
      data-slot="select-separator"
      className={cn("bg-border pointer-events-none -mx-1 my-1 h-px", className)}
      {...props} />)
  );
}

function SelectScrollUpButton({
  className,
  ...props
}) {
  return (
    (<SelectPrimitive.ScrollUpButton
      data-slot="select-scroll-up-button"
      className={cn("flex cursor-default items-center justify-center py-1", className)}
      {...props}>
      <ChevronUpIcon className="size-4" />
    </SelectPrimitive.ScrollUpButton>)
  );
}

function SelectScrollDownButton({
  className,
  ...props
}) {
  return (
    (<SelectPrimitive.ScrollDownButton
      data-slot="select-scroll-down-button"
      className={cn("flex cursor-default items-center justify-center py-1", className)}
      {...props}>
      <ChevronDownIcon className="size-4" />
    </SelectPrimitive.ScrollDownButton>)
  );
}

export {
  Select,
  SelectContent,
  SelectGroup,
  SelectItem,
  SelectLabel,
  SelectScrollDownButton,
  SelectScrollUpButton,
  SelectSeparator,
  SelectTrigger,
  SelectValue,
}


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\components\ui\skeleton.jsx
==============================

import { cn } from "@/lib/utils"

function Skeleton({
  className,
  ...props
}) {
  return (
    (<div
      data-slot="skeleton"
      className={cn("bg-accent animate-pulse rounded-md", className)}
      {...props} />)
  );
}

export { Skeleton }


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\components\ui\sonner.jsx
==============================

import { useTheme } from "next-themes"
import { Toaster as Sonner } from "sonner";

const Toaster = ({
  ...props
}) => {
  const { theme = "system" } = useTheme()

  return (
    (<Sonner
      theme={theme}
      className="toaster group"
      style={
        {
          "--normal-bg": "var(--popover)",
          "--normal-text": "var(--popover-foreground)",
          "--normal-border": "var(--border)"
        }
      }
      {...props} />)
  );
}

export { Toaster }


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\components\ui\switch.jsx
==============================

import * as React from "react"
import * as SwitchPrimitive from "@radix-ui/react-switch"

import { cn } from "@/lib/utils"

function Switch({
  className,
  ...props
}) {
  return (
    (<SwitchPrimitive.Root
      data-slot="switch"
      className={cn(
        "peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",
        className
      )}
      {...props}>
      <SwitchPrimitive.Thumb
        data-slot="switch-thumb"
        className={cn(
          "bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0"
        )} />
    </SwitchPrimitive.Root>)
  );
}

export { Switch }


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\components\ui\table.jsx
==============================

import * as React from "react"

import { cn } from "@/lib/utils"

function Table({
  className,
  ...props
}) {
  return (
    (<div data-slot="table-container" className="relative w-full overflow-x-auto">
      <table
        data-slot="table"
        className={cn("w-full caption-bottom text-sm", className)}
        {...props} />
    </div>)
  );
}

function TableHeader({
  className,
  ...props
}) {
  return (
    (<thead
      data-slot="table-header"
      className={cn("[&_tr]:border-b", className)}
      {...props} />)
  );
}

function TableBody({
  className,
  ...props
}) {
  return (
    (<tbody
      data-slot="table-body"
      className={cn("[&_tr:last-child]:border-0", className)}
      {...props} />)
  );
}

function TableFooter({
  className,
  ...props
}) {
  return (
    (<tfoot
      data-slot="table-footer"
      className={cn("bg-muted/50 border-t font-medium [&>tr]:last:border-b-0", className)}
      {...props} />)
  );
}

function TableRow({
  className,
  ...props
}) {
  return (
    (<tr
      data-slot="table-row"
      className={cn(
        "hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",
        className
      )}
      {...props} />)
  );
}

function TableHead({
  className,
  ...props
}) {
  return (
    (<th
      data-slot="table-head"
      className={cn(
        "text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",
        className
      )}
      {...props} />)
  );
}

function TableCell({
  className,
  ...props
}) {
  return (
    (<td
      data-slot="table-cell"
      className={cn(
        "p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",
        className
      )}
      {...props} />)
  );
}

function TableCaption({
  className,
  ...props
}) {
  return (
    (<caption
      data-slot="table-caption"
      className={cn("text-muted-foreground mt-4 text-sm", className)}
      {...props} />)
  );
}

export {
  Table,
  TableHeader,
  TableBody,
  TableFooter,
  TableHead,
  TableRow,
  TableCell,
  TableCaption,
}


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\components\ui\tabs.jsx
==============================

import * as React from "react"
import * as TabsPrimitive from "@radix-ui/react-tabs"

import { cn } from "@/lib/utils"

function Tabs({
  className,
  ...props
}) {
  return (
    (<TabsPrimitive.Root
      data-slot="tabs"
      className={cn("flex flex-col gap-2", className)}
      {...props} />)
  );
}

function TabsList({
  className,
  ...props
}) {
  return (
    (<TabsPrimitive.List
      data-slot="tabs-list"
      className={cn(
        "bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",
        className
      )}
      {...props} />)
  );
}

function TabsTrigger({
  className,
  ...props
}) {
  return (
    (<TabsPrimitive.Trigger
      data-slot="tabs-trigger"
      className={cn(
        "data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className
      )}
      {...props} />)
  );
}

function TabsContent({
  className,
  ...props
}) {
  return (
    (<TabsPrimitive.Content
      data-slot="tabs-content"
      className={cn("flex-1 outline-none", className)}
      {...props} />)
  );
}

export { Tabs, TabsList, TabsTrigger, TabsContent }


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\components\ui\textarea.jsx
==============================

import * as React from "react"

import { cn } from "@/lib/utils"

function Textarea({
  className,
  ...props
}) {
  return (
    (<textarea
      data-slot="textarea"
      className={cn(
        "border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",
        className
      )}
      {...props} />)
  );
}

export { Textarea }


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\config\axiosConfig.js
==============================

import axios from 'axios';

export default axios.create({
  baseURL: import.meta.env.VITE_BACKEND_API_URL,
  withCredentials: true,
});


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\features\auth\authSlice.js
==============================

import { createSlice } from '@reduxjs/toolkit';

const initialState = {
  user: null,
  role: null,
  username: null,
  email: null,
  id: null,
  isAuthenticated: false,
};

const authSlice = createSlice({
  name: 'auth',
  initialState,
  reducers: {
    loginSuccess(state, action) {
      state.isAuthenticated = true;
      state.user = action.payload.user;
      state.role = action.payload.role;
      state.id = action.payload.id;
      state.username = action.payload.username;
      state.email = action.payload.email;
    },
    logout(state) {
      state.isAuthenticated = false;
      state.user = null;
      state.role = null;
      state.id = null;
      state.username = null;
      state.email = null;
    },
    setUser(state, action) {
      state.user = action.payload.user;
      state.role = action.payload.role;
      state.id = action.payload.id;
      state.username = action.payload.username;
      state.email = action.payload.email;
      state.isAuthenticated = true;
    },
  },
});

export const { loginSuccess, setUser, logout } = authSlice.actions;

export default authSlice.reducer;


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\features\problem\problemDetailsSlice.js
==============================

import { createSlice } from "@reduxjs/toolkit";

const initialState = {
  problems: [], // only essential fields like id, title, tags, number
  isLoading: false,
  error: null,
};

export const problemsSlice = createSlice({
  name: 'problems',
  initialState,
  reducers: {
    setProblemDetails: (state, action) => {
      state.problems = action.payload;
    },
    // add loading/error handlers as needed
  },
});

export const { setProblemDetails } = problemsSlice.actions;
export default problemsSlice.reducer;


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\hooks\apis\auth\useGetUserDetails.js
==============================

import { getUserDetails } from "@/apis/auth";
import { useMutation } from "@tanstack/react-query"


export const useGetUserDetails = () => {


    const { isPending, isSucsess, error, mutateAsync: getUserDetailsMutation } = useMutation({
        mutationFn: () => getUserDetails(),
        onSuccess: (data) => {
            console.log('Successfully fetched user details', data);
        },
        onError: (error) => {
            console.error('Error fetching user details', error);
        },
    
    })

    return { isPending, isSucsess, error, getUserDetailsMutation };
}

==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\hooks\apis\auth\useSignin.js
==============================

import { useMutation } from '@tanstack/react-query';
import { toast } from 'sonner';

import { signInRequest } from '@/apis/auth';
import { useDispatch } from 'react-redux';
import { loginSuccess } from '@/features/auth/authSlice';
import { store } from '@/app/store';
// import { useAuth } from '@/hooks/context/useAuth';
export const useSignin = () => {
  const dispatch = useDispatch();

  const {
    isPending,
    isSuccess,
    error,
    mutateAsync: signinMutation,
  } = useMutation({
    mutationFn: signInRequest,
    onSuccess: (data) => {
      console.log('Scuccessfully signed in', data);

      dispatch(
        loginSuccess({
          user: data.user.name, 
          role: data.user.role,
          id: data.user.id,
          username: data.user.username,
          email: data.user.email,
          isAuthenticated: true,
        })
      );

      console.log('Login dispatched, current state:', store.getState());

      toast.success('Successfully signed in.');
    },
    onError: (error) => {
      console.error('Failed to sign in', error);
      toast.error('Failed to sign in. Please try again.');
    },
  });

  return {
    isPending,
    isSuccess,
    error,
    signinMutation,
  };
};


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\hooks\apis\auth\useSignup.js
==============================

import { useMutation } from '@tanstack/react-query';
import { toast } from 'sonner';

import { signUpRequest } from '@/apis/auth';
import { useDispatch } from 'react-redux';
 import { loginSuccess } from '@/features/auth/authSlice';
export const useSignup = () => {
  const dispatch = useDispatch();

  const {
    isPending,
    isSuccess,
    error,
    mutateAsync: signupMutation,
  } = useMutation({
    mutationFn: signUpRequest,
    onSuccess: (data) => {
      console.log('Scuccessfully signed up', data);
      dispatch(
        loginSuccess({
          user: data.user.name,
          role: data.user.role,
          id: data.user.id,
          username: data.user.username,
          email: data.user.email,
          isAuthenticated: true,
        })
      );
      toast.success('Successfully signed up.');
    },
    onError: (error) => {
      console.error('Failed to sign up', error);
      toast.error('Failed to sign up. Please try again.');
    },
  });

  return {
    isPending,
    isSuccess,
    error,
    signupMutation,
  };
};


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\hooks\apis\createProblem\useCreateProblem.js
==============================

import { createProblemRequest } from '@/apis/CreateProblem';
import { useMutation } from '@tanstack/react-query';
import { toast } from 'sonner';


export const useCreateProblem = () => {
    const { isPending, isSuccess, error, mutateAsync: createProblemMutation } = useMutation({ 
        mutationFn: createProblemRequest,
        onSuccess: (data) => {
            console.log('Successfully created problem', data);
            toast.success('Successfully created problem.');
        },
        onError: (error) => {
            console.error('Failed to create problem', error);
            console.log("error.message", error.message);
            toast.error(error.message ||'Failed to create problem. Please try again.'); 
        }
    });
    return {
        isPending,
        isSuccess,
        error,
        createProblemMutation,
    };

}

==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\hooks\apis\deleteProblem\useDeleteProblem.js
==============================

import { deleteProblem } from "@/apis/Delete Problem";
import { useMutation } from "@tanstack/react-query";
import { toast } from "sonner";


export const useDeleteProblem = () => {
    const {
        isLoading,
        isSuccess,
        error,
        mutateAsync: deleteProblemMutation,
    } = useMutation({
        mutationFn: deleteProblem,
        onSuccess: (data) => {
        console.log('Successfully deleted problem', data);
        // toast.success('Successfully deleted problem.');
        },
        onError: (error) => {
        console.error('Failed to delete problem', error);
        console.log('error.message', error.message);
        // toast.error(
        //     error.message || 'Failed to delete problem. Please try again.'
        // );
        },
    });
    
    return {
        isLoading,
        isSuccess,
        error,
        deleteProblemMutation,
    };
    }

==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\hooks\apis\discussions\useCreateComment.js
==============================

import { createCommentRequest } from '@/apis/Discussions/createComment';
import { useMutation } from '@tanstack/react-query';

export const useCreateComment = () => {
  const {
    isPending,
    isSuccess,
    error,
    mutateAsync: createCommentMutation,
  } = useMutation({
    mutationFn: createCommentRequest,
    onSuccess: (data) => {
      console.log('Successfully created comment', data);
      // toast.success('Comment created successfully.');
    },
    onError: (error) => {
      console.error('Failed to create comment', error);
      // toast.error(error?.message || 'Failed to create comment. Please try again.');
    },
  });
  return {
    isPending,
    isSuccess,
    error,
    createCommentMutation,
  };
};


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\hooks\apis\discussions\useCreateDiscussions.js
==============================

import { createDiscussionRequest } from "@/apis/Discussions/CreateDiscussions";
import { useMutation } from "@tanstack/react-query";


export const useCreateDiscussion = () => {
    const {
      isPending,
      isSuccess,
      error,
      mutateAsync: createDiscussionMutation,
    } = useMutation({
      mutationFn: createDiscussionRequest,
      onSuccess: (data) => {
        console.log('Successfully created discussion', data);
        // toast.success('Discussion created successfully.');
      },
      onError: (error) => {
        console.error('Failed to create discussion', error);
        // toast.error(error?.message || 'Failed to create discussion. Please try again.');
      },
    });

    return {
      isPending,
      isSuccess,
      error,
      createDiscussionMutation,
    };
}

==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\hooks\apis\discussions\useDeleteComments.js
==============================

import { deleteCommentRequest } from '@/apis/Discussions/deleteComment';
import { useMutation } from '@tanstack/react-query';

export const useDeleteComment = () => {
  const {
    isPending,
    isSuccess,
    error,
    mutateAsync: deleteCommentMutation,
  } = useMutation({
    mutationFn: deleteCommentRequest,
    onSuccess: (data) => {
      console.log('Successfully deleted comment', data);
      // toast.success('Successfully deleted comment.');
    },
    onError: (error) => {
      console.error('Failed to delete comment', error);
      // toast.error(error?.message || 'Failed to delete comment. Please try again.');
    },
  });
  return {
    isPending,
    isSuccess,
    error,
    deleteCommentMutation,
  };
};


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\hooks\apis\discussions\useDeleteDiscussion.js
==============================

import { deleteDiscussionRequest } from "@/apis/Discussions/deleteDiscussion";
import { useMutation } from "@tanstack/react-query";


export const useDeleteDiscussion = () => {

    const { isPending, isSuccess, error, mutateAsync: deleteDiscussionMutation } = useMutation({
        mutationFn: deleteDiscussionRequest,
        onSuccess: (data) => {
            console.log('Successfully deleted discussion', data);
            // toast.success('Successfully deleted discussion.');
        },
        onError: (error) => {
            console.error('Failed to delete discussion', error);
            // toast.error(error?.message || 'Failed to delete discussion. Please try again.');
        },
    });

    return {
        isPending,
        isSuccess,
        error,
        deleteDiscussionMutation,
    };
}

==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\hooks\apis\discussions\useGetAllComments.js
==============================

import { getAllCommentsRequest } from '@/apis/Discussions/getAllComments';
import { useQuery } from '@tanstack/react-query';
import { use } from 'react';

export const useGetAllComments = () => {
  const { data, error, isPending, isSuccess, refetch } = useQuery({
    queryKey: ['allComments'],
    queryFn: () => getAllCommentsRequest,
    cacheTime: 0, // No cache
    staleTime: 0, // Always stale
    onSuccess: (data) => {
      console.log('Successfully fetched all comments', data);
      // toast.success('Successfully fetched all comments.');
    },
    onError: (error) => {
      console.error('Failed to fetch all comments', error);
      // toast.error(error?.message || 'Failed to fetch comments. Please try again.');
    },
  });
  return {
    data,
    isPending,
    isSuccess,
    error,
    refetch,
  };
};


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\hooks\apis\discussions\useGetAllDiscussions.js
==============================

import { getAllDiscussionsRequest } from "@/apis/Discussions/GetAllDiscussions";
import {  useQuery } from "@tanstack/react-query"


export const useGetAllDiscussions = () => {
    const {data, error, isPending, isSuccess, refetch} = useQuery({
        queryKey: ['allDiscussions'],
        queryFn: () => getAllDiscussionsRequest(),
        cacheTime: 0, // No cache
        staleTime: 0, // Always stale
        onSuccess: (data) => {
            console.log('Successfully fetched all discussions', data);
            // toast.success('Successfully fetched all discussions.');
        },
        onError: (error) => {
            console.error('Failed to fetch all discussions', error);
            // toast.error(error?.message || 'Failed to fetch discussions. Please try again.');
        },
    })

    return {
        data,
        isPending,
        isSuccess,
        error,
        refetch, 
    }
}

==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\hooks\apis\discussions\useUpdateComment.js
==============================

import { updateCommentRequest } from '@/apis/Discussions/updateComment';
import { useMutation } from '@tanstack/react-query';

export const useUpdateComment = () => {
  const {
    isPending,
    isSuccess,
    error,
    mutatateAsync: updateCommentMutation,
  } = useMutation({
    mutationFn: updateCommentRequest,
    onSuccess: (data) => {
      console.log('Successfully updated comment', data);
      // toast.success('Comment updated successfully.');
    },
    onError: (error) => {
      console.error('Failed to update comment', error);
      // toast.error(error?.message || 'Failed to update comment. Please try again.');
    },
  });
  return {
    isPending,
    isSuccess,
    error,
    updateCommentMutation,
  };
};


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\hooks\apis\discussions\useUpdateDiscussion.js
==============================

import { updateDiscussionRequest } from '@/apis/Discussions/updateDiscussion';
import { useMutation } from '@tanstack/react-query';

export const useUpdateDiscussion = () => {
  const {
    isPending,
    isSuccess,
    error,
    mutateAsync: updateDiscussionMutation,
  } = useMutation({
    mutationFn: updateDiscussionRequest,
    onSuccess: (data) => {
      console.log('Successfully updated discussion', data);
      // toast.success('Successfully updated discussion.');
    },
    onError: (error) => {
      console.error('Failed to update discussion', error);
      // toast.error(error?.message || 'Failed to update discussion. Please try again.');
    },
  });

  return {
    isPending,
    isSuccess,
    error,
    updateDiscussionMutation,
  };
};


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\hooks\apis\getAllProblems\useGetAllProblems.js
==============================

import { getAllProblemsRequest } from '@/apis/getAllProblems';
import { useMutation } from '@tanstack/react-query';

export const useGetAllProblems = () => {
  const {
    isPending,
    isSuccess,
    error,
    mutateAsync: getAllProblemsMutation,
  } = useMutation({
    mutationFn: (userId) => getAllProblemsRequest(userId),
    onSuccess: (data) => {
      console.log('Successfully fetched all problems', data);
    },
    onError: (error) => {
      console.error('Failed to fetch all problems', error);
    },
  });

  return {
    isPending,
    isSuccess,
    error,
    getAllProblemsMutation,
  };
};


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\hooks\apis\getIndividualProblem\useGetIndividualProblem.js
==============================

import { getIndividualProblemsRequest } from '@/apis/getIndividualProblemDetails';
import { useMutation } from '@tanstack/react-query';

export const useGetIndividualProblem = () => {
  const {
    isLoading,
    isSuccess,
    error,
    mutateAsync: getIndividualProblemMutation,
  } = useMutation({
    mutationFn: (problemId) => getIndividualProblemsRequest(problemId),
    onSuccess: (data) => {
      console.log('Successfully fetched individual problem', data);
    },
    onError: (error) => {
      console.error('Error fetching individual problem', error);
    },
  });

  return {
    isLoading,
    isSuccess,
    error,
    getIndividualProblemMutation,
  };
};


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\hooks\apis\getUsersAllSubmission\useGetUsersAllSubmissions.js
==============================

import { useMutation } from '@tanstack/react-query';
import { getUserAllSubmissions } from '@/apis/getUserSubmissions';

export const useGetUsersAllSubmissions = () => {
  const {
    isLoading,
    isSuccess,
    error,
    mutateAsync: getUserAllSubmissionsMutation,
  } = useMutation({
    mutationFn: () => getUserAllSubmissions(),
    onSuccess: (data) => {
      console.log('successfully fetched all user submissions', data);
    },

    onError: (error) => {
      console.log('Error fetching all user submissions', error);
    },
  });

  return { isLoading, isSuccess, error, getUserAllSubmissionsMutation };
};


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\hooks\apis\leaderboard\useGetLeaderBoardData.js
==============================

import { getLeaderBoardDataRequest } from "@/apis/Leaderboard/getLeaderBoardData";
import { useQuery } from "@tanstack/react-query";


export const useGetLeaderBoardData = () => {
    const { isPending, isSuccess, error, data: leaderBoardData } = useQuery({
        queryKey: ['leaderBoardData'],
        queryFn: getLeaderBoardDataRequest,
        cacheTime: 0, // No cache
        staleTime: 0, // Always stale   
        onSuccess: (data) => {
            console.log('Successfully fetched leaderboard data', data);
            // toast.success('Leaderboard data fetched successfully.');
        },
        onError: (error) => {
            console.error('Failed to fetch leaderboard data', error);
            // toast.error(error?.message || 'Failed to fetch leaderboard data. Please try again.');
        },
    });
    return {
        isPending,
        isSuccess,
        error,
        leaderBoardData,
    };


}

==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\hooks\apis\ProblemSheets\useAddProblemToSheet.js
==============================

import { addProblemToSheetRequest } from "@/apis/ProblemSheet/addProblemToSheet";
import { useMutation } from "@tanstack/react-query";


export const useAddProblemToSheet = () => { 
    const {isLoading, isSucess, error, mutateAsync: addProblemToSheetMutation} = useMutation({
        mutationFn: () => addProblemToSheetRequest(),

        onSuccess: (data) => {
            console.log('Successfully added problem to sheet', data);
        },
        onError: (error) => {
            console.error('Failed to add problem to sheet', error);
            console.log("error.message", error.message);
        },
    })

    return {
        isLoading,
        isSucess,
        error,
        addProblemToSheetMutation,
    };

}

==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\hooks\apis\ProblemSheets\useCreateSheet.js
==============================


import { createSheetRequest } from '@/apis/ProblemSheet/createSheet';
import { useMutation } from '@tanstack/react-query';

export const useCreateSheet = () => { 
    const {
      isPending,
      isSuccess,
      error,
      mutateAsync: createSheetMutation,
    } = useMutation({
      mutationFn: createSheetRequest,
      onSuccess: (data) => {
        console.log('Successfully created sheet', data);
      },
      onError: (error) => {
        console.error('Failed to create sheet', error);

      },
    });

    return {
      isPending,
      isSuccess,
      error,
      createSheetMutation,
    };


}

==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\hooks\apis\ProblemSheets\useDeleteSheet.js
==============================

import { deleteSheetRequest } from "@/apis/ProblemSheet/deleteSheet";
import { useMutation } from "@tanstack/react-query";


export const useDeleteSheet = () => { 
    const {
      isLoading,
      isSucess,
      error,
      mutateAsync: deleteSheetMutation,
    } = useMutation({
      mutationFn: (sheetId) => deleteSheetRequest(sheetId),
      onSuccess: (data) => {
        console.log('Successfully deleted sheet', data);
      },
      onError: (error) => {
        console.error('Failed to delete sheet', error);
        console.log('error.message', error.message);
      },
    });

    return {
        isLoading,
        isSucess,
        error,
        deleteSheetMutation,
    };
}

==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\hooks\apis\ProblemSheets\useGetAllSheetDetails.js
==============================

import { getAllSheetDetailsRequest } from "@/apis/ProblemSheet/getAllSheetDetails";
import { useMutation } from "@tanstack/react-query";



export const useGetAllSheetDetails = () => { 
    const {
      isLoading,
      isSuccess,
      error,
      mutateAsync: getAllSheetDetailsMutation,
    } = useMutation({
      mutationFn: () => getAllSheetDetailsRequest(),
      onSuccess: (data) => {
        console.log('Successfully fetched all sheet details', data);
      },
      onError: (error) => {
        console.error('Error fetching all sheet details', error);
      },
    });

    return {
      isLoading,
      isSuccess,
      error,
      getAllSheetDetailsMutation,
    };
}

==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\hooks\apis\ProblemSheets\useGetIndividualSheetDetails.js
==============================

import { getIndividualSheetDetailsRequest } from "@/apis/ProblemSheet/getIndividualSheetDetails";
import { useMutation } from "@tanstack/react-query";


export const useGetIndividualSheetDetails = () => {
    const { isLoading, isSuccess, error, mutateAsync: getIndividualSheetDetailsMutation } = useMutation({
        mutationFn: (sheetId) => getIndividualSheetDetailsRequest(sheetId),
        onSuccess: (data) => {
            console.log('Successfully fetched individual sheet details', data);
        },
        onError: (error) => {
            console.error('Error fetching individual sheet details', error);
        },
    });

    return {
        isLoading,
        isSuccess,
        error,
        getIndividualSheetDetailsMutation,
    };
}

==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\hooks\apis\ProblemSheets\useRemoveProblemFromSheet.js
==============================

import { removeProblemFromSheetRequest } from "@/apis/ProblemSheet/removeProblemFromSheet";
import { useMutation } from "@tanstack/react-query";


export const useRemoveProblemFromSheet = () => {
    const { isLoading, isSuccess, error, mutateAsync: removeProblemFromSheetMutation } = useMutation({
        mutationFn: () => removeProblemFromSheetRequest(),
        onSuccess: (data) => {
            console.log('Successfully removed problem from sheet', data);
        },
        onError: (error) => {
            console.error('Failed to remove problem from sheet', error);
            console.log("error.message", error.message);
        },
    })


    return {
        isLoading,
        isSuccess,
        error,
        removeProblemFromSheetMutation,
    };
}

==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\hooks\apis\ProblemSheets\useUpdateProblemsInSheet.js
==============================

import { updateProblemsInSheetRequest } from '@/apis/ProblemSheet/updateProblemsInSheet';
import { useMutation } from '@tanstack/react-query';

export const useUpdateProblemsInSheet = () => {
  const {
    isLoading,
    isSucess,
    error,
    mutateAsync: updateProblemsInSheetMutation,
  } = useMutation({
    mutationFn: ({ sheetId, problemIds }) =>
      updateProblemsInSheetRequest({ sheetId, problemIds }),

    onSuccess: (data) => {
      console.log('Successfully updated problem to sheet', data);
    },
    onError: (error) => {
      console.error('Failed to updated problem to sheet', error);
      console.log('error.message', error.message);
    },
  });

  return {
    isLoading,
    isSucess,
    error,
    updateProblemsInSheetMutation,
  };
};


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\hooks\apis\runCode\useExecuteCode.js
==============================


import { runCode } from '@/apis/runCode';
import { useMutation } from '@tanstack/react-query';
import { toast } from 'sonner';



export const useExecuteProblem = () => {
  const {
    isPending,
    isSuccess,
    error,
    mutateAsync: runProblemMutation,
  } = useMutation({
    mutationFn: runCode,
    onSuccess: (data) => {
      console.log('Successfully executed problem', data);
      toast.success('Successfully executed problem.');
    },
    onError: (error) => {
      console.error('Failed to executed problem', error);
      console.log('error.message', error.message);
      toast.error(
        error.message || 'Failed to executed problem. Please try again.'
      );
    },
  });
  return {
    isPending,
    isSuccess,
    error,
    runProblemMutation,
  };
};


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\hooks\apis\submitCode\useSubmitCode.js
==============================

import { submitCode } from '@/apis/submitCode';
import { useMutation } from '@tanstack/react-query';
import { toast } from 'sonner';

export const useSubmitCode = () => {
  const {
    isPending,
    isSuccess,
    error,
    mutateAsync: submitProblemMutation,
  } = useMutation({
    mutationFn: submitCode,
    onSuccess: (data) => {
      console.log('Successfully submitted problem', data);
      toast.success('Successfully submitted problem.');
    },
    onError: (error) => {
      console.error('Failed to submitted problem', error);
      console.log('error.message', error.message);
      toast.error(
        error.message || 'Failed to submitted problem. Please try again.'
      );
    },
  });
  return {
    isPending,
    isSuccess,
    error,
    submitProblemMutation,
  };
};


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\hooks\apis\updateProblemDetails\useUpdateProblemDetails.js
==============================

import { updateProblemDetails } from '@/apis/updateProblemDetails';
import { useMutation } from '@tanstack/react-query';
import { toast } from 'sonner';

export const useUpdateProblemDetails = () => {
  const {
    isLoading,
    isSuccess,
    error,
    mutateAsync: updateProblemMutation,
  } = useMutation({
    mutationFn: updateProblemDetails,
    onSuccess: (data) => {
      console.log('Successfully updated problem', data);
      toast.success('Successfully updated problem.');
    },
    onError: (error) => {
      console.error('Failed to update problem', error);
      console.log('error.message', error.message);
      toast.error(
        error.message || 'Failed to update problem. Please try again.'
      );
    },
  });

  return {
    isLoading,
    isSuccess,
    error,
    updateProblemMutation,
  };
};


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\hooks\apis\userStats\useGetUSerHeatMapData.js
==============================

import { getUserHeatMapDataRequest } from '@/apis/userStats/getUserHeatMapData';
import { useQuery, useQueryClient } from '@tanstack/react-query';


export const useGetUserHeatMapData = () => {
    const { data, error, isPending, isSuccess, refetch } = useQuery({
      queryKey: ['userHeatMapData'],
      queryFn: () => getUserHeatMapDataRequest(),
      //enabled: false, // Don't fetch on mount
      cacheTime: 0, // No cache
      staleTime: 0, // Always stale
      onSuccess: (data) => {
        console.log('Successfully fetched user heatmap data', data);
        // toast.success('Successfully fetched user heatmap data.');
      },
      onError: (error) => {
        console.error('Failed to fetch user heatmap data', error);
        // toast.error(error?.message || 'Failed to fetch user heatmap data. Please try again.');
      },
    });
    return {
        data,
        isPending,
        isSuccess,
        error,
        refetch, // use this when a new submission is made
    };


}

==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\hooks\apis\userStats\useGetUserSolvedStats.js
==============================

import { getUSerSolvedStatsRequest } from "@/apis/userStats/getUserSolvedStats";
import { useQuery } from "@tanstack/react-query";


export const useGetUserSolvedStats = () => {

    const { data, error, isPending, isSuccess, refetch } = useQuery({
        queryKey: ['userSolvedStats'],
        queryFn: () => getUSerSolvedStatsRequest(),
        //enabled: false, // Don't fetch on mount
        cacheTime: 0, // No cache
        staleTime: 0, // Always stale
        onSuccess: (data) => {
            console.log('Successfully fetched user solved stats', data);
            // toast.success('Successfully fetched user solved stats.');
        },
        onError: (error) => {
            console.error('Failed to fetch user solved stats', error);
            // toast.error(error?.message || 'Failed to fetch user solved stats. Please try again.');
        },
    });
    return {
        data,
        isPending,
        isSuccess,
        error,
        refetch, // use this when a new submission is made
    };
}

==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\hooks\apis\userStats\useGetUserSubmissionProgress.js
==============================

import { getUserProgressDataRequest } from "@/apis/userStats/getUserProgressData";
import { useQuery } from "@tanstack/react-query";

export const useGetUserProgressData = () => {


    const { data, error, isPending, isSucess, refetch } = useQuery({
      queryKey: ['userProgressData'],
      queryFn: () => getUserProgressDataRequest(),
      //enabled: false, // Don't fetch on mount
      cacheTime: 0, // No cache
      staleTime: 0, // Always stale
      onSuccess: (data) => {
        console.log('Successfully fetched user progress data', data);
        // toast.success('Successfully fetched user progress data.');
      },
      onError: (error) => {
        console.error('Failed to fetch user progress data', error);
        // toast.error(error?.message || 'Failed to fetch user progress data. Please try again.');
      },
    });
    return {
        data,
        isPending,
        isSucess,
        error,
        refetch, // use this when a new submission is made
    };
}

==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\hooks\apis\userSubmissionDetails\useUserSubmissionSpecificProblem.js
==============================

import { useQuery, useQueryClient } from '@tanstack/react-query';
import { toast } from 'sonner';
import { getUserSubmissionSpecificProblemDetails } from '@/apis/getUserSubmissionSpecificProblemDetails';

export const useUserSubmissionSpecificProblem = (problemId, isAuthenticated) => {
  const queryClient = useQueryClient();

  const { data, error, isPending, isSuccess, refetch } = useQuery({
    queryKey: ['submissionDetails', problemId],
    queryFn: () => getUserSubmissionSpecificProblemDetails(problemId),
    enabled: !!problemId && isAuthenticated, // only fetch if problemId is available
    staleTime: Infinity, // cache forever until invalidated
    onSuccess: (data) => {
      console.log('Successfully fetched submission details', data);
      // toast.success('Successfully fetched submission details.');
    },
    onError: (error) => {
      console.error('Failed to fetch submission details', error);
      // toast.error(
      //   error?.message ||
      //     'Failed to fetch submission details. Please try again.'
      // );
    },
  });

  return {
    data,
    isPending,
    isSuccess,
    error,
    refetch, // use this when a new submission is made
  };
};


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\index.css
==============================

@import "tailwindcss";
@import "tw-animate-css";

@custom-variant dark (&:is(.dark *));

@theme inline {
  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-card: var(--card);
  --color-card-foreground: var(--card-foreground);
  --color-popover: var(--popover);
  --color-popover-foreground: var(--popover-foreground);
  --color-primary: var(--primary);
  --color-primary-foreground: var(--primary-foreground);
  --color-secondary: var(--secondary);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-muted: var(--muted);
  --color-muted-foreground: var(--muted-foreground);
  --color-accent: var(--accent);
  --color-accent-foreground: var(--accent-foreground);
  --color-destructive: var(--destructive);
  --color-border: var(--border);
  --color-input: var(--input);
  --color-ring: var(--ring);
  --color-chart-1: var(--chart-1);
  --color-chart-2: var(--chart-2);
  --color-chart-3: var(--chart-3);
  --color-chart-4: var(--chart-4);
  --color-chart-5: var(--chart-5);
  --color-sidebar: var(--sidebar);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-ring: var(--sidebar-ring);
}

:root {
  --radius: 0.625rem;
  --background: oklch(1 0 0);
  --foreground: oklch(0.145 0 0);
  --card: oklch(1 0 0);
  --card-foreground: oklch(0.145 0 0);
  --popover: oklch(1 0 0);
  --popover-foreground: oklch(0.145 0 0);
  --primary: oklch(0.205 0 0);
  --primary-foreground: oklch(0.985 0 0);
  --secondary: oklch(0.97 0 0);
  --secondary-foreground: oklch(0.205 0 0);
  --muted: oklch(0.97 0 0);
  --muted-foreground: oklch(0.556 0 0);
  --accent: oklch(0.97 0 0);
  --accent-foreground: oklch(0.205 0 0);
  --destructive: oklch(0.577 0.245 27.325);
  --border: oklch(0.922 0 0);
  --input: oklch(0.922 0 0);
  --ring: oklch(0.708 0 0);
  --chart-1: oklch(0.646 0.222 41.116);
  --chart-2: oklch(0.6 0.118 184.704);
  --chart-3: oklch(0.398 0.07 227.392);
  --chart-4: oklch(0.828 0.189 84.429);
  --chart-5: oklch(0.769 0.188 70.08);
  --sidebar: oklch(0.985 0 0);
  --sidebar-foreground: oklch(0.145 0 0);
  --sidebar-primary: oklch(0.205 0 0);
  --sidebar-primary-foreground: oklch(0.985 0 0);
  --sidebar-accent: oklch(0.97 0 0);
  --sidebar-accent-foreground: oklch(0.205 0 0);
  --sidebar-border: oklch(0.922 0 0);
  --sidebar-ring: oklch(0.708 0 0);
}

.dark {
  --background: oklch(0.145 0 0);
  --foreground: oklch(0.985 0 0);
  --card: oklch(0.205 0 0);
  --card-foreground: oklch(0.985 0 0);
  --popover: oklch(0.205 0 0);
  --popover-foreground: oklch(0.985 0 0);
  --primary: oklch(0.922 0 0);
  --primary-foreground: oklch(0.205 0 0);
  --secondary: oklch(0.269 0 0);
  --secondary-foreground: oklch(0.985 0 0);
  --muted: oklch(0.269 0 0);
  --muted-foreground: oklch(0.708 0 0);
  --accent: oklch(0.269 0 0);
  --accent-foreground: oklch(0.985 0 0);
  --destructive: oklch(0.704 0.191 22.216);
  --border: oklch(1 0 0 / 10%);
  --input: oklch(1 0 0 / 15%);
  --ring: oklch(0.556 0 0);
  --chart-1: oklch(0.488 0.243 264.376);
  --chart-2: oklch(0.696 0.17 162.48);
  --chart-3: oklch(0.769 0.188 70.08);
  --chart-4: oklch(0.627 0.265 303.9);
  --chart-5: oklch(0.645 0.246 16.439);
  --sidebar: oklch(0.205 0 0);
  --sidebar-foreground: oklch(0.985 0 0);
  --sidebar-primary: oklch(0.488 0.243 264.376);
  --sidebar-primary-foreground: oklch(0.985 0 0);
  --sidebar-accent: oklch(0.269 0 0);
  --sidebar-accent-foreground: oklch(0.985 0 0);
  --sidebar-border: oklch(1 0 0 / 10%);
  --sidebar-ring: oklch(0.556 0 0);
}

/* @layer base {
  * {
    @apply border-border outline-ring/50;
  }
  body {
    @apply bg-background text-foreground;
  }
} */

@layer base {
  :root {
    /* Color system variables */
    --background: 240 10% 3.9%;
    --foreground: 0 0% 98%;
    --card: 240 10% 3.9%;
    --card-foreground: 0 0% 98%;
    --popover: 240 10% 3.9%;
    --popover-foreground: 0 0% 98%;
    --primary: 270 91% 58%;
    --primary-foreground: 0 0% 98%;
    --secondary: 240 3.7% 15.9%;
    --secondary-foreground: 0 0% 98%;
    --muted: 240 3.7% 15.9%;
    --muted-foreground: 240 5% 64.9%;
    --accent: 240 3.7% 15.9%;
    --accent-foreground: 0 0% 98%;
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 0 0% 98%;
    --border: 240 3.7% 15.9%;
    --input: 240 3.7% 15.9%;
    --ring: 240 4.9% 83.9%;
    --radius: 0.5rem;

    /* Premium color palette */
    --premium-purple: 278 66% 59%;
    --premium-blue: 259 88% 33%;
    --premium-cyan: 195 94% 61%;
    --premium-dark: 240 30% 8%;
    --premium-darker: 240 25% 5%;
    --premium-highlight: 282 84% 38%;
  }

  * {
    border-color: hsl(var(--border));
  }

  body {
    background-color: hsl(var(--premium-darker, 240 25% 5%));
    color: hsl(var(--foreground));
  }
}

/* Component layer */
@layer components {
  .container {
    @apply mx-auto px-4 sm:px-6 lg:px-8;
    max-width: 1400px;
  }

  .premium-text-gradient {
    background: linear-gradient(to right, hsl(195 94% 61%), hsl(282 84% 38%));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    color: transparent;
  }

  .code-glow {
    box-shadow: 0 0 15px rgba(76, 201, 240, 0.3);
  }

  .premium-border-gradient {
    position: relative;
    border-radius: 0.5rem;
    z-index: 0;
    overflow: hidden;
  }

  .premium-border-gradient::before {
    content: "";
    position: absolute;
    z-index: -2;
    left: -50%;
    top: -50%;
    width: 200%;
    height: 200%;
    background-color: transparent;
    background-repeat: no-repeat;
    background-image: linear-gradient(to right, hsl(195 94% 61%), hsl(259 88% 33%), hsl(282 84% 38%));
    animation: rotate 4s linear infinite;
  }

  .premium-border-gradient::after {
    content: "";
    position: absolute;
    z-index: -1;
    left: 2px;
    top: 2px;
    width: calc(100% - 4px);
    height: calc(100% - 4px);
    background: hsl(var(--premium-darker, 240 25% 5%));
    border-radius: 0.4rem;
  }
}

/* Utilities layer */
@layer utilities {
  /* Existing colors */

  .color-empty {
    fill: #ebedf0;
  }

  .color-github-1 {
    fill: #c6e48b;
  }

  .color-github-2 {
    fill: #7bc96f;
  }

  .color-github-3 {
    fill: #239a3b;
  }

  .color-github-4 {
    fill: #196127;
  }

   /* Tooltip base */
   [data-tooltip] {
    @apply relative cursor-pointer;
  }

  /* Tooltip content */
  [data-tooltip]::after {
    content: attr(data-tooltip);
    position: absolute;
    top: -1.5rem;
    left: 50%;
    transform: translateX(-50%);
    background-color: rgba(0, 0, 0, 0.8);
    color: white;
    padding: 2px 6px;
    border-radius: 4px;
    font-size: 12px;
    white-space: nowrap;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.2s ease-in-out;
    z-index: 50;
  }

  .react-calendar-heatmap text {
    fill: #000 !important;
  }
  

  /* In your CSS file */
.custom-active-tab {
  background-color: #3b2ad3 !important; /* emerald-600 */
  color: white !important;
}
  

  /* Show tooltip on hover */
  [data-tooltip]:hover::after {
    opacity: 1;
  }

  
  .bg-premium-darker {
    background-color: hsl(var(--premium-darker, 240 25% 5%));
  }
  
  .bg-premium-dark {
    background-color: hsl(var(--premium-dark, 240 30% 8%));
  }
  
  .text-premium-cyan {
    color: hsl(var(--premium-cyan, 195 94% 61%));
  }
  
  .border-premium-blue\/20 {
    border-color: hsl(var(--premium-blue, 259 88% 33%) / 0.2);
  }
  
  .hover\:border-premium-purple\/50:hover {
    border-color: hsl(var(--premium-purple, 278 66% 59%) / 0.5);
  }
  
  .bg-premium-purple {
    background-color: hsl(var(--premium-purple, 278 66% 59%));
  }
  
  .bg-premium-purple\/10 {
    background-color: hsl(var(--premium-purple, 278 66% 59%) / 0.1);
  }
  
  .hover\:bg-premium-highlight:hover {
    background-color: hsl(var(--premium-highlight, 282 84% 38%));
  }
  
  .hover\:bg-premium-purple:hover {
    background-color: hsl(var(--premium-purple, 278 66% 59%));
  }
  
  .hover\:bg-premium-blue\/20:hover {
    background-color: hsl(var(--premium-blue, 259 88% 33%) / 0.2);
  }
  
  .hover\:text-premium-cyan:hover {
    color: hsl(var(--premium-cyan, 195 94% 61%));
  }
  
  .border-premium-purple\/50 {
    border-color: hsl(var(--premium-purple, 278 66% 59%) / 0.5);
  }
  
  .bg-premium-blue {
    background-color: hsl(var(--premium-blue, 259 88% 33%));
  }
  
  .bg-premium-blue\/20 {
    background-color: hsl(var(--premium-blue, 259 88% 33%) / 0.2);
  }

  /* NEW BACKGROUND COLORS - Dark Theme Extension */
  
  /* Ultra dark backgrounds */
  .bg-premium-void {
    background-color: hsl(var(--premium-void, 240 35% 3%));
  }
  
  .bg-premium-shadow {
    background-color: hsl(var(--premium-shadow, 245 28% 6%));
  }
  
  .bg-premium-midnight {
    background-color: hsl(var(--premium-midnight, 248 25% 10%));
  }
  
  /* Medium dark backgrounds */
  .bg-premium-charcoal {
    background-color: hsl(var(--premium-charcoal, 252 22% 12%));
  }
  
  .bg-premium-slate {
    background-color: hsl(var(--premium-slate, 255 20% 15%));
  }
  
  .bg-premium-steel {
    background-color: hsl(var(--premium-steel, 258 18% 18%));
  }
  
  /* Accent dark backgrounds */
  .bg-premium-navy {
    background-color: hsl(var(--premium-navy, 230 35% 12%));
  }
  
  .bg-premium-indigo-dark {
    background-color: hsl(var(--premium-indigo-dark, 265 25% 14%));
  }
  
  .bg-premium-violet-dark {
    background-color: hsl(var(--premium-violet-dark, 280 28% 16%));
  }
  
  /* Subtle tinted backgrounds */
  .bg-premium-blue-dark {
    background-color: hsl(var(--premium-blue-dark, 259 40% 11%));
  }
  
  .bg-premium-purple-dark {
    background-color: hsl(var(--premium-purple-dark, 278 35% 13%));
  }
  
  .bg-premium-cyan-dark {
    background-color: hsl(var(--premium-cyan-dark, 195 45% 9%));
  }
  
  /* With opacity variants */
  .bg-premium-void\/50 {
    background-color: hsl(var(--premium-void, 240 35% 3%) / 0.5);
  }
  
  .bg-premium-shadow\/80 {
    background-color: hsl(var(--premium-shadow, 245 28% 6%) / 0.8);
  }
  
  .bg-premium-midnight\/30 {
    background-color: hsl(var(--premium-midnight, 248 25% 10%) / 0.3);
  }
  
  .bg-premium-charcoal\/60 {
    background-color: hsl(var(--premium-charcoal, 252 22% 12%) / 0.6);
  }
  
  .bg-premium-slate\/40 {
    background-color: hsl(var(--premium-slate, 255 20% 15%) / 0.4);
  }
  
  .bg-premium-steel\/70 {
    background-color: hsl(var(--premium-steel, 258 18% 18%) / 0.7);
  }
  
  /* Hover variants */
  .hover\:bg-premium-void:hover {
    background-color: hsl(var(--premium-void, 240 35% 3%));
  }
  
  .hover\:bg-premium-shadow:hover {
    background-color: hsl(var(--premium-shadow, 245 28% 6%));
  }
  
  .hover\:bg-premium-midnight:hover {
    background-color: hsl(var(--premium-midnight, 248 25% 10%));
  }
  
  .hover\:bg-premium-charcoal:hover {
    background-color: hsl(var(--premium-charcoal, 252 22% 12%));
  }
  
  .hover\:bg-premium-slate:hover {
    background-color: hsl(var(--premium-slate, 255 20% 15%));
  }
  
  .hover\:bg-premium-steel:hover {
    background-color: hsl(var(--premium-steel, 258 18% 18%));
  }
  
  .hover\:bg-premium-navy:hover {
    background-color: hsl(var(--premium-navy, 230 35% 12%));
  }
  
  .hover\:bg-premium-indigo-dark:hover {
    background-color: hsl(var(--premium-indigo-dark, 265 25% 14%));
  }
  
  .hover\:bg-premium-violet-dark:hover {
    background-color: hsl(var(--premium-violet-dark, 280 28% 16%));
  }
  
  /* Border variants */
  .border-premium-void {
    border-color: hsl(var(--premium-void, 240 35% 3%));
  }
  
  .border-premium-shadow\/30 {
    border-color: hsl(var(--premium-shadow, 245 28% 6%) / 0.3);
  }
  
  .border-premium-midnight\/50 {
    border-color: hsl(var(--premium-midnight, 248 25% 10%) / 0.5);
  }
  
  .border-premium-charcoal\/40 {
    border-color: hsl(var(--premium-charcoal, 252 22% 12%) / 0.4);
  }
  
  .border-premium-slate\/60 {
    border-color: hsl(var(--premium-slate, 255 20% 15%) / 0.6);
  }
  
  /* Existing gradients and utilities */
  .bg-gradient-radial {
    background-image: radial-gradient(var(--tw-gradient-stops));
  }
  
  .bg-gradient-to-b {
    background-image: linear-gradient(to bottom, var(--tw-gradient-stops));
  }
  
  .bg-gradient-to-t {
    background-image: linear-gradient(to top, var(--tw-gradient-stops));
  }
  
  .from-premium-blue\/5 {
    --tw-gradient-from: hsl(var(--premium-blue, 259 88% 33%) / 0.05);
    --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to, hsl(var(--premium-blue, 259 88% 33%) / 0));
  }
  
  .from-premium-blue\/20 {
    --tw-gradient-from: hsl(var(--premium-blue, 259 88% 33%) / 0.2);
    --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to, hsl(var(--premium-blue, 259 88% 33%) / 0));
  }
  
  /* New gradient variants */
  .from-premium-void {
    --tw-gradient-from: hsl(var(--premium-void, 240 35% 3%));
    --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to, hsl(var(--premium-void, 240 35% 3%) / 0));
  }
  
  .from-premium-shadow {
    --tw-gradient-from: hsl(var(--premium-shadow, 245 28% 6%));
    --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to, hsl(var(--premium-shadow, 245 28% 6%) / 0));
  }
  
  .from-premium-midnight {
    --tw-gradient-from: hsl(var(--premium-midnight, 248 25% 10%));
    --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to, hsl(var(--premium-midnight, 248 25% 10%) / 0));
  }
  
  .to-transparent {
    --tw-gradient-to: transparent;
  }
  
  .animate-glow {
    animation: glow 3s ease-in-out infinite;
  }

  .from-premium-violet\/5 {
    --tw-gradient-from: hsl(var(--premium-violet, 280 65% 45%) / 0.05);
    --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to, hsl(var(--premium-violet, 280 65% 45%) / 0));
  }

  /* Deep Gradients */
  .bg-gradient-deep-blue-violet {
    background-image: linear-gradient(
      135deg,
      hsl(var(--premium-blue, 259 88% 33%)) 0%,
      hsl(var(--premium-violet-dark, 280 28% 16%)) 100%
    );
  }

  .bg-gradient-midnight-indigo {
    background-image: linear-gradient(
      to bottom right,
      hsl(var(--premium-midnight, 248 25% 10%)) 0%,
      hsl(var(--premium-indigo-dark, 265 25% 14%)) 100%
    );
  }

  .bg-gradient-shadow-steel {
    background-image: linear-gradient(
      to top right,
      hsl(var(--premium-shadow, 245 28% 6%)) 0%,
      hsl(var(--premium-steel, 258 18% 18%)) 100%
    );
  }

  .bg-gradient-void-purple {
    background-image: linear-gradient(
      to bottom,
      hsl(var(--premium-void, 240 35% 3%)),
      hsl(var(--premium-purple, 278 66% 59%) / 0.3)
    );
  }

  .bg-gradient-cyan-indigo {
    background-image: linear-gradient(
      to right,
      hsl(var(--premium-cyan, 195 94% 61%)),
      hsl(var(--premium-indigo-dark, 265 25% 14%))
    );
  }

  .bg-gradient-violet-cyan {
    background-image: linear-gradient(
      145deg,
      hsl(var(--premium-violet-dark, 280 28% 16%)),
      hsl(var(--premium-cyan-dark, 195 45% 9%))
    );
  }

  .bg-gradient-blue-midnight {
    background-image: linear-gradient(
      160deg,
      hsl(var(--premium-blue, 259 88% 33%)),
      hsl(var(--premium-midnight, 248 25% 10%))
    );
  }

  .bg-gradient-navy-shadow {
    background-image: linear-gradient(
      to bottom,
      hsl(var(--premium-navy, 230 35% 12%)),
      hsl(var(--premium-shadow, 245 28% 6%))
    );
  }

  .bg-premium-graphite {
    background-color: hsl(var(--premium-graphite, 240 10% 20%));
  }
  
  .bg-premium-ink {
    background-color: hsl(var(--premium-ink, 235 25% 4%));
  }
  
  .bg-premium-night {
    background-color: hsl(var(--premium-night, 238 18% 8%));
  }
  
  .bg-premium-deep-indigo {
    background-color: hsl(var(--premium-deep-indigo, 260 35% 18%));
  }
  
  .bg-premium-crimson-dark {
    background-color: hsl(var(--premium-crimson-dark, 343 35% 20%));
  }
  
  .border-premium-electric-blue\/50 {
    border-color: hsl(var(--premium-electric-blue, 210 100% 55%) / 0.5);
  }
  
  .border-premium-graphite\/40 {
    border-color: hsl(var(--premium-graphite, 240 10% 20%) / 0.4);
  }
  
  .text-premium-fuchsia {
    color: hsl(var(--premium-fuchsia, 300 75% 60%));
  }
  
  .text-premium-rose {
    color: hsl(var(--premium-rose, 340 85% 65%));
  }
  
  .text-premium-teal {
    color: hsl(var(--premium-teal, 172 80% 45%));
  }

  .from-premium-electric-blue {
    --tw-gradient-from: hsl(var(--premium-electric-blue, 210 100% 55%));
    --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to, hsl(var(--premium-electric-blue, 210 100% 55%) / 0));
  }
  
  .from-premium-violet {
    --tw-gradient-from: hsl(var(--premium-violet, 280 65% 45%));
    --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to, hsl(var(--premium-violet, 280 65% 45%) / 0));
  }
  
  .from-premium-teal {
    --tw-gradient-from: hsl(var(--premium-teal, 172 80% 45%));
    --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to, hsl(var(--premium-teal, 172 80% 45%) / 0));
  }

  .bg-premium-rose {
    background-color: hsl(var(--premium-rose, 330 80% 60%));
  }
  
  .bg-premium-magenta {
    background-color: hsl(var(--premium-magenta, 315 70% 50%));
  }
  
  .bg-premium-gold {
    background-color: hsl(var(--premium-gold, 45 95% 55%));
  }
  
  .bg-premium-amber {
    background-color: hsl(var(--premium-amber, 40 90% 50%));
  }
  
  .bg-premium-lime {
    background-color: hsl(var(--premium-lime, 95 80% 45%));
  }
  
  .bg-premium-aqua {
    background-color: hsl(var(--premium-aqua, 180 70% 55%));
  }
  
  .bg-premium-nebula {
    background-color: hsl(var(--premium-nebula, 255 36% 8%));
  }
  
  .bg-premium-oblivion {
    background-color: hsl(var(--premium-oblivion, 235 20% 5%));
  }
  
  .bg-premium-cosmic {
    background-color: hsl(var(--premium-cosmic, 245 30% 12%));
  }
  
  .bg-premium-zinc {
    background-color: hsl(var(--premium-zinc, 220 10% 15%));
  }
  
  .bg-premium-graphite {
    background-color: hsl(var(--premium-graphite, 230 8% 18%));
  }
  
  .bg-premium-sandstone {
    background-color: hsl(var(--premium-sandstone, 38 10% 25%));
  }
  
  .hover\:bg-premium-rose\/20:hover {
    background-color: hsl(var(--premium-rose, 330 80% 60%) / 0.2);
  }
  
  .text-premium-gold {
    color: hsl(var(--premium-gold, 45 95% 55%));
  }
  
  .border-premium-magenta\/40 {
    border-color: hsl(var(--premium-magenta, 315 70% 50%) / 0.4);
  }
  
  .bg-premium-indigo\/5 {
    background-color: hsl(var(--premium-indigo-dark, 265 25% 14%) / 0.05);
  }
  
  .bg-gradient-indigo-gold {
    background-image: linear-gradient(
      135deg,
      hsl(var(--premium-indigo-dark, 265 25% 14%)) 0%,
      hsl(var(--premium-gold, 45 95% 55%)) 100%
    );
  }
  
  .bg-gradient-cyan-rose {
    background-image: linear-gradient(
      to bottom right,
      hsl(var(--premium-cyan, 195 94% 61%)) 0%,
      hsl(var(--premium-rose, 330 80% 60%)) 100%
    );
  }
  
  .bg-gradient-aqua-lime {
    background-image: linear-gradient(
      to bottom,
      hsl(var(--premium-aqua, 180 70% 55%)) 0%,
      hsl(var(--premium-lime, 95 80% 45%)) 100%
    );
  }
  
}

/* Keyframe animations */
@keyframes rotate {
  100% {
    transform: rotate(1turn);
  }
}

@keyframes glow {
  0%, 100% { 
    opacity: 1;
    box-shadow: 0 0 10px 2px hsla(var(--premium-purple), 0.8);
  }
  50% { 
    opacity: 0.7;
    box-shadow: 0 0 20px 5px hsla(var(--premium-purple), 0.5);
  }
}

@keyframes accordion-down {
  from {
    height: 0;
  }
  to {
    height: var(--radix-accordion-content-height);
  }
}

@keyframes accordion-up {
  from {
    height: var(--radix-accordion-content-height);
  }
  to {
    height: 0;
  }
}

.animate-accordion-down {
  animation: accordion-down 0.2s ease-out;
}

.animate-accordion-up {
  animation: accordion-up 0.2s ease-out;
}

==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\lib\judge0LanguageId\languageUtils.js
==============================

export const getJudge0LanguageId = (language) => {
  const languageMap = {
    python: 71,
    java: 62,
    javascript: 63,
  };

  return languageMap[language];
};

export function getLanguageName(languageId) {
  const LANGUAGE_NAMES = {
    74: 'typeScript',
    63: 'javascript',
    71: 'python',
    62: 'java',
  };

  return LANGUAGE_NAMES[languageId] || 'Unknown';
}


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\lib\ProtectedRote\ProtectedRoute.jsx
==============================

import React from 'react';
import { Navigate, useLocation } from 'react-router-dom';
import { useSelector } from 'react-redux';

// For non-authenticated users only (login/signup pages)
export const PublicRoute = ({ children }) => {
  const location = useLocation();
  const { isAuthenticated } = useSelector((state) => state.auth);

  // If user is authenticated, redirect to home page or the page they were trying to access
  if (isAuthenticated) {
    const from = location.state?.from?.pathname || '/';
    return <Navigate to={from} replace />;
  }

  return children;
};

// For authenticated users only (protected pages)
export const PrivateRoute = ({ children }) => {
  const location = useLocation();
  const { isAuthenticated } = useSelector((state) => state.auth);

  // If user is not authenticated, redirect to login page and save the intended destination
  if (!isAuthenticated) {
    return <Navigate to='/login' state={{ from: location }} replace />;
  }

  return children;
};


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\lib\utils.js
==============================

import { clsx } from "clsx";
import { twMerge } from "tailwind-merge"

export function cn(...inputs) {
  return twMerge(clsx(inputs));
}


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\lib\validations\signupSchema.js
==============================

// src/lib/validations/signupSchema.js
import { z } from 'zod';

export const signupSchema = z
  .object({
    fullName: z.string().min(2, 'Full name is required'),
    email: z.string().email('Invalid email address'),
    password: z.string().min(6, 'Password must be at least 6 characters'),
    confirmPassword: z.string(),
  })
  .refine((data) => data.password === data.confirmPassword, {
    message: 'Passwords do not match',
    path: ['confirmPassword'],
  });


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\main.jsx
==============================

import { BrowserRouter } from 'react-router-dom';
import { createRoot } from 'react-dom/client';
import './index.css';
import App from './App.jsx';

createRoot(document.getElementById('root')).render(
  <BrowserRouter>
    <App />
  </BrowserRouter>
);


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\Pages\Auth\LoginPage.jsx
==============================


import { Login } from '@/components/Auth/Login';
import React from 'react'

export const LoginPage = () => {
  return (
    <div className='flex min-h-svh w-full items-center justify-center p-6 md:p-10'>
      <div className='w-full max-w-sm'>
        <Login />
      </div>
    </div>
  );
}


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\Pages\Auth\SignupPage.jsx
==============================


import { Signup } from '@/components/Auth/Signup';
import React from 'react';

export const SignupPage = () => {
  return (
    <div className='flex min-h-svh w-full items-center justify-center md:p-10'>
      <div className='w-full max-w-sm'>
        <Signup/>
      </div>
    </div>
  );
};


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\Pages\Discussion\DiscussionPage.jsx
==============================

import GlobalDiscussion from '@/components/Discussion/GlobalDiscussion'
import React from 'react'

export const DiscussionPage = () => {
  return (
    <><GlobalDiscussion/></>
  )
}


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\Pages\Homepage.jsx
==============================

import { Header } from '@/components/LandingPage/Header';
import { HeroSection } from '@/components/LandingPage/HeroSection';
import { FeaturesSection } from '@/components/LandingPage/FeatureSection';
import { HowItWorksSection } from '@/components/LandingPage/HowItWorksSection';
import { PricingSection } from '@/components/LandingPage/PricingSection';
import { CtaSection } from '@/components/LandingPage/CtaSection';
import { Footer } from '@/components/LandingPage/Footer';


export default function Homepage() {
  return (
    <>
      <main className='flex-1'>
        <HeroSection />
        <FeaturesSection />
        <HowItWorksSection />
        <PricingSection />
        <CtaSection />
      </main>
      <Footer />
    </>
  );
}


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\Pages\IndividualProblem\IndividualProblemPage.jsx
==============================

import { IndividualProblem } from '@/components/ProblemSet/IndividualProblem'
import React from 'react'

export const IndividualProblemPage = () => {
  return (
    <>
    <IndividualProblem/>
    </>
  )
}


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\Pages\Leaderboard\LeaderboardPage.jsx
==============================

import Leaderboard from '@/components/Leaderboard/Leaderboard';
import React from 'react'

export const LeaderboardPage = () => {
  return (
    <div className='min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800 py-8 px-4'>
      <div className='container mx-auto'>
        <div className='text-center mb-8'>
          <h1 className='text-4xl font-bold text-slate-900 dark:text-slate-100 mb-2'>
            AlgoDrill Platform
          </h1>
          <p className='text-slate-600 dark:text-slate-400'>
            Compete with developers worldwide and climb the leaderboard!
          </p>
        </div>

        <Leaderboard/>
      </div>
    </div>
  );
}


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\Pages\Notfound\NotFound.jsx
==============================

import { useNavigate } from 'react-router-dom';

import { Button } from '@/components/ui/button';
import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';

export const Notfound = () => {
  const navigate = useNavigate();
  return (
    <div className='flex h-screen w-full flex-col items-center justify-center bg-gray-100'>
      <Card className='text-center shadow-lg max-w-lg'>
        <CardHeader>
          <CardTitle>404 Not Found</CardTitle>
          <p className='text-gray-600'>
            The page you are looking for does not exist.
          </p>
        </CardHeader>
        <CardContent>
          <img
            className='rounded-lg shadow-lg'
            src='https://www.digitalmesh.com/blog/wp-content/uploads/2020/05/404-error.jpg'
          />

          <Button
            variant='outline'
            onClick={() => navigate(-1)}
            className='mt-4'
          >
            Go back
          </Button>
        </CardContent>
      </Card>
    </div>
  );
};


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\Pages\ProblemForm\CreateProblemPage.jsx
==============================


import ProblemForm from '@/components/ProblemForm/ProblemForm'
import React from 'react'

export const CreateProblemPage = () => {
  return (
    <>
    <ProblemForm mode={"create"}/>
    </>
  )
}


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\Pages\ProblemForm\ProblemFormPage.jsx
==============================

import React from 'react'
import { CreateProblemPage } from './CreateProblemPage'
import { UpdateProblemPage } from './UpdateProblemPage'
import { useLocation } from 'react-router-dom';

export const ProblemFormPage = ({ mode: defaultMode = "update" }) => {
    const location = useLocation();
    const mode = location.state?.mode || defaultMode;
  return (
    <div>
      {mode === 'create' ? (
        <>
          <CreateProblemPage mode={mode} />
        </>
      ) : (
        <>
          <UpdateProblemPage mode={mode} />
        </>
      )}
    </div>
  );
}


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\Pages\ProblemForm\UpdateProblemPage.jsx
==============================

import ProblemForm from '@/components/ProblemForm/ProblemForm'
import { useGetIndividualProblem } from '@/hooks/apis/getIndividualProblem/useGetIndividualProblem';
import React, { useEffect } from 'react'
import { SkeletonCard } from '../SkeletonPage/SkeletonCard';


export const UpdateProblemPage = () => {
  const problemId = window.location.pathname.split('/').pop();
  const {isLoading, isSuccess, error, getIndividualProblemMutation} = useGetIndividualProblem(problemId);

  console.log("isSuccess", isSuccess);

  const [problemInfo, setProblemInfo] = React.useState({});
  const getProblemDetails = async () => {
    try {
      const response = await getIndividualProblemMutation(problemId);
      console.log('Successfully fetched individual problem', response);
      setProblemInfo(response.problem);
    } catch (error) {
      console.error('Error fetching individual problem', error);
    }
  }

  useEffect(() => {
    getProblemDetails();
  }, [problemId]);
  
  return (
    <div>
      {!isSuccess ? (
        <div className='flex justify-center items-center h-screen'>
          <SkeletonCard/>
        </div>
      ) : (
        <ProblemForm
          mode={'update'}
          problemInfo={problemInfo}
          isSuccessProblemInfo={isSuccess}
        />
      )}
    </div>
  );
  
}


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\Pages\ProblemSet\ProblemPage.jsx
==============================

import React, { useEffect } from 'react';
import { useLocation, useNavigate } from 'react-router-dom';
import AllProblem from '@/components/ProblemSet/AllProblem';
import { toast } from 'sonner';
import axios from '@/config/axiosConfig';
import { useDispatch } from 'react-redux';
import { loginSuccess } from '@/features/auth/authSlice';

export const ProblemPage = () => {
  const location = useLocation();
  const navigate = useNavigate();

  const dispatch = useDispatch();

  const getMe = async () => {
    try {
      const response = await axios.get('/auth/me');

      // dispatch(
      //   loginSuccess({
      //     user: response.user.name,
      //     role: response.user.role,
      //     id: response.user.id,
      //     isAuthenticated: true,
      //   })
      // );

      console.log("response", response.data);
      dispatch(
        loginSuccess({
          user: response.data.name,
          role: response.data.role,
          id: response.data.id,
          username: response.data.username,
          email: response.data.email,
          isAuthenticated: true,
        })
      );
      return response.data;

    } catch (error) {
      console.error(error);
      throw error.response?.data || error;
    }
  };

  useEffect(() => {
    const queryParams = new URLSearchParams(location.search);
    const success = queryParams.get('success');

    if (success === 'google_login') {
      // Call getMe() after successful login
      getMe()
        .then((user) => {
          console.log('User data:', user);
          // You can update your app state here with user data
          setTimeout(() => {
            toast.success('Successfully logged in with Google!');
          }, 50);
        })
        .catch((error) => {
          console.error('Failed to get user data:', error);
          setTimeout(() => {
            toast.error('Login successful but failed to get user data.');
          }, 50);
        })
        .finally(() => {
          navigate('/problem-set', { replace: true });
        });
    } else if (success === 'google_login_failed') {
      setTimeout(() => {
        toast.error('Google login failed.');
      }, 50);
      navigate('/problem-set', { replace: true });
    }
  }, [location.search, navigate]);

  return <AllProblem />;
};


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\Pages\ProblemSheet\ProblemSheetPage.jsx
==============================

import ProblemSheet from '@/components/ProblemSheet/ProblemSheet'
import React from 'react'

export const ProblemSheetPage = () => {
  return (
    <div><ProblemSheet/></div>
  )
}


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\Pages\Profile\ProfilePage.jsx
==============================

import { Profile } from '@/components/Profile/Profile';
import React from 'react';

export const ProfilePage = () => {
  return (
    <>
      <Profile />
    </>
  );
};


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\Pages\SkeletonPage\SkeletonCard.jsx
==============================

import { Skeleton } from '@/components/ui/skeleton';

export function SkeletonCard() {
  return (
    <div className='flex flex-col space-y-3'>
      <Skeleton className='h-[125px] w-[250px] rounded-xl' />
      <div className='space-y-2'>
        <Skeleton className='h-4 w-[250px]' />
        <Skeleton className='h-4 w-[200px]' />
      </div>
    </div>
  );
}


==============================
FILE: E:\My Projects\LeetLab\Algodrill\frontend\src\Routes.jsx
==============================

import React from 'react';
import { Route, Routes } from 'react-router-dom';
import Homepage from './Pages/Homepage';
import { Notfound } from './Pages/Notfound/NotFound';

import { Header } from './components/LandingPage/Header';
import { SignupPage } from './Pages/Auth/SignupPage';
import { LoginPage } from './Pages/Auth/LoginPage';
import { ProblemPage } from './Pages/ProblemSet/ProblemPage';

import { PrivateRoute, PublicRoute } from './lib/ProtectedRote/ProtectedRoute';
import { ProfilePage } from './Pages/Profile/ProfilePage';
import { IndividualProblemPage } from './Pages/IndividualProblem/IndividualProblemPage';
import { UpdateProblemPage } from './Pages/ProblemForm/UpdateProblemPage';
import { CreateProblemPage } from './Pages/ProblemForm/CreateProblemPage';
import { ProblemFormPage } from './Pages/ProblemForm/ProblemFormPage';
import { ProblemSheetPage } from './Pages/ProblemSheet/ProblemSheetPage';
import Navbar from './components/ProblemSet/NavBar';
import IndividualProblemSheetDetails from './components/ProblemSheet/IndividualProblemSheetDetails';
import { DiscussionPage } from './Pages/Discussion/DiscussionPage';
import { LeaderboardPage } from './Pages/Leaderboard/LeaderboardPage';
// Layout component that includes the Header for all pages
const Layout = ({ children }) => {
  return (
    <div className='flex min-h-screen flex-col bg-premium-darker text-white'>
      <Header />
      {children}
    </div>
  );
};

const NavLayout = ({ children }) => {
  return (
    <div>
      <Navbar />
      <main>{children}</main>
    </div>
  );
};

export default Layout;


export const AppRoutes = () => {
  return (
    <Routes>
      <Route
        path='/'
        element={
          <Layout>
            <Homepage />
          </Layout>
        }
      />
      <Route
        path='/login'
        element={
          <Layout>
            <PublicRoute>
              <LoginPage />
            </PublicRoute>
          </Layout>
        }
      />
      <Route
        path='/signup'
        element={
          <Layout>
            <PublicRoute>
              <SignupPage />
            </PublicRoute>
          </Layout>
        }
      />
      <Route
        path='/problem-set'
        element={
          <Layout>
            <NavLayout>
              <ProblemPage />
            </NavLayout>
          </Layout>
        }
      />
      <Route
        path='/dsaSheet'
        element={
          <Layout>
            <NavLayout>
              <ProblemSheetPage />
            </NavLayout>
          </Layout>
        }
      />
      <Route
        path='/discussion'
        element={
          <Layout>
            <NavLayout>
              <DiscussionPage />
            </NavLayout>
          </Layout>
        }
      />
      <Route
        path='/leaderboard'
        element={
          <Layout>
            <NavLayout>
              <LeaderboardPage />
            </NavLayout>
          </Layout>
        }
      />
      <Route
        path='/dsaSheet/:sheetId'
        element={
          <Layout>
            <IndividualProblemSheetDetails />
          </Layout>
        }
      />

      {/* <Route
        path='/dsaSheet/:sheetId'
        element={           <IndividualProblemSheetDetails />
        }
      /> */}
      <Route
        path='/create-problem'
        element={
          <Layout>
            <PrivateRoute>
              <ProblemFormPage mode='create' />
            </PrivateRoute>
          </Layout>
        }
      />
      {/*  */}
      <Route
        path='/edit-problem/:id'
        element={
          <Layout>
            <PrivateRoute>
              <ProblemFormPage mode='update' />
            </PrivateRoute>
          </Layout>
        }
      />

      <Route
        path='/profile'
        element={
          <Layout>
            <PrivateRoute>
              <ProfilePage />
            </PrivateRoute>
          </Layout>
        }
      />
      <Route
        path='/problems/:problemId'
        element={
          <Layout>
            <IndividualProblemPage />
          </Layout>
        }
      />
      <Route
        path='/*'
        element={
          <Layout>
            <Notfound />
          </Layout>
        }
      />
    </Routes>
  );
};
